<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Monads.html">
<link rel="next" href="Bap_future.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of extensions" rel=Appendix href="index_extensions.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class attributes" rel=Appendix href="index_attributes.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Bap" rel="Chapter" href="Bap.html">
<link title="Bap_bundle" rel="Chapter" href="Bap_bundle.html">
<link title="Bap_config" rel="Chapter" href="Bap_config.html">
<link title="Core_printers" rel="Chapter" href="Core_printers.html">
<link title="Bap_plugins" rel="Chapter" href="Bap_plugins.html">
<link title="Regular" rel="Chapter" href="Regular.html">
<link title="Monads" rel="Chapter" href="Monads.html">
<link title="Ogre" rel="Chapter" href="Ogre.html">
<link title="Bap_future" rel="Chapter" href="Bap_future.html">
<link title="Graphlib" rel="Chapter" href="Graphlib.html">
<link title="Bap_taint" rel="Chapter" href="Bap_taint.html">
<link title="Bap_primus" rel="Chapter" href="Bap_primus.html">
<link title="Bare" rel="Chapter" href="Bare.html">
<link title="Arm_insn" rel="Chapter" href="Arm_insn.html">
<link title="Arm_mul" rel="Chapter" href="Arm_mul.html">
<link title="Arm_utils" rel="Chapter" href="Arm_utils.html">
<link title="Arm_mem_shift" rel="Chapter" href="Arm_mem_shift.html">
<link title="Arm_flags" rel="Chapter" href="Arm_flags.html">
<link title="Arm_env" rel="Chapter" href="Arm_env.html">
<link title="Arm_mem" rel="Chapter" href="Arm_mem.html">
<link title="Arm_op" rel="Chapter" href="Arm_op.html">
<link title="Arm_bit" rel="Chapter" href="Arm_bit.html">
<link title="Arm_branch" rel="Chapter" href="Arm_branch.html">
<link title="ARM" rel="Chapter" href="ARM.html">
<link title="Arm_shift" rel="Chapter" href="Arm_shift.html">
<link title="Arm_mov" rel="Chapter" href="Arm_mov.html">
<link title="Arm_cond" rel="Chapter" href="Arm_cond.html">
<link title="Arm_types" rel="Chapter" href="Arm_types.html">
<link title="Arm_reg" rel="Chapter" href="Arm_reg.html">
<link title="Arm_helpers" rel="Chapter" href="Arm_helpers.html">
<link title="Arm_lifter" rel="Chapter" href="Arm_lifter.html">
<link title="X86_asm_reg" rel="Chapter" href="X86_asm_reg.html">
<link title="X86_types" rel="Chapter" href="X86_types.html">
<link title="X86_env" rel="Chapter" href="X86_env.html">
<link title="X86_llvm_env" rel="Chapter" href="X86_llvm_env.html">
<link title="X86_asm" rel="Chapter" href="X86_asm.html">
<link title="X86_cpu" rel="Chapter" href="X86_cpu.html">
<link title="X86_asm_reg_types" rel="Chapter" href="X86_asm_reg_types.html">
<link title="Bap_api" rel="Chapter" href="Bap_api.html">
<link title="Bap_abi" rel="Chapter" href="Bap_abi.html">
<link title="Bap_c_type" rel="Chapter" href="Bap_c_type.html">
<link title="Bap_c_data" rel="Chapter" href="Bap_c_data.html">
<link title="Bap_c_attr" rel="Chapter" href="Bap_c_attr.html">
<link title="Bap_c_type_mapper_intf" rel="Chapter" href="Bap_c_type_mapper_intf.html">
<link title="Bap_c_type_printer" rel="Chapter" href="Bap_c_type_printer.html">
<link title="Bap_c_term_attributes" rel="Chapter" href="Bap_c_term_attributes.html">
<link title="Bap_c_abi" rel="Chapter" href="Bap_c_abi.html">
<link title="Bap_c_type_mapper" rel="Chapter" href="Bap_c_type_mapper.html">
<link title="Bap_c" rel="Chapter" href="Bap_c.html">
<link title="Bap_c_parser" rel="Chapter" href="Bap_c_parser.html">
<link title="Bap_c_size" rel="Chapter" href="Bap_c_size.html">
<link title="Bap_bml" rel="Chapter" href="Bap_bml.html">
<link title="Bap_build" rel="Chapter" href="Bap_build.html">
<link title="Bap_byteweight_signatures" rel="Chapter" href="Bap_byteweight_signatures.html">
<link title="Bap_byteweight" rel="Chapter" href="Bap_byteweight.html">
<link title="Bap_demangle" rel="Chapter" href="Bap_demangle.html">
<link title="Bap_dwarf" rel="Chapter" href="Bap_dwarf.html">
<link title="Bap_ida" rel="Chapter" href="Bap_ida.html">
<link title="Bap_llvm" rel="Chapter" href="Bap_llvm.html">
<link title="Bap_llvm_loader" rel="Chapter" href="Bap_llvm_loader.html">
<link title="Bap_traces" rel="Chapter" href="Bap_traces.html">
<link title="Bap_strings_index" rel="Chapter" href="Bap_strings_index.html">
<link title="Bap_strings_scanner" rel="Chapter" href="Bap_strings_scanner.html">
<link title="Bap_strings" rel="Chapter" href="Bap_strings.html">
<link title="Bap_strings_detector" rel="Chapter" href="Bap_strings_detector.html">
<link title="Bap_strings_unscrambler" rel="Chapter" href="Bap_strings_unscrambler.html">
<link title="Text_tags" rel="Chapter" href="Text_tags.html"><title>BAR: BAP Annotated Reference : Ogre</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Monads.html" title="Monads">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Bap_future.html" title="Bap_future">Next</a>
</div>
<h1>Module <a href="type_Ogre.html">Ogre</a></h1>

<pre><span class="keyword">module</span> Ogre: <code class="code"><span class="keyword">sig</span></code> <a href="Ogre.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
OGRE - Open Generic Representation.
<p>

    OGRE is a self-describing data storage. It is open for
    extensibility, i.e., adding new types of knowledge doesn't break
    the storage. It also has a well-specified open representation, so
    that any tool written in any language (or even a human itself) can
    create, modify and understand the contents (like XML). Ogre
    provides data persitance and, more importantly, a type safe way of
    querying and updating the data. The query language is rich enough,
    and supports joins and boolean constraints
<p>

    It can be seen as a document NoSQL database engine. As a backing
    storage Ogre uses S-Expressions, and the structure of a document
    is close to JSON. In fact it is a restricted subset of JSON, where
    only scalar values are allowed.
<p>

    A database, called a "document" (or just "doc") in Ogre parlance,
    is a set of facts. Each fact is described with a proposition
    having the following syntax,
<p>

    <pre class="verbatim">(&lt;attribute-name&gt; &lt;v1&gt; &lt;v2&gt; ... &lt;vM&gt; )</pre>
<p>

    where <code class="code">&lt;attribute-name&gt;</code> is a name of a proposition and <code class="code">&lt;vN&gt;</code> is
    the value of <code class="code"><span class="constructor">N</span></code>'th object (or subject) of a proposition. For
    example,
<p>

    <pre class="verbatim">(student (name Joe) (gpa 3.5))</pre>
<p>

    is a proposition that a student named <code class="code"><span class="constructor">Joe</span></code> has a GPA rate
    <code class="code">3.5</code>. Thus a proposition is a tuple with named fields. All
    propositions must be well-typed, so the predicate <code class="code">student</code> should
    be declared before used. The field values maybe stored (and are by
    default) without the names in the order in which they are
    specified in the declaration, e.g., the following definition is
    equivalent to the previous one:
<p>

    <pre class="verbatim">(student Joe 3.5)</pre>
<p>

    Given, that the predicate is declared as:
<p>

    <pre class="verbatim">(declare student (name str) (gpa float))</pre>
<p>

    where the declaration has the following syntax:
<p>

    <pre class="verbatim">     declaration ::= ( declare &lt;attribute-name&gt; &lt;field&gt; &lt;field&gt; ... )
     field ::= ( &lt;field-name&gt; &lt;field-type&gt; )
     field-type ::= int | str | bool | float
   </pre>
<p>

    Each declaration declare an attribute, that defines a type of the
    propositions. Unlike the SQL, we denote each tuple type with the
    word attribute, as under our model each document describes some
    knowledge (an attribute) about some abstract entity. For example,
    a document "college.ogre" that contains definitions of attributes
    named <code class="code">student</code>, <code class="code">teacher</code>, <code class="code"><span class="keyword">class</span></code>, <code class="code">assignments</code> is a set of
    knowledge about a college. Thus an attribute maps to a SQL notion
    of table (or a relvar). Correspondingly, a column of a table (that
    is usually referred as an attribute in the relational model), maps
    to Ogre's field.<br>
</div>
<hr width="100%">

<pre><span id="TYPEdoc"><span class="keyword">type</span> <code class="type"></code>doc</span> </pre>
<div class="info ">
the document<br>
</div>


<pre><span id="TYPEtypeinfo"><span class="keyword">type</span> <code class="type">('a, ('b -> 'c))</code> typeinfo</span> </pre>
<div class="info ">
type information associated with an attribute<br>
</div>


<pre><span id="TYPEattribute"><span class="keyword">type</span> <code class="type">('a, ('b -> 'c))</code> attribute</span> = <code class="type">unit -> ('a, 'b -> 'c) <a href="Ogre.html#TYPEtypeinfo">typeinfo</a></code> </pre>
<div class="info ">
a decriptor of an attribute.
<p>

    Used to construct attribute values, and to query
    documents. Created with <code class="code">declare</code> function.
<p>

    Note, that due to a value restriction, an attribute should be
    defined as a function returning a type information.<br>
</div>


<pre><span id="TYPEfield"><span class="keyword">type</span> <code class="type">'a</code> field</span> </pre>
<div class="info ">
<code class="code">t&nbsp;field</code> a descriptor of an attribute field.
<p>

    Used to construct attributes, and to construct variables that
    reference particular fields of an attribute.
<p>

    the type variable <code class="code">t</code> range is <code class="code">float</code>, <code class="code">int64</code>, <code class="code">string</code> or
    <code class="code">bool</code>.<br>
</div>


<pre><span id="TYPEquery"><span class="keyword">type</span> <code class="type">'a</code> query</span> </pre>
<div class="info ">
<code class="code">attrs&nbsp;query</code> constructs a query type.
<p>

    Created using the <code class="code"><span class="constructor">Query</span></code> module. The <code class="code">attrs</code> type variable
    encodes the types of requested attributes. For example,
<p>

    <code class="code">((student&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;teacher&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>a)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>a)&nbsp;query</code>
<p>

    represents a query for two attributes of type <code class="code">student</code> and
    <code class="code">teacher</code> correspondingly. It is represented as a continuation,
    denoting the fact, that the query can be executed later for an
    arbitrary result.<br>
</div>


<pre><span id="TYPEseq"><span class="keyword">type</span> <code class="type">'a</code> seq</span> = <code class="type">'a Std.Sequence.t</code> </pre>
<div class="info ">
a result of a selection.<br>
</div>


<pre><span id="TYPEscheme"><span class="keyword">type</span> <code class="type">(('a -> 'b), ('c -> 'd))</code> scheme</span> </pre>
<div class="info ">
type that describes an attribute.
<p>

    The two type variables describe the constructor and destructor
    interface. The <code class="code"><span class="keywordsign">'</span>a</code> variable, the accessor, describes how an
    attribute can be constructed. The <code class="code"><span class="keywordsign">'</span>s</code> variable, describes how an
    attribute can be packed in the database. These two types come
    along and differ only in a return type. The general form of a type
    variable is <code class="code">(<span class="keywordsign">'</span>a&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>r)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">'</span>r</code>, where <code class="code"><span class="keywordsign">'</span>r</code> is the return type (a type of
    attribute for instance), and <code class="code"><span class="keywordsign">'</span>a</code> variable is extended every time a
    new field is added to a scheme.<br>
</div>


<pre><span id="VALdeclare"><span class="keyword">val</span> declare</span> : <code class="type">name:string -><br>       ('f -> 'a, 'b -> 'c) <a href="Ogre.html#TYPEscheme">scheme</a> -> 'f -> ('a, 'b -> 'c) <a href="Ogre.html#TYPEtypeinfo">typeinfo</a></code></pre><div class="info ">
<code class="code"><span class="keyword">let</span>&nbsp;attr&nbsp;()&nbsp;=&nbsp;declare&nbsp;~name&nbsp;scheme</code> declares an attribute named
    with <code class="code">name</code>, and having a type described by the <code class="code">scheme</code>.
<p>

    Due to a value restriction, each attribute should be defined as
    a thunk (a function).<br>
</div>

<pre><span class="keyword">module</span> <a href="Ogre.Type.html">Type</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Ogre.Type.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Ogre type system.
</div>

<pre><span class="keyword">module</span> <a href="Ogre.Query.html">Query</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Ogre.Query.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Domain specific language for constructing queries.
</div>

<pre><span class="keyword">module</span> <a href="Ogre.Doc.html">Doc</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Ogre.Doc.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
An Ogre document.
</div>

<pre><span class="keyword">module type</span> <a href="Ogre.S.html">S</a> = <code class="code"><span class="keyword">sig</span></code> <a href="Ogre.S.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Monadic interface to the document.
</div>

<pre><span class="keyword">module</span> <a href="Ogre.Make.html">Make</a> <code class="code">(</code><code class="code"><span class="constructor">M</span></code><code class="code">&nbsp;:&nbsp;</code><code class="type"><a href="Monads.Std.Monad.S.html">Std.Monad.S</a></code><code class="code">)&nbsp;</code>: <code class="type"><a href="Ogre.S.html">S</a></code><code class="type">  with type 'a m := 'a M.t</code></pre><div class="info">
<code class="code"><span class="constructor">Make</span>(<span class="constructor">M</span>)</code> returns an Ogre monad implementation wrapped in a monad <code class="code"><span class="constructor">M</span></code>.
</div>

<pre><span class="keyword">include</span> <a href="Ogre.S.html">Ogre.S</a></pre>
<div class="info ">
Default implementation of the Orge monad, that is not wrapped into
    any other monads (in other words, that is wrapped into the identity)<br>
</div>
</body></html>