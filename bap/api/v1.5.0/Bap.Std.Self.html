<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Bap.Std.Project.html">
<link rel="next" href="Bap.Std.Log.html">
<link rel="Up" href="Bap.Std.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of extensions" rel=Appendix href="index_extensions.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class attributes" rel=Appendix href="index_attributes.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Bap" rel="Chapter" href="Bap.html">
<link title="Bap_bundle" rel="Chapter" href="Bap_bundle.html">
<link title="Bap_config" rel="Chapter" href="Bap_config.html">
<link title="Core_printers" rel="Chapter" href="Core_printers.html">
<link title="Bap_plugins" rel="Chapter" href="Bap_plugins.html">
<link title="Regular" rel="Chapter" href="Regular.html">
<link title="Monads" rel="Chapter" href="Monads.html">
<link title="Ogre" rel="Chapter" href="Ogre.html">
<link title="Bap_future" rel="Chapter" href="Bap_future.html">
<link title="Graphlib" rel="Chapter" href="Graphlib.html">
<link title="Bap_taint" rel="Chapter" href="Bap_taint.html">
<link title="Bap_primus" rel="Chapter" href="Bap_primus.html">
<link title="Bare" rel="Chapter" href="Bare.html">
<link title="Arm_insn" rel="Chapter" href="Arm_insn.html">
<link title="Arm_mul" rel="Chapter" href="Arm_mul.html">
<link title="Arm_utils" rel="Chapter" href="Arm_utils.html">
<link title="Arm_mem_shift" rel="Chapter" href="Arm_mem_shift.html">
<link title="Arm_flags" rel="Chapter" href="Arm_flags.html">
<link title="Arm_env" rel="Chapter" href="Arm_env.html">
<link title="Arm_mem" rel="Chapter" href="Arm_mem.html">
<link title="Arm_op" rel="Chapter" href="Arm_op.html">
<link title="Arm_bit" rel="Chapter" href="Arm_bit.html">
<link title="Arm_branch" rel="Chapter" href="Arm_branch.html">
<link title="ARM" rel="Chapter" href="ARM.html">
<link title="Arm_shift" rel="Chapter" href="Arm_shift.html">
<link title="Arm_mov" rel="Chapter" href="Arm_mov.html">
<link title="Arm_cond" rel="Chapter" href="Arm_cond.html">
<link title="Arm_types" rel="Chapter" href="Arm_types.html">
<link title="Arm_reg" rel="Chapter" href="Arm_reg.html">
<link title="Arm_helpers" rel="Chapter" href="Arm_helpers.html">
<link title="Arm_lifter" rel="Chapter" href="Arm_lifter.html">
<link title="X86_asm_reg" rel="Chapter" href="X86_asm_reg.html">
<link title="X86_types" rel="Chapter" href="X86_types.html">
<link title="X86_env" rel="Chapter" href="X86_env.html">
<link title="X86_llvm_env" rel="Chapter" href="X86_llvm_env.html">
<link title="X86_asm" rel="Chapter" href="X86_asm.html">
<link title="X86_cpu" rel="Chapter" href="X86_cpu.html">
<link title="X86_asm_reg_types" rel="Chapter" href="X86_asm_reg_types.html">
<link title="Bap_api" rel="Chapter" href="Bap_api.html">
<link title="Bap_abi" rel="Chapter" href="Bap_abi.html">
<link title="Bap_c_type" rel="Chapter" href="Bap_c_type.html">
<link title="Bap_c_data" rel="Chapter" href="Bap_c_data.html">
<link title="Bap_c_attr" rel="Chapter" href="Bap_c_attr.html">
<link title="Bap_c_type_mapper_intf" rel="Chapter" href="Bap_c_type_mapper_intf.html">
<link title="Bap_c_type_printer" rel="Chapter" href="Bap_c_type_printer.html">
<link title="Bap_c_term_attributes" rel="Chapter" href="Bap_c_term_attributes.html">
<link title="Bap_c_abi" rel="Chapter" href="Bap_c_abi.html">
<link title="Bap_c_type_mapper" rel="Chapter" href="Bap_c_type_mapper.html">
<link title="Bap_c" rel="Chapter" href="Bap_c.html">
<link title="Bap_c_parser" rel="Chapter" href="Bap_c_parser.html">
<link title="Bap_c_size" rel="Chapter" href="Bap_c_size.html">
<link title="Bap_bml" rel="Chapter" href="Bap_bml.html">
<link title="Bap_build" rel="Chapter" href="Bap_build.html">
<link title="Bap_byteweight_signatures" rel="Chapter" href="Bap_byteweight_signatures.html">
<link title="Bap_byteweight" rel="Chapter" href="Bap_byteweight.html">
<link title="Bap_demangle" rel="Chapter" href="Bap_demangle.html">
<link title="Bap_dwarf" rel="Chapter" href="Bap_dwarf.html">
<link title="Bap_ida" rel="Chapter" href="Bap_ida.html">
<link title="Bap_llvm" rel="Chapter" href="Bap_llvm.html">
<link title="Bap_llvm_loader" rel="Chapter" href="Bap_llvm_loader.html">
<link title="Bap_traces" rel="Chapter" href="Bap_traces.html">
<link title="Bap_strings_index" rel="Chapter" href="Bap_strings_index.html">
<link title="Bap_strings_scanner" rel="Chapter" href="Bap_strings_scanner.html">
<link title="Bap_strings" rel="Chapter" href="Bap_strings.html">
<link title="Bap_strings_detector" rel="Chapter" href="Bap_strings_detector.html">
<link title="Bap_strings_unscrambler" rel="Chapter" href="Bap_strings_unscrambler.html">
<link title="Text_tags" rel="Chapter" href="Text_tags.html"><title>BAR: BAP Annotated Reference : Bap.Std.Self</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Bap.Std.Project.html" title="Bap.Std.Project">Previous</a>
&nbsp;<a class="up" href="Bap.Std.html" title="Bap.Std">Up</a>
&nbsp;<a class="post" href="Bap.Std.Log.html" title="Bap.Std.Log">Next</a>
</div>
<h1>Functor <a href="type_Bap.Std.Self.html">Bap.Std.Self</a></h1>

<pre><span class="keyword">module</span> Self <code class="code">(</code><code class="code">*</code><code class="code">&nbsp;:&nbsp;</code><code class="code"><span class="keyword">sig</span></code></pre><div class="sig_block"></div><pre><code class="code"><span class="keyword">end</span></code><code class="code">)&nbsp;</code>: <code class="code"><span class="keyword">sig</span></code> <a href="Bap.Std.Self.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
A self reflection.
<p>

      This is a generative functor module refers to an information bundled with an application.
      Use <code class="code"><span class="keyword">include</span>&nbsp;<span class="constructor">Self</span>()</code> syntax to bring this definitions to the
      scope.
<p>

      It is designed to be used inside a plugin, but can be used in
      a standalone program as well (this is usefull, for debugging
      plugins, by running them as a standalone applications).
<p>

      If run in a standalone mode, then field <code class="code">name</code> would be set to
      <code class="code"><span class="constructor">Sys</span>.executable_name</code> and <code class="code">argv</code> to <code class="code"><span class="constructor">Sys</span>.argv</code>.<br>
</div>
<table border="0" cellpadding="3" width="100%">
<tr>
<td align="left" valign="top" width="1%%"><b>Parameters: </b></td>
<td>
<table class="paramstable">
<tr>
<td align="center" valign="top" width="15%">
<code>*</code></td>
<td align="center" valign="top">:</td>
<td><code>()</code>
</table>
</td>
</tr>
</table>
<hr width="100%">

<pre><span id="VALname"><span class="keyword">val</span> name</span> : <code class="type">string</code></pre><div class="info ">
<code class="code">name&nbsp;<span class="keyword">of</span>&nbsp;a&nbsp;plugin</code><br>
</div>

<pre><span id="VALversion"><span class="keyword">val</span> version</span> : <code class="type">string</code></pre><div class="info ">
<code class="code">version&nbsp;number</code><br>
</div>

<pre><span id="VALdoc"><span class="keyword">val</span> doc</span> : <code class="type">string</code></pre><div class="info ">
A short, one-line description<br>
</div>

<pre><span id="VALargv"><span class="keyword">val</span> argv</span> : <code class="type">string array</code></pre><div class="info ">
<code class="code">args&nbsp;name</code> returns an array of arguments designated for a
        plugin with a given <code class="code">name</code>.
<p>

        The arguments will be extracted from <code class="code"><span class="constructor">Sys</span>.argv</code> array by
        removing all arguments that doesn't start with
        <code class="code">--name-</code>. Then, from all command arguments that are left, the
        <code class="code">--name-</code> prefix is substituted with <code class="code">--</code>. For example, if
        <code class="code">argv</code> contained <code class="code">&nbsp;[|&nbsp;<span class="string">"bap"</span>;&nbsp;<span class="string">"-lcallgraph"</span>;&nbsp;<span class="string">"--callgraph"</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"--callgraph-help"</span>|]</code> then pass that registered itself under
        <code class="code">callgraph</code> name will receive the following array of arguments
        <code class="code">&nbsp;[|&nbsp;<span class="string">"callgraph"</span>;&nbsp;--help&nbsp;|]&nbsp;</code>. That means, that plugins can't
        accept arguments that are anonymous or short options<br>
</div>

<pre><span id="VALdebug"><span class="keyword">val</span> debug</span> : <code class="type">('a, Format.formatter, unit) Std.format -> 'a</code></pre><div class="info ">
<code class="code">debug&nbsp;fmt&nbsp;...</code> send a debug message<br>
</div>

<pre><span id="VALinfo"><span class="keyword">val</span> info</span> : <code class="type">('a, Format.formatter, unit) Std.format -> 'a</code></pre><div class="info ">
<code class="code">info&nbsp;fmt&nbsp;...</code> send an info message<br>
</div>

<pre><span id="VALwarning"><span class="keyword">val</span> warning</span> : <code class="type">('a, Format.formatter, unit) Std.format -> 'a</code></pre><div class="info ">
<code class="code">warning&nbsp;fmt&nbsp;...</code> send a warning message<br>
</div>

<pre><span id="VALerror"><span class="keyword">val</span> error</span> : <code class="type">('a, Format.formatter, unit) Std.format -> 'a</code></pre><div class="info ">
<code class="code">error&nbsp;fmt&nbsp;...</code> send an error message<br>
</div>

<pre><span id="VALdebug_formatter"><span class="keyword">val</span> debug_formatter</span> : <code class="type">Format.formatter</code></pre><div class="info ">
formatter that sends debug messages<br>
</div>

<pre><span id="VALinfo_formatter"><span class="keyword">val</span> info_formatter</span> : <code class="type">Format.formatter</code></pre><div class="info ">
formatter that sends info messages<br>
</div>

<pre><span id="VALwarning_formatter"><span class="keyword">val</span> warning_formatter</span> : <code class="type">Format.formatter</code></pre><div class="info ">
formatter that sends warning messages<br>
</div>

<pre><span id="VALerror_formatter"><span class="keyword">val</span> error_formatter</span> : <code class="type">Format.formatter</code></pre><div class="info ">
formatter that sends error messages<br>
</div>

<pre><span id="VALreport_progress"><span class="keyword">val</span> report_progress</span> : <code class="type">?task:string -> ?note:string -> ?stage:int -> ?total:int -> unit -> unit</code></pre><div class="info ">
<code class="code">report_progress&nbsp;~task:t&nbsp;~note:n&nbsp;~state:s&nbsp;~total:s'&nbsp;()</code> reports
        a progress of the task <code class="code">t</code>.
<p>

        Reports that the task <code class="code">t</code> made a progress to the stage <code class="code">s</code> out
        the total number of stages <code class="code">s'</code>. The note <code class="code">n</code> may provide an
        additional textual explanation of the current stage. The report
        doesn't mean that the stage is finished, but rather that it is
        entered. Thus for <code class="code">s'</code> stages we expect to recieve <code class="code">s'-1</code>
        reports. (This approach works fine with functional programming
        and iterating - as in functional programming it is more
        convinient to report before computation, and during the indexed
        iteration the index of the last element is one less than the
        total number of elements).
<p>

        All parameters are optional, and have the following default
        values if not specified:<br>
</div>
<div class="param_info"><code class="code">task</code> : defaults to the plugin <code class="code">name</code>;</div>
<div class="param_info"><code class="code">note</code> : defaults to the empty string;</div>
<div class="param_info"><code class="code">stage</code> : defaults to <code class="code"><span class="constructor">None</span></code></div>
<div class="param_info"><code class="code">total</code> : defaults to <code class="code"><span class="constructor">None</span></code> or to the last value of this
             parameter for the given task.
<p>

        The <code class="code">report_progress</code> bar is an easy way to provide some
        feedback to the system, either in the form of a progress (if the
        total number of stages is known) or in the form of a friendly
        ping back.
<p>

        The mechanism should be used by analyses that expect to take
        some time to complete. Usually, one plugin implements only one
        task, so the task name may be omitted. If an analysis is built
        from several tasks, then they can be represented as subtasks,
        and the main task should represent the whole work.
<p>

        Example:
        <pre class="codepre"><code class="code">          <span class="keyword">let</span> find_interesting_points prog =
            report_progress ~task:<span class="string">"discover"</span> ~total:(<span class="constructor">Term</span>.length sub_t prog) ();
            <span class="constructor">Term</span>.enum sub_t prog |&gt; <span class="constructor">Seq</span>.concat_mapi ~f:(<span class="keyword">fun</span> stage sub <span class="keywordsign">-&gt;</span>
                report_progress ~note:(<span class="constructor">Sub</span>.name sub) ~task:<span class="string">"discover"</span> ~stage ();
                interesting_points_of_sub sub)

          <span class="keyword">let</span> check_interesting_points points =
            report_progress ~task:<span class="string">"checking"</span> ~total:(<span class="constructor">Seq</span>.length points) ();
            <span class="constructor">Seq</span>.iteri ~f:(<span class="keyword">fun</span> stage p <span class="keywordsign">-&gt;</span>
                report_progress ~note:(<span class="constructor">Point</span>.name p) ~task:<span class="string">"checking"</span> ~stage ();
                check_point p)
        </code></pre></div>

<pre><span class="keyword">module</span> <a href="Bap.Std.Self.Config.html">Config</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Bap.Std.Self.Config.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
This module allows plugins to access BAP configuration variables.
</div>
</body></html>