<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Bap.Std.Bili.html">
<link rel="next" href="Bap.Std.Exp.html">
<link rel="Up" href="Bap.Std.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of extensions" rel=Appendix href="index_extensions.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class attributes" rel=Appendix href="index_attributes.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Bap" rel="Chapter" href="Bap.html">
<link title="Bap_bundle" rel="Chapter" href="Bap_bundle.html">
<link title="Bap_config" rel="Chapter" href="Bap_config.html">
<link title="Core_printers" rel="Chapter" href="Core_printers.html">
<link title="Bap_plugins" rel="Chapter" href="Bap_plugins.html">
<link title="Regular" rel="Chapter" href="Regular.html">
<link title="Monads" rel="Chapter" href="Monads.html">
<link title="Ogre" rel="Chapter" href="Ogre.html">
<link title="Bap_future" rel="Chapter" href="Bap_future.html">
<link title="Graphlib" rel="Chapter" href="Graphlib.html">
<link title="Bap_taint" rel="Chapter" href="Bap_taint.html">
<link title="Bap_primus" rel="Chapter" href="Bap_primus.html">
<link title="Bare" rel="Chapter" href="Bare.html">
<link title="Arm_insn" rel="Chapter" href="Arm_insn.html">
<link title="Arm_mul" rel="Chapter" href="Arm_mul.html">
<link title="Arm_utils" rel="Chapter" href="Arm_utils.html">
<link title="Arm_mem_shift" rel="Chapter" href="Arm_mem_shift.html">
<link title="Arm_flags" rel="Chapter" href="Arm_flags.html">
<link title="Arm_env" rel="Chapter" href="Arm_env.html">
<link title="Arm_mem" rel="Chapter" href="Arm_mem.html">
<link title="Arm_op" rel="Chapter" href="Arm_op.html">
<link title="Arm_bit" rel="Chapter" href="Arm_bit.html">
<link title="Arm_branch" rel="Chapter" href="Arm_branch.html">
<link title="ARM" rel="Chapter" href="ARM.html">
<link title="Arm_shift" rel="Chapter" href="Arm_shift.html">
<link title="Arm_mov" rel="Chapter" href="Arm_mov.html">
<link title="Arm_cond" rel="Chapter" href="Arm_cond.html">
<link title="Arm_types" rel="Chapter" href="Arm_types.html">
<link title="Arm_reg" rel="Chapter" href="Arm_reg.html">
<link title="Arm_helpers" rel="Chapter" href="Arm_helpers.html">
<link title="Arm_lifter" rel="Chapter" href="Arm_lifter.html">
<link title="X86_asm_reg" rel="Chapter" href="X86_asm_reg.html">
<link title="X86_types" rel="Chapter" href="X86_types.html">
<link title="X86_env" rel="Chapter" href="X86_env.html">
<link title="X86_llvm_env" rel="Chapter" href="X86_llvm_env.html">
<link title="X86_asm" rel="Chapter" href="X86_asm.html">
<link title="X86_cpu" rel="Chapter" href="X86_cpu.html">
<link title="X86_asm_reg_types" rel="Chapter" href="X86_asm_reg_types.html">
<link title="Bap_api" rel="Chapter" href="Bap_api.html">
<link title="Bap_abi" rel="Chapter" href="Bap_abi.html">
<link title="Bap_c_type" rel="Chapter" href="Bap_c_type.html">
<link title="Bap_c_data" rel="Chapter" href="Bap_c_data.html">
<link title="Bap_c_attr" rel="Chapter" href="Bap_c_attr.html">
<link title="Bap_c_type_mapper_intf" rel="Chapter" href="Bap_c_type_mapper_intf.html">
<link title="Bap_c_type_printer" rel="Chapter" href="Bap_c_type_printer.html">
<link title="Bap_c_term_attributes" rel="Chapter" href="Bap_c_term_attributes.html">
<link title="Bap_c_abi" rel="Chapter" href="Bap_c_abi.html">
<link title="Bap_c_type_mapper" rel="Chapter" href="Bap_c_type_mapper.html">
<link title="Bap_c" rel="Chapter" href="Bap_c.html">
<link title="Bap_c_parser" rel="Chapter" href="Bap_c_parser.html">
<link title="Bap_c_size" rel="Chapter" href="Bap_c_size.html">
<link title="Bap_bml" rel="Chapter" href="Bap_bml.html">
<link title="Bap_build" rel="Chapter" href="Bap_build.html">
<link title="Bap_byteweight_signatures" rel="Chapter" href="Bap_byteweight_signatures.html">
<link title="Bap_byteweight" rel="Chapter" href="Bap_byteweight.html">
<link title="Bap_demangle" rel="Chapter" href="Bap_demangle.html">
<link title="Bap_dwarf" rel="Chapter" href="Bap_dwarf.html">
<link title="Bap_ida" rel="Chapter" href="Bap_ida.html">
<link title="Bap_llvm" rel="Chapter" href="Bap_llvm.html">
<link title="Bap_llvm_loader" rel="Chapter" href="Bap_llvm_loader.html">
<link title="Bap_traces" rel="Chapter" href="Bap_traces.html">
<link title="Bap_strings_index" rel="Chapter" href="Bap_strings_index.html">
<link title="Bap_strings_scanner" rel="Chapter" href="Bap_strings_scanner.html">
<link title="Bap_strings" rel="Chapter" href="Bap_strings.html">
<link title="Bap_strings_detector" rel="Chapter" href="Bap_strings_detector.html">
<link title="Bap_strings_unscrambler" rel="Chapter" href="Bap_strings_unscrambler.html">
<link title="Text_tags" rel="Chapter" href="Text_tags.html"><title>BAR: BAP Annotated Reference : Bap.Std.Eff</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Bap.Std.Bili.html" title="Bap.Std.Bili">Previous</a>
&nbsp;<a class="up" href="Bap.Std.html" title="Bap.Std">Up</a>
&nbsp;<a class="post" href="Bap.Std.Exp.html" title="Bap.Std.Exp">Next</a>
</div>
<h1>Module <a href="type_Bap.Std.Eff.html">Bap.Std.Eff</a></h1>

<pre><span class="keyword">module</span> Eff: <code class="code"><span class="keyword">sig</span></code> <a href="Bap.Std.Eff.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Effect analysis.
<p>

      Effect analysis describes how an expression computation
      interacts with the outside world. By the outside world we
      understand the whole of the CPU state (including the hidden
      state) and the memory. We distinguish, so far, between the
      following sorts of effects:
<p>
<ul>
<li>coeffects - a value of an expression depends on the outside
      world, that is further subdivided by the read effect, when an
      expression reads a CPU register, and the load effect, when an
      expression an expression accesses the memory.</li>
</ul>
<ul>
<li>effects - a value modifies the state of the world, by either
      storing a value in the memory, or by raising a CPU exception
      via the division by zero or accessing the memory.</li>
</ul>

      An expression that doesn't have effects or coeffects is
      idempotent and can be moved arbitrary in a tree, removed or
      substituted. An expression that has only <code class="code">coeffects</code> is
      generative and can be reproduced without a significant change
      of semantics.
<p>

      Examples:<ul>
<li><code class="code">x&nbsp;^&nbsp;x</code>, <code class="code">x+1</code>, <code class="code">x</code> - have coeffects;</li>
<li><code class="code">x[y]</code> - has both effects (may raise pagefault) and coeffects;</li>
<li><code class="code">7&nbsp;*&nbsp;8</code>, <code class="code">42</code> - have no effects.</li>
</ul>
<br>
<b>Since</b> 1.3<br>
</div>
<hr width="100%">

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>
<div class="info ">
a set of expression effects<br>
</div>


<pre><span id="VALnone"><span class="keyword">val</span> none</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a></code></pre><div class="info ">
an expression doesn't have any effects<br>
</div>

<pre><span id="VALread"><span class="keyword">val</span> read</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a></code></pre><div class="info ">
an expression reads a register (nonvirtual) variable.<br>
</div>

<pre><span id="VALload"><span class="keyword">val</span> load</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a></code></pre><div class="info ">
an expression loads a value from a memory<br>
</div>

<pre><span id="VALstore"><span class="keyword">val</span> store</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a></code></pre><div class="info ">
an expression stores a value in a memory<br>
</div>

<pre><span id="VALraise"><span class="keyword">val</span> raise</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a></code></pre><div class="info ">
an expression raises a CPU exception<br>
</div>

<pre><span id="VALreads"><span class="keyword">val</span> reads</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">reads&nbsp;eff</code> if <code class="code">read</code> in <code class="code">eff</code><br>
</div>

<pre><span id="VALloads"><span class="keyword">val</span> loads</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">loads&nbsp;eff</code> if <code class="code">load</code> in <code class="code">eff</code><br>
</div>

<pre><span id="VALstores"><span class="keyword">val</span> stores</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">stores&nbsp;eff</code> if <code class="code">load</code> in <code class="code">eff</code><br>
</div>

<pre><span id="VALraises"><span class="keyword">val</span> raises</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">raises&nbsp;eff</code> if <code class="code">raise</code> in <code class="code">eff</code><br>
</div>

<pre><span id="VALhas_effects"><span class="keyword">val</span> has_effects</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">has_effects&nbsp;eff</code> if <code class="code">stores&nbsp;eff</code> || <code class="code">raises&nbsp;eff</code><br>
</div>

<pre><span id="VALhas_coeffects"><span class="keyword">val</span> has_coeffects</span> : <code class="type"><a href="Bap.Std.Eff.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">has_coeffects&nbsp;eff</code> if <code class="code">loads&nbsp;eff</code> || <code class="code">reads&nbsp;eff</code><br>
</div>
<br>
<code class="code">compute&nbsp;x</code> computes a set of effects produced by <code class="code">x</code>. The
        result is a sound overapproximation of the real effects,
        i.e., if an effect is computed then it may really happen,
        but if it is not computed, then it is proved that it is not
        possible for the expression to have this effect.
<p>

        The analysis applies a simple abstract interpretation to
        approximate arithmetics and prove an absence of the division
        by zero. The load/store/read analysis is more precise than
        the division by zero, as the only source of the imprecision
        is a presence of conditional expressions.
<p>

        Requires: normalized and simplified expression.
<p>

        Warning: the above should be either relaxed or expressed in
        the type system.<br>
</body></html>