<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (bap-primus.Bap_primus.Std.Primus.Interpreter.Make)</title><link rel="stylesheet" href="../../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">bap-primus</a> &#x00BB; <a href="../../../../index.html">Bap_primus</a> &#x00BB; <a href="../../../index.html">Std</a> &#x00BB; <a href="../../index.html">Primus</a> &#x00BB; <a href="../index.html">Interpreter</a> &#x00BB; Make</nav><h1>Module <code>Interpreter.Make</code></h1><p>Make(Machine) makes an interpreter that computes in the given <code>Machine</code>.</p></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-Machine/index.html">Machine</a> : <a href="../../Machine/index.html#module-type-S">Machine.S</a></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-m"><a href="#type-m" class="anchor"></a><code><span class="keyword">type</span> <span>'a m</span></code><code> = <span><span class="type-var">'a</span> <a href="argument-1-Machine/index.html#type-t">Machine.t</a></span></code></dt></dl><dl><dt class="spec value" id="val-time"><a href="#val-time" class="anchor"></a><code><span class="keyword">val</span> time : <span><a href="../../Time/index.html#type-t">Time.t</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>time</code> returns the value of the machine clock.</p><dl><dt>since</dt><dd>2.1.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-halt"><a href="#val-halt" class="anchor"></a><code><span class="keyword">val</span> halt : <span>Core_kernel.never_returns <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>halt</code> halts the machine by raise the <code>Halt</code> exception.</p></dd></dl><dl><dt class="spec value" id="val-interrupt"><a href="#val-interrupt" class="anchor"></a><code><span class="keyword">val</span> interrupt : int <span>&#45;&gt;</span> <span>unit <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>interrupt n</code> interrupts the computation with cpuexn <code>n</code></p></dd></dl><dl><dt class="spec value" id="val-pc"><a href="#val-pc" class="anchor"></a><code><span class="keyword">val</span> pc : <span><a href="../../../../../../bap/Bap/Std/index.html#type-addr">Bap.Std.addr</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>pc</code> current value of a program counter.</p></dd></dl><dl><dt class="spec value" id="val-pos"><a href="#val-pos" class="anchor"></a><code><span class="keyword">val</span> pos : <span><a href="../../index.html#type-pos">pos</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>pos m</code> current program position.</p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val</span> sub : <span><a href="../../../../../../bap/Bap/Std/index.html#type-sub">Bap.Std.sub</a> <a href="../../../../../../bap/Bap/Std/index.html#type-term">Bap.Std.term</a></span> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>sub x</code> computes the subroutine <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-blk"><a href="#val-blk" class="anchor"></a><code><span class="keyword">val</span> blk : <span><a href="../../../../../../bap/Bap/Std/index.html#type-blk">Bap.Std.blk</a> <a href="../../../../../../bap/Bap/Std/index.html#type-term">Bap.Std.term</a></span> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>blk x</code> interprets the block <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-exp"><a href="#val-exp" class="anchor"></a><code><span class="keyword">val</span> exp : <a href="../../../../../../bap/Bap/Std/index.html#type-exp">Bap.Std.exp</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>exp x</code> returns a value of <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="../../../../../../bap/Bap/Std/index.html#type-var">Bap.Std.var</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>get var</code> reads <code>var</code></p></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val</span> set : <a href="../../../../../../bap/Bap/Std/index.html#type-var">Bap.Std.var</a> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>set var x</code> sets <code>var</code> to <code>x</code></p></dd></dl><dl><dt class="spec value" id="val-binop"><a href="#val-binop" class="anchor"></a><code><span class="keyword">val</span> binop : <a href="../../../../../../bap/Bap/Std/index.html#type-binop">Bap.Std.binop</a> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>binop op x y</code> computes a binary operation <code>op</code> on <code>x</code> and <code>y</code>.</p><p>If <code>binop op x y</code> will involve the division by zero, then the division by zero trap is signaled. If the <code>division_by_zero_handler</code> is provided, (i.e., is linked) then it will be invoked. If it returns normally, then the result of the <code>binop op x y</code> is undefined. Otherwise, the <code>Division_by_zero</code> machine exception is raised.</p></dd></dl><dl><dt class="spec value" id="val-unop"><a href="#val-unop" class="anchor"></a><code><span class="keyword">val</span> unop : <a href="../../../../../../bap/Bap/Std/index.html#type-unop">Bap.Std.unop</a> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>unop op x</code> computes an unary operation <code>op</code> on <code>x</code></p></dd></dl><dl><dt class="spec value" id="val-cast"><a href="#val-cast" class="anchor"></a><code><span class="keyword">val</span> cast : <a href="../../../../../../bap/Bap/Std/index.html#type-cast">Bap.Std.cast</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>cast t n x</code> casts <code>n</code> bits of <code>x</code> using a casting type <code>t</code></p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val</span> concat : <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>concat x y</code> computes a concatenation of <code>x</code> and <code>y</code></p></dd></dl><dl><dt class="spec value" id="val-extract"><a href="#val-extract" class="anchor"></a><code><span class="keyword">val</span> extract : <span>hi:int</span> <span>&#45;&gt;</span> <span>lo:int</span> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>extract ~hi ~lo x</code> extracts bits from <code>lo</code> to <code>hi</code> from <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val</span> const : <a href="../../../../../../bap/Bap/Std/index.html#type-word">Bap.Std.word</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>const x</code> computes the constant expression <code>x</code></p></dd></dl><dl><dt class="spec value" id="val-ite"><a href="#val-ite" class="anchor"></a><code><span class="keyword">val</span> ite : <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>ite c x y</code> if <code>c</code> evals to <code>b1</code> then <code>x</code> else <code>y</code></p></dd></dl><dl><dt class="spec value" id="val-load"><a href="#val-load" class="anchor"></a><code><span class="keyword">val</span> load : <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="../../../../../../bap/Bap/Std/index.html#type-endian">Bap.Std.endian</a> <span>&#45;&gt;</span> <a href="../../../../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>load a d s</code> computes a load operation, that loads a word of size <code>s</code> using an order specified by the endianness <code>d</code> from address <code>a</code>.</p><p>If the address <code>a</code> is not mapped, then a pagefault trap is signaled. If the <code>pagefault_hanlder</code> is provided, then it is invoked and the load operation repeats. Note, the handler either shall not return or ensure that the second attempt would be successful. If no handler is linked, then the segmentation fault machine exception is raised.</p></dd></dl><dl><dt class="spec value" id="val-store"><a href="#val-store" class="anchor"></a><code><span class="keyword">val</span> store : <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="../../../../../../bap/Bap/Std/index.html#type-endian">Bap.Std.endian</a> <span>&#45;&gt;</span> <a href="../../../../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a> <span>&#45;&gt;</span> <span>unit <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>store a x d s</code> computes a store operation, that stores at the address <code>a</code> the word <code>x</code> of size <code>s</code>, using an ordering specified by the endianness <code>d</code>.</p><p>If <code>a</code> is not mapped or not writable then the pagefault trap is invoked. If the handler is provided, then it is invoked and the operation is repeated. Otherwise the <code>Segmentation_fault</code> machine exception is raised.</p></dd></dl><dl><dt class="spec value" id="val-branch"><a href="#val-branch" class="anchor"></a><code><span class="keyword">val</span> branch : <a href="../../index.html#type-value">value</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-m">m</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-m">m</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>branch cnd yes no</code> if <code>cnd</code> evaluates to <code>zero</code> then <code>yes</code> else <code>no</code>.</p></dd></dl><dl><dt class="spec value" id="val-repeat"><a href="#val-repeat" class="anchor"></a><code><span class="keyword">val</span> repeat : <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-m">m</a></span> <span>&#45;&gt;</span> <span><a href="../../index.html#type-value">value</a> <a href="index.html#type-m">m</a></span></code></dt><dd><p><code>repeat cnd body</code> evaluates <code>body</code> until <code>cnd</code> evaluates to <code>zero</code>. Returns the value of <code>cnd</code>.</p></dd></dl></div></body></html>