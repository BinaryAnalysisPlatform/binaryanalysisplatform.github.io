<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Spec (bap-primus.Bap_primus.Std.Primus.Lisp.Type.Spec)</title><link rel="stylesheet" href="../../../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../../../index.html">bap-primus</a> &#x00BB; <a href="../../../../../index.html">Bap_primus</a> &#x00BB; <a href="../../../../index.html">Std</a> &#x00BB; <a href="../../../index.html">Primus</a> &#x00BB; <a href="../../index.html">Lisp</a> &#x00BB; <a href="../index.html">Type</a> &#x00BB; Spec</nav><h1>Module <code>Type.Spec</code></h1><p>Type Specifier DSL.</p><p>A language to build type signatures for Primus Lisp primitives.</p><p>The signature specifier consists of two parts: the parameter list specifier, and the return value type specifier. They are separated with the <code>@-&gt;</code> operator:</p><pre><code class="ml">params @-&gt; return</code></pre><p>The list of parameters can be specified as a tuple, a variable number of arguments of the same type, or a tuple followed by a variable number of arguments of the same type. Special shortcuts for 1-tuple and 0-tuple are provided.</p><p>The return value type could be <code>any</code>, <code>bool</code>, <code>byte</code>, <code>word n</code>, <code>sym</code>, <code>int</code>, or a type variable bound in the parameters list.</p><p>Examples:</p><pre><code class="ml">one int @-&gt; byte;
tuple [int; byte] @-&gt; int;
all a @-&gt; bool;
tuple [sym; int] // all byte @-&gt; bool;</code></pre></header><dl><dt class="spec value" id="val-any"><a href="#val-any" class="anchor"></a><code><span class="keyword">val</span> any : <a href="../index.html#type-t">t</a></code></dt><dd><p><code>any</code> top type which is inhabitated by all Primus values</p></dd></dl><dl><dt class="spec value" id="val-var"><a href="#val-var" class="anchor"></a><code><span class="keyword">val</span> var : string <span>&#45;&gt;</span> <a href="../index.html#type-t">t</a></code></dt><dd><p><code>var x</code> type variable <code>x</code>. All variables with the same name in the scope of a definition are unified.</p></dd></dl><dl><dt class="spec value" id="val-sym"><a href="#val-sym" class="anchor"></a><code><span class="keyword">val</span> sym : <a href="../index.html#type-t">t</a></code></dt><dd><p><code>sym</code> symbol type.</p></dd></dl><dl><dt class="spec value" id="val-int"><a href="#val-int" class="anchor"></a><code><span class="keyword">val</span> int : <a href="../index.html#type-t">t</a></code></dt><dd><p>a machine integer - a word that has the same width as <code>Arch.addr_size</code></p></dd></dl><dl><dt class="spec value" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span class="keyword">val</span> bool : <a href="../index.html#type-t">t</a></code></dt><dd><p><code>bool</code> a one bit word</p></dd></dl><dl><dt class="spec value" id="val-byte"><a href="#val-byte" class="anchor"></a><code><span class="keyword">val</span> byte : <a href="../index.html#type-t">t</a></code></dt><dd><p><code>byte</code> an eight bit word</p></dd></dl><dl><dt class="spec value" id="val-word"><a href="#val-word" class="anchor"></a><code><span class="keyword">val</span> word : int <span>&#45;&gt;</span> <a href="../index.html#type-t">t</a></code></dt><dd><p><code>word n</code> an <code>n</code> bit word</p></dd></dl><dl><dt class="spec value" id="val-a"><a href="#val-a" class="anchor"></a><code><span class="keyword">val</span> a : <a href="../index.html#type-t">t</a></code></dt><dd><p><code>a</code> shortcut for <code>var &quot;a&quot;</code></p></dd></dl><dl><dt class="spec value" id="val-b"><a href="#val-b" class="anchor"></a><code><span class="keyword">val</span> b : <a href="../index.html#type-t">t</a></code></dt><dd><p><code>b</code> shortcut for <code>var &quot;b&quot;</code></p></dd></dl><dl><dt class="spec value" id="val-c"><a href="#val-c" class="anchor"></a><code><span class="keyword">val</span> c : <a href="../index.html#type-t">t</a></code></dt><dd><p><code>c</code> shortcut for <code>var &quot;c&quot;</code></p></dd></dl><dl><dt class="spec value" id="val-d"><a href="#val-d" class="anchor"></a><code><span class="keyword">val</span> d : <a href="../index.html#type-t">t</a></code></dt><dd><p><code>d</code> shortcut for <code>var &quot;d&quot;</code></p></dd></dl><dl><dt class="spec value" id="val-tuple"><a href="#val-tuple" class="anchor"></a><code><span class="keyword">val</span> tuple : <span><a href="../index.html#type-t">t</a> list</span> <span>&#45;&gt;</span> <span>[ <span>`Tuple of <span><a href="../index.html#type-t">t</a> list</span></span> ]</span></code></dt><dd><p><code>tuple [args]</code> specifies that a function accepts a tuple of arguments of specified types.</p></dd></dl><dl><dt class="spec value" id="val-all"><a href="#val-all" class="anchor"></a><code><span class="keyword">val</span> all : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <span>[ <span>`All of <a href="../index.html#type-t">t</a></span> ]</span></code></dt><dd><p><code>all t</code> specifies that a function accepts a variable number of arguments all having type <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-one"><a href="#val-one" class="anchor"></a><code><span class="keyword">val</span> one : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <span>[ <span>`Tuple of <span><a href="../index.html#type-t">t</a> list</span></span> ]</span></code></dt><dd><p><code>one t</code> specifies that a function accepts one argument of type <code>t</code></p></dd></dl><dl><dt class="spec value" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span class="keyword">val</span> unit : <span>[ <span>`Tuple of <span><a href="../index.html#type-t">t</a> list</span></span> ]</span></code></dt><dd><p><code>unit</code> specifies that a function doesn't have any parameters</p></dd></dl><dl><dt class="spec value" id="val-(//)"><a href="#val-(//)" class="anchor"></a><code><span class="keyword">val</span> (//) : <span>[ <span>`Tuple of <span><a href="../index.html#type-t">t</a> list</span></span> ]</span> <span>&#45;&gt;</span> <span>[ <span>`All of <a href="../index.html#type-t">t</a></span> ]</span> <span>&#45;&gt;</span> <a href="../index.html#type-parameters">parameters</a></code></dt><dd><p><code>params // rest</code> specifies that a function is variadic, but have some number of mandatory arguments, i.e., it accepts a tuple of parameters specified by the <code>params</code> type specifier and a variadic list of arguments specified by the <code>rest</code> type specifier.</p></dd></dl><dl><dt class="spec value" id="val-(@-&gt;)"><a href="#val-(@-&gt;)" class="anchor"></a><code><span class="keyword">val</span> (@-&gt;) : <span>[&lt; <a href="../index.html#type-parameters">parameters</a> ]</span> <span>&#45;&gt;</span> <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-signature">signature</a></code></dt><dd><p><code>params @-&gt; t</code> constructs a signature from the parameter list specifier <code>params</code> and the return type specifier <code>t</code></p></dd></dl></div></body></html>