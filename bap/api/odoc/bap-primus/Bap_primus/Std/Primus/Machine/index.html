<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Machine (bap-primus.Bap_primus.Std.Primus.Machine)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">bap-primus</a> &#x00BB; <a href="../../../index.html">Bap_primus</a> &#x00BB; <a href="../../index.html">Std</a> &#x00BB; <a href="../index.html">Primus</a> &#x00BB; Machine</nav><h1>Module <code>Primus.Machine</code></h1><p>Primus Machine.</p><p>The Machine is the core of Primus Framework. The Machine behavior is extended/changed with Machine components.</p><p>The user analysis is usually written in a form of a component, and is registered with the <a href="../Components/index.html#val-register"><code>Primus.Components.register</code></a> function.</p></header><dl><dt class="spec type" id="type-id"><a href="#type-id" class="anchor"></a><code><span class="keyword">type</span> id</code><code> = <a href="../../../../../monads/Monads/Std/Monad/State/Multi/index.html#type-id">Monads.Std.Monad.State.Multi.id</a></code></dt><dd><p>Machine identifier type.</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <span>unit <a href="../index.html#type-observation">observation</a></span></code></dt><dd><p>A synonym to <code>System.init</code></p></dd></dl><dl><dt class="spec value" id="val-finished"><a href="#val-finished" class="anchor"></a><code><span class="keyword">val</span> finished : <span>unit <a href="../index.html#type-observation">observation</a></span></code></dt><dd><p>A synonym to <code>System.fini</code></p></dd></dl><dl><dt class="spec value" id="val-fork"><a href="#val-fork" class="anchor"></a><code><span class="keyword">val</span> fork : <span><span>(<a href="index.html#type-id">id</a> * <a href="index.html#type-id">id</a>)</span> <a href="../index.html#type-observation">observation</a></span></code></dt><dd><p><code>fork (parent,child)</code> occurs when the machine <code>parent</code> forks a new clone <code>child</code>. The computation continues in the <code>child</code> machine.</p><dl><dt>since</dt><dd>2.2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-switch"><a href="#val-switch" class="anchor"></a><code><span class="keyword">val</span> switch : <span><span>(<a href="index.html#type-id">id</a> * <a href="index.html#type-id">id</a>)</span> <a href="../index.html#type-observation">observation</a></span></code></dt><dd><p><code>switch (was,now)</code> occurs when computation switches from the machine <code>was</code> to the machine <code>now</code>.</p><dl><dt>since</dt><dd>2.2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-exn_raised"><a href="#val-exn_raised" class="anchor"></a><code><span class="keyword">val</span> exn_raised : <span><a href="../index.html#type-exn">exn</a> <a href="../index.html#type-observation">observation</a></span></code></dt><dd><p><code>exn_raised exn</code> occurs every time an abnormal control flow is initiated</p></dd></dl><dl><dt class="spec value" id="val-kill"><a href="#val-kill" class="anchor"></a><code><span class="keyword">val</span> kill : <span><a href="index.html#type-id">id</a> <a href="../index.html#type-observation">observation</a></span></code></dt><dd><p><code>kill id</code> occurs when the machine <code>id</code> is killed.</p><p>When this observation is made the machine enters the restricted mode with non-determinism and observations disabled.</p></dd></dl><dl><dt class="spec module" id="module-State"><a href="#module-State" class="anchor"></a><code><span class="keyword">module</span> <a href="State/index.html">State</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Machine State.</p></dd></dl><dl><dt class="spec type" id="type-state"><a href="#type-state" class="anchor"></a><code><span class="keyword">type</span> <span>'a state</span></code><code> = <span><span class="type-var">'a</span> <a href="State/index.html#type-t">State.t</a></span></code></dt></dl><dl><dt class="spec module-type" id="module-type-State"><a href="#module-type-State" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-State/index.html">State</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>An interface to the state.</p></dd></dl><dl><dt class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The Machine interface.</p></dd></dl><dl><dt class="spec module-type" id="module-type-Component"><a href="#module-type-Component" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Component/index.html">Component</a> = <span class="keyword">functor</span> (<a href="module-type-Component/argument-1-Machine/index.html">Machine</a> : <a href="index.html#module-type-S">S</a>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A generic machine component.</p></dd></dl><dl><dt class="spec type" id="type-component"><a href="#type-component" class="anchor"></a><code><span class="keyword">type</span> component</code><code> = <span>(<span class="keyword">module</span> <a href="module-type-Component/index.html">Component</a>)</span></code></dt><dd><p>The Machine component.</p></dd></dl><dl><dt class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-M/index.html">M</a> : <a href="../../../../../monads/Monads/Std/Monad/index.html#module-type-S">Monads.Std.Monad.S</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="Make/index.html#type-m">m</a></span> := <span><span class="type-var">'a</span> <a href="Make/argument-1-M/index.html#type-t">M.t</a></span></code></dt><dd><p><code>Make(Monad)</code> a monad transformer that wraps the Machine into an arbitrary <code>Monad</code>.</p></dd></dl><dl><dt class="spec module" id="module-Main"><a href="#module-Main" class="anchor"></a><code><span class="keyword">module</span> <a href="Main/index.html">Main</a> : <span class="keyword">functor</span> (<a href="Main/argument-1-M/index.html">M</a> : <a href="index.html#module-type-S">S</a>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The Legacy Main System.</p></dd></dl><dl><dt class="spec value" id="val-add_component"><a href="#val-add_component" class="anchor"></a><code><span class="keyword">val</span> add_component : <a href="index.html#type-component">component</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>add_component comp</code> registers the machine component <code>comp</code> in the Primus Framework. The component's <code>init</code> function will be run every time the Machine compuation is run. After all components are initialized, the <code>init</code> observation is made.</p><p>The components shall not access the interpreter in their <code>init</code> function. Instead, they should subscribe to observations and/or initialize the machine state via Linker/Memory/Env components.</p><p>See also a more general <code>register_component</code> function.</p></dd></dl></div></body></html>