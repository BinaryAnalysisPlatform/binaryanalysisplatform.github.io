<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Domain (bap-knowledge.Bap_knowledge.Knowledge.Domain)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">bap-knowledge</a> &#x00BB; <a href="../../index.html">Bap_knowledge</a> &#x00BB; <a href="../index.html">Knowledge</a> &#x00BB; Domain</nav><h1>Module <code>Knowledge.Domain</code></h1><p>Partially ordered sets with the least element.</p><p>The Domain is fundamental structure for the Knowledge representation as domains are used to represent property values. Basically, all information is represented with domains. Domains capture the idea of partial information or an approximation of information.</p><p>A domain is a set equipped with the partial order, which orders elements of this set by their information content, and the least element <code>empty</code> or <code>bot</code>, which is not greater than any other element of this set. The <code>empty</code> element indicates an absence of knowledge.</p><p>The resulting structure is not strictly a domain, the only missing element is the maximal element. The role of the is taken by values of type conflict, which denote the <code>top</code> element equipped with the diagnostic information. Therefore, type <code>('a,conflict) result</code> is a directed-complete partial order, or a Scott-Ershov domain, or just a domain..</p><p>The domain structure is very general and the <code>join</code> operator is induced by the specified <code>order</code>. However, it is possible to upgrade the structure, used to represent a property, to lattice or lattice-like structure, by providing a custom <code>join</code> function.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code><code> = <span><span class="type-var">'a</span> <a href="../index.html#type-domain">domain</a></span></code></dt></dl><dl><dt class="spec value" id="val-define"><a href="#val-define" class="anchor"></a><code><span class="keyword">val</span> define : <span>?&#8288;inspect:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;join:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <a href="../index.html#type-conflict">conflict</a>)</span> <a href="../../../../core_kernel/Core_kernel/index.html#type-result">Core_kernel.result</a></span>)</span></span> <span>&#45;&gt;</span> <span>empty:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>order:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Order/index.html#type-partial">Order.partial</a>)</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>define ~inspect ~empty ~order name</code> defines a domain for the type <code>'a</code>.</p><p>The <code>empty</code> value denotes the representation of an absence of information, or an undefined value, or the default value, or the least possible value in the chain, etc. It's only required that for all possible values <code>x</code>, <code>empty &lt;= x</code>, where <code>&lt;=</code> is the partial order defined by the <code>order</code> parameter</p><p>The <code>order</code> function defines the partial order for the given domain, such that</p><ul><li><code>partial x y = LT</code> iff <code>x&lt;=y &amp;&amp; not(y &lt;= x)</code></li><li><code>partial x y = EQ</code> iff <code>x &lt;= y &amp;&amp; y &lt;= x</code></li><li><code>partial x y = GT</code> iff <code>not (x &lt;= y) &amp;&amp; (y &lt;= x)</code></li><li><code>partial x y = NC</code> iff <code>not (x &lt;= y) &amp;&amp; not (y &lt;= x)</code>.</li></ul><p>The optional <code>inspect</code> function enables introspection, and may return any representation of the domain value.</p><p>The returned value is an instance of the domain type class that is used for declaration of a property. The instance is not nominal and is purely structural, the <code>name</code> argument is used only for introspection and better error messages.</p></dd></dl><dl><dt class="spec value" id="val-total"><a href="#val-total" class="anchor"></a><code><span class="keyword">val</span> total : <span>?&#8288;inspect:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;join:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <a href="../index.html#type-conflict">conflict</a>)</span> <a href="../../../../core_kernel/Core_kernel/index.html#type-result">Core_kernel.result</a></span>)</span></span> <span>&#45;&gt;</span> <span>empty:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>order:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> int)</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>total empty order name</code> defines a domain from the total <code>order</code>.</p><p>Defines an ordinal domain, where the partial order is inferred from the total order, so that <code>a &lt;= b iff a &lt; b</code>.</p><p>The Hasse diagram of the ordinal domain:</p><pre>             o xN
             |
             :
             |
             o x2
             |
             o x1
             |
             o bot</pre></dd></dl><dl><dt class="spec value" id="val-flat"><a href="#val-flat" class="anchor"></a><code><span class="keyword">val</span> flat : <span>?&#8288;inspect:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;join:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <a href="../index.html#type-conflict">conflict</a>)</span> <a href="../../../../core_kernel/Core_kernel/index.html#type-result">Core_kernel.result</a></span>)</span></span> <span>&#45;&gt;</span> <span>empty:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>equal:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>flat empty equal name</code> defines a flat domain.</p><p>A flat domain has one element that is less than all other elements except itself and any other two elements that are not empty are non-comparable.</p><p>The Hasse diagram of the flat domain:</p><pre>             x1 x2  ... xN
             o  o       o
             |  |       |
             +--+-+...--+
                  |
                  o
                 bot</pre></dd></dl><dl><dt class="spec value" id="val-optional"><a href="#val-optional" class="anchor"></a><code><span class="keyword">val</span> optional : <span>?&#8288;inspect:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;join:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <a href="../index.html#type-conflict">conflict</a>)</span> <a href="../../../../core_kernel/Core_kernel/index.html#type-result">Core_kernel.result</a></span>)</span></span> <span>&#45;&gt;</span> <span>equal:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>optional ~equal name</code> a flat domain with <code>None</code> as bot.</p><p>Wrapping any data type into the option data type yields a flat domain. For example,</p><pre><code class="ml">let tribool = optional ~equal:bool_equal &quot;tribool&quot;</code></pre><p>is a tribool domain, where the property value could be either unknown (<code>None</code>), true (<code>Some true</code>), or false (<code>Some false</code>.</p></dd></dl><dl><dt class="spec value" id="val-mapping"><a href="#val-mapping" class="anchor"></a><code><span class="keyword">val</span> mapping : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="../../../../core_kernel/Core_kernel/Map/index.html#type-comparator">Core_kernel.Map.comparator</a></span> <span>&#45;&gt;</span> <span>?&#8288;inspect:<span>(<span class="type-var">'d</span> <span>&#45;&gt;</span> <a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a>)</span></span> <span>&#45;&gt;</span> <span>equal:<span>(<span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'d</span>, <span class="type-var">'e</span>)</span> <a href="../../../../core_kernel/Core_kernel/Map/index.html#type-t">Core_kernel.Map.t</a></span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>mapping total_order data_equal name</code> a point-wise mapping domain.</p><p>Finite mapping naturally form domains, if every key in the mapping is considered an independent kind of information, and an absence of a key indicates the absence of that kind of information.</p><p>The upper bound of two mapping is the point-wise union of them, unless there is a key, which is present in both mapping with different values (compared with <code>data_equal</code>). In the latter case, the upper bound is the <code>conflict</code>.</p><p>The partial order between <code>x</code> and <code>y</code> is defined as follows:</p><ul><li><code>EQ</code> iff mappings are structurally equal;</li><li><code>LT</code> iff <code>y</code> contains all bindings of <code>x</code> and <code>x &lt;&gt; y</code>;</li><li><code>GT</code> iff <code>x</code> contains all bindings of <code>y</code> and <code>x &lt;&gt; y</code>;</li><li><code>NC</code> iff neither of the above rules applicable.</li></ul></dd></dl><dl><dt class="spec value" id="val-powerset"><a href="#val-powerset" class="anchor"></a><code><span class="keyword">val</span> powerset : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="../../../../core_kernel/Core_kernel/Set/index.html#type-comparator">Core_kernel.Set.comparator</a></span> <span>&#45;&gt;</span> <span>?&#8288;inspect:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a>)</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <a href="../../../../core_kernel/Core_kernel/Set/index.html#type-t">Core_kernel.Set.t</a></span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>powerset total name</code> defines a set of all subsets domain.</p><p>Sets ordered by inclusion is a natural domain. The join operator is the set union, and the order operator is the <code>is_subset</code> function.</p></dd></dl><dl><dt class="spec value" id="val-opinions"><a href="#val-opinions" class="anchor"></a><code><span class="keyword">val</span> opinions : <span>?&#8288;inspect:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a>)</span></span> <span>&#45;&gt;</span> <span>empty:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> <span>equal:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-opinions">opinions</a></span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>opinions empty equal name</code> defines an opinionated domain.</p><p>In the opinionated domain, the order of elements is defined by the total reliability of agents that support this information. The more trustworthy the agent and the more agents support data, the higher the data will be in the chain.</p><p>See corresponding <code>suggest</code>, <code>propose</code>, and <code>resolve</code> operators.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : <span>string <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>string</code> is flat domain with an empty string at the bottom.</p></dd></dl><dl><dt class="spec value" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span class="keyword">val</span> bool : <span><span>bool option</span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>bool</code> is the tribool domain.</p></dd></dl><dl><dt class="spec value" id="val-obj"><a href="#val-obj" class="anchor"></a><code><span class="keyword">val</span> obj : <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../index.html#type-cls">cls</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-obj">obj</a></span> <a href="../index.html#type-domain">domain</a></span></code></dt><dd><p><code>obj</code> is a flat domain with a nil object at the bottom.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>empty domain</code> is the bottom of the <code>domain</code>.</p></dd></dl><dl><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val</span> is_empty : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_empty domain x</code> is <code>true</code> if <code>x</code> is <code>empty domain</code>.</p></dd></dl><dl><dt class="spec value" id="val-order"><a href="#val-order" class="anchor"></a><code><span class="keyword">val</span> order : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../Order/index.html#type-partial">Order.partial</a></code></dt><dd><p><code>order domain x y</code> orders <code>x</code> and <code>y</code> according to the <code>domain</code> order.</p></dd></dl><dl><dt class="spec value" id="val-join"><a href="#val-join" class="anchor"></a><code><span class="keyword">val</span> join : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <a href="../index.html#type-conflict">conflict</a>)</span> <a href="../../../../core_kernel/Core_kernel/index.html#type-result">Core_kernel.result</a></span></code></dt><dd><p><code>join domain x y</code> is the upper bound of <code>x</code> and <code>y</code>.</p></dd></dl><dl><dt class="spec value" id="val-inspect"><a href="#val-inspect" class="anchor"></a><code><span class="keyword">val</span> inspect : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a></code></dt><dd><p><code>inspect domain x</code> introspects <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val</span> name : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> string</code></dt><dd><p><code>name domain</code> is the domain name.</p></dd></dl></div></body></html>