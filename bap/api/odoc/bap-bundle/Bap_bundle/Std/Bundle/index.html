<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bundle (bap-bundle.Bap_bundle.Std.Bundle)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">bap-bundle</a> &#x00BB; <a href="../../index.html">Bap_bundle</a> &#x00BB; <a href="../index.html">Std</a> &#x00BB; Bundle</nav><h1>Module <code>Std.Bundle</code></h1><p>Program Bundle.</p><p>Bundle is a collection of data associated with a program. To access the bundle, use the <a href="../index.html#val-main_bundle"><code>main_bundle</code></a> function, e.g.,</p><pre><code class="ml">open Bap_bundle.Std

let bundle = main_bundle ()</code></pre></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = <a href="../index.html#type-bundle">bundle</a></code></dt></dl><dl><dt class="spec value" id="val-of_uri"><a href="#val-of_uri" class="anchor"></a><code><span class="keyword">val</span> of_uri : <a href="../../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>creates new bundle or opens existing</p></dd></dl><dl><dt class="spec value" id="val-manifest"><a href="#val-manifest" class="anchor"></a><code><span class="keyword">val</span> manifest : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-manifest">manifest</a></code></dt><dd><p><code>manifest bundle</code> extracts program manifest from the <code>bundle</code></p></dd></dl><dl><dt class="spec value" id="val-get_file"><a href="#val-get_file" class="anchor"></a><code><span class="keyword">val</span> get_file : <span>?&#8288;name:string</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> <span><a href="../../../../uri/Uri/index.html#type-t">Uri.t</a> option</span></code></dt><dd><p><code>get_file ?name bundle uri</code> extracts a file.</p><p>Extracts a file specified by a <code>uri</code> from a <code>bundle</code> and returns a uri pointing to the extracted file, if was found. The optional parameter <code>name</code> allows to specify the desired filename for the extraction.</p></dd></dl><dl><dt class="spec value" id="val-get_data"><a href="#val-get_data" class="anchor"></a><code><span class="keyword">val</span> get_data : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p><code>get_data bundle path</code> extracts data specified by a <code>path</code> as a string.</p></dd></dl><dl><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string list</span></code></dt><dd><p><code>list bundle</code> returns a list of paths, that are accessible in the <code>bundle</code>.</p></dd></dl><dl><dt class="spec value" id="val-update_manifest"><a href="#val-update_manifest" class="anchor"></a><code><span class="keyword">val</span> update_manifest : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>f:<span>(<a href="../index.html#type-manifest">manifest</a> <span>&#45;&gt;</span> <a href="../index.html#type-manifest">manifest</a>)</span></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>update_manifest bundle ~f</code> update program manifest with function <code>f</code>.</p></dd></dl><dl><dt class="spec value" id="val-insert_files"><a href="#val-insert_files" class="anchor"></a><code><span class="keyword">val</span> insert_files : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<span>string option</span> * <a href="../../../../uri/Uri/index.html#type-t">Uri.t</a>)</span> list</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>insert_files bundle spec</code> bundle files.</p><p>The <code>spec</code> is a list of pairs, where the first constituent of a pair is a desired path of the file in the bundle, and the second constituent is the uri of the file, that should be inserted. If the first element of the pair is <code>None</code>, then the file will be inserted under the same path, as it was in the file system.</p></dd></dl><dl><dt class="spec value" id="val-insert_file"><a href="#val-insert_file" class="anchor"></a><code><span class="keyword">val</span> insert_file : <span>?&#8288;name:string</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>insert_file ?name bundle uri</code> insert a file specified by the <code>uri</code>. If <code>name</code> is specified, then the file will be stored under the specified <code>name</code> in the bundle.</p></dd></dl><dl><dt class="spec value" id="val-insert_data"><a href="#val-insert_data" class="anchor"></a><code><span class="keyword">val</span> insert_data : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>name:string</span> <span>&#45;&gt;</span> <span>data:string</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>insert_data bundle ~name ~data</code> insert <code>data</code> at path <code>name</code>.</p></dd></dl><dl><dt class="spec value" id="val-update"><a href="#val-update" class="anchor"></a><code><span class="keyword">val</span> update : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>f:<span>(string <span>&#45;&gt;</span> <span>[ `Drop <span>| `Copy</span> <span><span>| `Proc</span> of string <span>&#45;&gt;</span> unit</span> <span><span>| `Map</span> of string <span>&#45;&gt;</span> string</span> ]</span>)</span></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>update bundle ~f:action</code> add, remove or update data in the bundle.</p><p>This is a swiss-knife function, that can do arbitrary bundle modification. See <a href="index.html#val-get_file"><code>get_file</code></a>, <a href="index.html#val-get_data"><code>get_data</code></a>, <a href="index.html#val-insert_files"><code>insert_files</code></a>, <a href="index.html#val-insert_file"><code>insert_file</code></a> and <a href="index.html#val-insert_data"><code>insert_data</code></a> for an easier to use interface.</p><p>The <code>action</code> function is called on each path, and must return one of the following:</p><ul><li><code>`Drop</code> - to remove the path from the bundle;</li><li><code>`Copy</code> - to keep it untouched;</li><li><code>`Proc f</code> - extract it, process the file with a function <code>f</code>, and put back, where function <code>f</code> accepts a temporary name of extracted file;</li><li><code>`Map f</code> - map the contents of the file with function <code>f</code>.</li></ul><p>Warning. Modification of a bundle, associated with an installed plugin or application will lead to an undefined behavior. The function is intended for building a new bundle. Once it is created it may be sealed and made readonly.</p></dd></dl><dl><dt class="spec module" id="module-Builder"><a href="#module-Builder" class="anchor"></a><code><span class="keyword">module</span> <a href="Builder/index.html">Builder</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Incremental bundle builder.</p></dd></dl></div></body></html>