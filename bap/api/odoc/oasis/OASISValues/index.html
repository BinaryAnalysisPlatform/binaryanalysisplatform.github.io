<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OASISValues (oasis.OASISValues)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">oasis</a> &#x00BB; OASISValues</nav><h1>Module <code>OASISValues</code></h1><p>Parse, print and check values</p><p>This module allows to parse values that should match a particular content (URL, list).</p><p>The whole module is <b>not exported</b>.</p><dl><dt>author</dt><dd>Sylvain Le Gall</dd></dl><nav class="toc"><ul><li><a href="#types-and-exception">Types and exception</a></li><li><a href="#basic-values-and-combinators">Basic values and combinators</a></li><li><a href="#standard-values">Standard values</a></li></ul></nav></header><section><header><h3 id="types-and-exception"><a href="#types-and-exception" class="anchor"></a>Types and exception</h3></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.parse" class="anchored"><td class="def field"><a href="#type-t.parse" class="anchor"></a><code>parse : ctxt:<a href="../OASISContext/index.html#type-t">OASISContext.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td><td class="doc"><p>Parse a string into value</p></td></tr><tr id="type-t.update" class="anchored"><td class="def field"><a href="#type-t.update" class="anchor"></a><code>update : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td><td class="doc"><p>Merge two values into one</p></td></tr><tr id="type-t.print" class="anchored"><td class="def field"><a href="#type-t.print" class="anchor"></a><code>print : <span class="type-var">'a</span> <span>&#45;&gt;</span> string;</code></td><td class="doc"><p>Convert a value to string</p></td></tr></table><code>}</code></dt><dd><p>Definition of a value.</p></dd></dl><dl><dt class="spec exception" id="exception-Not_printable"><a href="#exception-Not_printable" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Not_printable</span></code></dt><dd><p>The value exist but there is no easy way to represent it.</p></dd></dl><dl><dt class="spec exception" id="exception-Not_combinable"><a href="#exception-Not_combinable" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Not_combinable</span></code></dt><dd><p>It is not possible to combine values.</p></dd></dl><dl><dt class="spec value" id="val-update_fail"><a href="#val-update_fail" class="anchor"></a><code><span class="keyword">val</span> update_fail : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dd><p>Always raise <a href="index.html#exception-Not_combinable"><code>Not_combinable</code></a>.</p></dd></dl></section><section><header><h3 id="basic-values-and-combinators"><a href="#basic-values-and-combinators" class="anchor"></a>Basic values and combinators</h3></header><dl><dt class="spec value" id="val-blackbox"><a href="#val-blackbox" class="anchor"></a><code><span class="keyword">val</span> blackbox : <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Hidden value to build phantom data storage, cannot set/get it using string.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : string <a href="index.html#type-t">t</a></code></dt><dd><p>String value.</p></dd></dl><dl><dt class="spec value" id="val-string_not_empty"><a href="#val-string_not_empty" class="anchor"></a><code><span class="keyword">val</span> string_not_empty : string <a href="index.html#type-t">t</a></code></dt><dd><p>String value, must not be &quot;&quot;.</p></dd></dl><dl><dt class="spec value" id="val-boolean"><a href="#val-boolean" class="anchor"></a><code><span class="keyword">val</span> boolean : bool <a href="index.html#type-t">t</a></code></dt><dd><p>Boolean value, use <code>bool_of_string</code> to parse.</p></dd></dl><dl><dt class="spec value" id="val-expandable"><a href="#val-expandable" class="anchor"></a><code><span class="keyword">val</span> expandable : string <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <a href="index.html#type-t">t</a></code></dt><dd><p>Extra check to see if the string value, can be expanded using <code>Buffer.add_substitute</code> rules.</p></dd></dl><dl><dt class="spec value" id="val-dot_separated"><a href="#val-dot_separated" class="anchor"></a><code><span class="keyword">val</span> dot_separated : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list <a href="index.html#type-t">t</a></code></dt><dd><p><code>dot_separated v</code> When parsing split the input string using '.' separator and apply <code>v.parse</code>. Merge by concatenate two values, and print by joining <code>v.print</code> generated strings using a '.' separator. Don't strip whitespaces.</p></dd></dl><dl><dt class="spec value" id="val-comma_separated"><a href="#val-comma_separated" class="anchor"></a><code><span class="keyword">val</span> comma_separated : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <a href="index.html#val-dot_separated"><code>dot_separated</code></a> using ',' as separator. Strip whitespaces before and after the input string.</p></dd></dl><dl><dt class="spec value" id="val-newline_separated"><a href="#val-newline_separated" class="anchor"></a><code><span class="keyword">val</span> newline_separated : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list <a href="index.html#type-t">t</a></code></dt><dd><p>Same <a href="index.html#val-dot_separated"><code>dot_separated</code></a> using '\n' as separator. Strip whitespaces before and after the input string.</p></dd></dl><dl><dt class="spec value" id="val-space_separated"><a href="#val-space_separated" class="anchor"></a><code><span class="keyword">val</span> space_separated : string list <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <a href="index.html#val-dot_separated"><code>dot_separated</code></a> using blanks as separator.</p></dd></dl><dl><dt class="spec value" id="val-with_optional_parentheses"><a href="#val-with_optional_parentheses" class="anchor"></a><code><span class="keyword">val</span> with_optional_parentheses : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span> option) <a href="index.html#type-t">t</a></code></dt><dd><p><code>with_optional_parentheses v_main v_opt</code> Combine two values. The input string <code>&quot;abcd (defg)&quot;</code> is split between the part not between parentheses and the one between. <code>v_main</code> is applied to the first one and <code>v_opt</code> to the latter. If no parentheses is found, only apply <code>v_main</code>.</p></dd></dl><dl><dt class="spec value" id="val-opt"><a href="#val-opt" class="anchor"></a><code><span class="keyword">val</span> opt : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-t">t</a></code></dt><dd><p>Optional value.</p></dd></dl><dl><dt class="spec value" id="val-choices"><a href="#val-choices" class="anchor"></a><code><span class="keyword">val</span> choices : (unit <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> (string * <span class="type-var">'a</span>) list <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>choices nm lst</code> Value that must be in a list of predefined choices. Find the right association in <code>lst</code>, comparison is case insensitive. If something failed output a message using <code>nm</code> as the name of the value represented.</p></dd></dl></section><section><header><h3 id="standard-values"><a href="#standard-values" class="anchor"></a>Standard values</h3></header><dl><dt class="spec value" id="val-url"><a href="#val-url" class="anchor"></a><code><span class="keyword">val</span> url : string <a href="index.html#type-t">t</a></code></dt><dd><p>URL value.</p></dd></dl><dl><dt class="spec value" id="val-copyright"><a href="#val-copyright" class="anchor"></a><code><span class="keyword">val</span> copyright : string <a href="index.html#type-t">t</a></code></dt><dd><p>Copyright value.</p></dd></dl><dl><dt class="spec value" id="val-file"><a href="#val-file" class="anchor"></a><code><span class="keyword">val</span> file : string <a href="index.html#type-t">t</a></code></dt><dd><p>File value.</p></dd></dl><dl><dt class="spec value" id="val-files"><a href="#val-files" class="anchor"></a><code><span class="keyword">val</span> files : string list <a href="index.html#type-t">t</a></code></dt><dd><p>File list value.</p></dd></dl><dl><dt class="spec value" id="val-file_glob"><a href="#val-file_glob" class="anchor"></a><code><span class="keyword">val</span> file_glob : string <a href="index.html#type-t">t</a></code></dt><dd><p>File with glob value.</p></dd></dl><dl><dt class="spec value" id="val-directory"><a href="#val-directory" class="anchor"></a><code><span class="keyword">val</span> directory : string <a href="index.html#type-t">t</a></code></dt><dd><p>Directory value.</p></dd></dl><dl><dt class="spec value" id="val-modules"><a href="#val-modules" class="anchor"></a><code><span class="keyword">val</span> modules : string list <a href="index.html#type-t">t</a></code></dt><dd><p>Module list value.</p></dd></dl><dl><dt class="spec value" id="val-categories"><a href="#val-categories" class="anchor"></a><code><span class="keyword">val</span> categories : string list <a href="index.html#type-t">t</a></code></dt><dd><p>Category list value.</p></dd></dl><dl><dt class="spec value" id="val-findlib_name"><a href="#val-findlib_name" class="anchor"></a><code><span class="keyword">val</span> findlib_name : string <a href="index.html#type-t">t</a></code></dt><dd><p>Findlib package name value, without its path.</p></dd></dl><dl><dt class="spec value" id="val-findlib_full"><a href="#val-findlib_full" class="anchor"></a><code><span class="keyword">val</span> findlib_full : string <a href="index.html#type-t">t</a></code></dt><dd><p>Findlib package name with path value, e.g. oasis.base.</p></dd></dl><dl><dt class="spec value" id="val-internal_library"><a href="#val-internal_library" class="anchor"></a><code><span class="keyword">val</span> internal_library : string <a href="index.html#type-t">t</a></code></dt><dd><p>Internal library.</p></dd></dl><dl><dt class="spec value" id="val-command_line"><a href="#val-command_line" class="anchor"></a><code><span class="keyword">val</span> command_line : (string * string list) <a href="index.html#type-t">t</a></code></dt><dd><p>Command line.</p></dd></dl><dl><dt class="spec value" id="val-command_line_options"><a href="#val-command_line_options" class="anchor"></a><code><span class="keyword">val</span> command_line_options : string list <a href="index.html#type-t">t</a></code></dt><dd><p>Arguments of command line programs. See <span class="xref-unresolved" title="unresolved reference to &quot;OASISUtils.POSIX.split&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;OASISUtils.POSIX&quot;"><a href="../OASISUtils/index.html"><code>OASISUtils</code></a>.POSIX</span>.split</span> for more information.</p></dd></dl></section></div></body></html>