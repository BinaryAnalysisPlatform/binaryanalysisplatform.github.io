<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BaseEnv (oasis.BaseEnv)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">oasis</a> &#x00BB; BaseEnv</nav><h1>Module <code>BaseEnv</code></h1><p>Read-write access to 'setup.data'</p><dl><dt>author</dt><dd>Sylvain Le Gall</dd></dl></header><dl><dt class="spec type" id="type-origin_t"><a href="#type-origin_t" class="anchor"></a><code><span class="keyword">type</span> origin_t</code><code> = </code><table class="variant"><tr id="type-origin_t.ODefault" class="anchored"><td class="def constructor"><a href="#type-origin_t.ODefault" class="anchor"></a><code>| </code><code><span class="constructor">ODefault</span></code></td><td class="doc"><p>Default computed value.</p></td></tr><tr id="type-origin_t.OGetEnv" class="anchored"><td class="def constructor"><a href="#type-origin_t.OGetEnv" class="anchor"></a><code>| </code><code><span class="constructor">OGetEnv</span></code></td><td class="doc"><p>Extracted from environment, using Sys.getenv.</p></td></tr><tr id="type-origin_t.OFileLoad" class="anchored"><td class="def constructor"><a href="#type-origin_t.OFileLoad" class="anchor"></a><code>| </code><code><span class="constructor">OFileLoad</span></code></td><td class="doc"><p>From loading file setup.data.</p></td></tr><tr id="type-origin_t.OCommandLine" class="anchored"><td class="def constructor"><a href="#type-origin_t.OCommandLine" class="anchor"></a><code>| </code><code><span class="constructor">OCommandLine</span></code></td><td class="doc"><p>Set on command line.</p></td></tr></table></dt><dd><p>Origin of the variable, if a variable has been already set with a higher origin, it won't be set again.</p></dd></dl><dl><dt class="spec type" id="type-cli_handle_t"><a href="#type-cli_handle_t" class="anchor"></a><code><span class="keyword">type</span> cli_handle_t</code><code> = </code><table class="variant"><tr id="type-cli_handle_t.CLINone" class="anchored"><td class="def constructor"><a href="#type-cli_handle_t.CLINone" class="anchor"></a><code>| </code><code><span class="constructor">CLINone</span></code></td><td class="doc"><p>No command line argument.</p></td></tr><tr id="type-cli_handle_t.CLIAuto" class="anchored"><td class="def constructor"><a href="#type-cli_handle_t.CLIAuto" class="anchor"></a><code>| </code><code><span class="constructor">CLIAuto</span></code></td><td class="doc"><p>Build using variable name and help text.</p></td></tr><tr id="type-cli_handle_t.CLIWith" class="anchored"><td class="def constructor"><a href="#type-cli_handle_t.CLIWith" class="anchor"></a><code>| </code><code><span class="constructor">CLIWith</span></code></td><td class="doc"><p>Use prefix --with-.</p></td></tr><tr id="type-cli_handle_t.CLIEnable" class="anchored"><td class="def constructor"><a href="#type-cli_handle_t.CLIEnable" class="anchor"></a><code>| </code><code><span class="constructor">CLIEnable</span></code></td><td class="doc"><p>Use --enable/--disable.</p></td></tr><tr id="type-cli_handle_t.CLIUser" class="anchored"><td class="def constructor"><a href="#type-cli_handle_t.CLIUser" class="anchor"></a><code>| </code><code><span class="constructor">CLIUser</span> <span class="keyword">of</span> (<a href="../../ocaml/Stdlib/Arg/index.html#type-key">Stdlib.Arg.key</a> * <a href="../../ocaml/Stdlib/Arg/index.html#type-spec">Stdlib.Arg.spec</a> * <a href="../../ocaml/Stdlib/Arg/index.html#type-doc">Stdlib.Arg.doc</a>) list</code></td><td class="doc"><p>Fully define the command line arguments.</p></td></tr></table></dt><dd><p>Command line handling for variable.</p></dd></dl><dl><dt class="spec type" id="type-definition_t"><a href="#type-definition_t" class="anchor"></a><code><span class="keyword">type</span> definition_t</code><code> = </code><code>{</code><table class="record"><tr id="type-definition_t.hide" class="anchored"><td class="def field"><a href="#type-definition_t.hide" class="anchor"></a><code>hide : bool;</code></td><td class="doc"><p>Hide the variable.</p></td></tr><tr id="type-definition_t.dump" class="anchored"><td class="def field"><a href="#type-definition_t.dump" class="anchor"></a><code>dump : bool;</code></td><td class="doc"><p>Dump the variable.</p></td></tr><tr id="type-definition_t.cli" class="anchored"><td class="def field"><a href="#type-definition_t.cli" class="anchor"></a><code>cli : <a href="index.html#type-cli_handle_t">cli_handle_t</a>;</code></td><td class="doc"><p>Command line handling for the variable.</p></td></tr><tr id="type-definition_t.arg_help" class="anchored"><td class="def field"><a href="#type-definition_t.arg_help" class="anchor"></a><code>arg_help : string option;</code></td><td class="doc"><p>Help about the variable.</p></td></tr><tr id="type-definition_t.group" class="anchored"><td class="def field"><a href="#type-definition_t.group" class="anchor"></a><code>group : <a href="../OASISTypes/index.html#type-name">OASISTypes.name</a> option;</code></td><td class="doc"><p>Group of the variable.</p></td></tr></table><code>}</code></dt><dd><p>Variable type.</p></dd></dl><dl><dt class="spec value" id="val-schema"><a href="#val-schema" class="anchor"></a><code><span class="keyword">val</span> schema : (<a href="index.html#type-origin_t">origin_t</a>, <a href="index.html#type-definition_t">definition_t</a>) <a href="../PropList/Schema/index.html#type-t">PropList.Schema.t</a></code></dt><dd><p>Schema for environment.</p></dd></dl><dl><dt class="spec value" id="val-env"><a href="#val-env" class="anchor"></a><code><span class="keyword">val</span> env : <a href="../PropList/Data/index.html#type-t">PropList.Data.t</a></code></dt><dd><p>Data for environment.</p></dd></dl><dl><dt class="spec value" id="val-var_expand"><a href="#val-var_expand" class="anchor"></a><code><span class="keyword">val</span> var_expand : string <span>&#45;&gt;</span> string</code></dt><dd><p>Expand variable that can be found in string. Variable follow definition of variable for <code>Buffer.add_substitute</code>.</p></dd></dl><dl><dt class="spec value" id="val-var_get"><a href="#val-var_get" class="anchor"></a><code><span class="keyword">val</span> var_get : <a href="../OASISTypes/index.html#type-name">OASISTypes.name</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Get variable.</p></dd></dl><dl><dt class="spec value" id="val-var_choose"><a href="#val-var_choose" class="anchor"></a><code><span class="keyword">val</span> var_choose : ?&#8288;printer:(<span class="type-var">'a</span> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> ?&#8288;name:string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../OASISExpr/index.html#type-choices">OASISExpr.choices</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Choose a value among conditional expressions.</p></dd></dl><dl><dt class="spec value" id="val-var_protect"><a href="#val-var_protect" class="anchor"></a><code><span class="keyword">val</span> var_protect : string <span>&#45;&gt;</span> string</code></dt><dd><p>Protect a variable content, to avoid expansion.</p></dd></dl><dl><dt class="spec value" id="val-var_define"><a href="#val-var_define" class="anchor"></a><code><span class="keyword">val</span> var_define : ?&#8288;hide:bool <span>&#45;&gt;</span> ?&#8288;dump:bool <span>&#45;&gt;</span> ?&#8288;short_desc:(unit <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> ?&#8288;cli:<a href="index.html#type-cli_handle_t">cli_handle_t</a> <span>&#45;&gt;</span> ?&#8288;arg_help:string <span>&#45;&gt;</span> ?&#8288;group:string <span>&#45;&gt;</span> <a href="../OASISTypes/index.html#type-name">OASISTypes.name</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> string</code></dt><dd><p>Define a variable.</p></dd></dl><dl><dt class="spec value" id="val-var_redefine"><a href="#val-var_redefine" class="anchor"></a><code><span class="keyword">val</span> var_redefine : ?&#8288;hide:bool <span>&#45;&gt;</span> ?&#8288;dump:bool <span>&#45;&gt;</span> ?&#8288;short_desc:(unit <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> ?&#8288;cli:<a href="index.html#type-cli_handle_t">cli_handle_t</a> <span>&#45;&gt;</span> ?&#8288;arg_help:string <span>&#45;&gt;</span> ?&#8288;group:string <span>&#45;&gt;</span> <a href="../OASISTypes/index.html#type-name">OASISTypes.name</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> string</code></dt><dd><p>Define a variable or redefine it.</p></dd></dl><dl><dt class="spec value" id="val-var_ignore"><a href="#val-var_ignore" class="anchor"></a><code><span class="keyword">val</span> var_ignore : (unit <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> unit</code></dt><dd><p>Well-typed ignore for <code>var_define</code>.</p></dd></dl><dl><dt class="spec value" id="val-print_hidden"><a href="#val-print_hidden" class="anchor"></a><code><span class="keyword">val</span> print_hidden : unit <span>&#45;&gt;</span> string</code></dt><dd><p>Display all variables, even hidden one.</p></dd></dl><dl><dt class="spec value" id="val-var_all"><a href="#val-var_all" class="anchor"></a><code><span class="keyword">val</span> var_all : unit <span>&#45;&gt;</span> <a href="../OASISTypes/index.html#type-name">OASISTypes.name</a> list</code></dt><dd><p>Get all variables.</p></dd></dl><dl><dt class="spec value" id="val-default_filename"><a href="#val-default_filename" class="anchor"></a><code><span class="keyword">val</span> default_filename : <a href="../OASISContext/index.html#type-source_filename">OASISContext.source_filename</a></code></dt><dd><p>Environment default file.</p></dd></dl><dl><dt class="spec value" id="val-load"><a href="#val-load" class="anchor"></a><code><span class="keyword">val</span> load : ctxt:<a href="../OASISContext/index.html#type-t">OASISContext.t</a> <span>&#45;&gt;</span> ?&#8288;allow_empty:bool <span>&#45;&gt;</span> ?&#8288;filename:<a href="../OASISContext/index.html#type-source_filename">OASISContext.source_filename</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Initialize environment.</p></dd></dl><dl><dt class="spec value" id="val-unload"><a href="#val-unload" class="anchor"></a><code><span class="keyword">val</span> unload : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Uninitialize environment.</p></dd></dl><dl><dt class="spec value" id="val-dump"><a href="#val-dump" class="anchor"></a><code><span class="keyword">val</span> dump : ctxt:<a href="../OASISContext/index.html#type-t">OASISContext.t</a> <span>&#45;&gt;</span> ?&#8288;filename:<a href="../OASISContext/index.html#type-source_filename">OASISContext.source_filename</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Save environment on disk.</p></dd></dl><dl><dt class="spec value" id="val-print"><a href="#val-print" class="anchor"></a><code><span class="keyword">val</span> print : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Display environment to user.</p></dd></dl><dl><dt class="spec value" id="val-args"><a href="#val-args" class="anchor"></a><code><span class="keyword">val</span> args : unit <span>&#45;&gt;</span> (<a href="../../ocaml/Stdlib/Arg/index.html#type-key">Stdlib.Arg.key</a> * <a href="../../ocaml/Stdlib/Arg/index.html#type-spec">Stdlib.Arg.spec</a> * <a href="../../ocaml/Stdlib/Arg/index.html#type-doc">Stdlib.Arg.doc</a>) list</code></dt><dd><p>Default command line arguments, computed using variable definitions.</p></dd></dl></div></body></html>