<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Create (bap-main.Bap_main_event.Log.Create)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">bap-main</a> &#x00BB; <a href="../../index.html">Bap_main_event</a> &#x00BB; <a href="../index.html">Log</a> &#x00BB; Create</nav><h1>Module <code>Log.Create</code></h1><p>generates reporters specialized to the current plugin.</p><p>Use <code>include Bap_main_event.Create()</code> to bring to the scope logging and debugging functions.</p><p>The functions will post logging events if the corresponding level of debugging is enabled. Right now only <code>BAP_DEBUG</code> and <code>BAP_DEBUG_&lt;plugin&gt;</code> environment variables are consulted to enable/disable the events of the <a href="../index.html#type-level.Debug"><code>Log.level.Debug</code></a> level. When neither of these variables is set, the <code>debug</code> function will be a no-op.</p></header><h3 class="heading">Parameters</h3><ul></ul><h3 class="heading">Signature</h3><dl><dt class="spec value" id="val-debug"><a href="#val-debug" class="anchor"></a><code><span class="keyword">val</span> debug : <span><span>(<span class="type-var">'a</span>, <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a>, unit)</span> <a href="../../../../ocaml/Stdlib/index.html#type-format">Stdlib.format</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>debug &quot;my message: %s&quot; &quot;hello&quot;</code> sends the debugging message.</p></dd></dl><dl><dt class="spec value" id="val-info"><a href="#val-info" class="anchor"></a><code><span class="keyword">val</span> info : <span><span>(<span class="type-var">'a</span>, <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a>, unit)</span> <a href="../../../../ocaml/Stdlib/index.html#type-format">Stdlib.format</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>info &quot;my message: %s&quot; &quot;hello&quot;</code> sends the info message.</p></dd></dl><dl><dt class="spec value" id="val-warning"><a href="#val-warning" class="anchor"></a><code><span class="keyword">val</span> warning : <span><span>(<span class="type-var">'a</span>, <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a>, unit)</span> <a href="../../../../ocaml/Stdlib/index.html#type-format">Stdlib.format</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>warning &quot;my message: %s&quot; &quot;hello&quot;</code> sends the warning message.</p></dd></dl><dl><dt class="spec value" id="val-error"><a href="#val-error" class="anchor"></a><code><span class="keyword">val</span> error : <span><span>(<span class="type-var">'a</span>, <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a>, unit)</span> <a href="../../../../ocaml/Stdlib/index.html#type-format">Stdlib.format</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>error &quot;my message: %s&quot; &quot;hello&quot;</code> sends the error message.</p></dd></dl><dl><dt class="spec value" id="val-report_progress"><a href="#val-report_progress" class="anchor"></a><code><span class="keyword">val</span> report_progress : <span>?&#8288;task:string</span> <span>&#45;&gt;</span> <span>?&#8288;note:string</span> <span>&#45;&gt;</span> <span>?&#8288;stage:int</span> <span>&#45;&gt;</span> <span>?&#8288;total:int</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p><code>report_progress ~task:t ~note:n ~state:s ~total:s' ()</code> reports a progress of the task <code>t</code>.</p><p>Reports that the task <code>t</code> made a progress to the stage <code>s</code> out the total number of stages <code>s'</code>. The note <code>n</code> may provide an additional textual explanation of the current stage. The report doesn't mean that the stage is finished, but rather that it is entered. Thus for <code>s'</code> stages we expect to receive <code>s'-1</code> reports. (This approach works fine with functional programming and iterating - as in functional programming it is more convenient to report before computation, and during the indexed iteration the index of the last element is one less than the total number of elements).</p><p>All parameters are optional, and have the following default values if not specified:</p><dl><dt>parameter task</dt><dd><p>defaults to the plugin <code>name</code>;</p></dd></dl><dl><dt>parameter note</dt><dd><p>defaults to the empty string;</p></dd></dl><dl><dt>parameter stage</dt><dd><p>defaults to <code>None</code></p></dd></dl><dl><dt>parameter total</dt><dd><p>defaults to <code>None</code> or to the last value of this parameter for the given task.</p><p>The <code>report_progress</code> bar is an easy way to provide some feedback to the system, either in the form of a progress (if the total number of stages is known) or in the form of a friendly ping back.</p><p>The mechanism should be used by analyses that expect to take some time to complete. Usually, one plugin implements only one task, so the task name may be omitted. If an analysis is built from several tasks, then they can be represented as subtasks, and the main task should represent the whole work.</p><p>Example:</p><pre><code class="ml">let find_interesting_points prog =
  report_progress ~task:&quot;discover&quot; ~total:(Term.length sub_t prog) ();
  Term.enum sub_t prog |&gt; Seq.concat_mapi ~f:(fun stage sub -&gt;
      report_progress ~note:(Sub.name sub) ~task:&quot;discover&quot; ~stage ();
      interesting_points_of_sub sub)

let check_interesting_points points =
  report_progress ~task:&quot;checking&quot; ~total:(Seq.length points) ();
  Seq.iteri ~f:(fun stage p -&gt;
      report_progress ~note:(Point.name p) ~task:&quot;checking&quot; ~stage ();
      check_point p)</code></pre></dd></dl></dd></dl><dl><dt class="spec value" id="val-debug_formatter"><a href="#val-debug_formatter" class="anchor"></a><code><span class="keyword">val</span> debug_formatter : <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a></code></dt><dd><p>the formatter that could be used to send debug messages.</p></dd></dl><dl><dt class="spec value" id="val-info_formatter"><a href="#val-info_formatter" class="anchor"></a><code><span class="keyword">val</span> info_formatter : <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a></code></dt><dd><p>the formatter that could be used to send info messages.</p></dd></dl><dl><dt class="spec value" id="val-warning_formatter"><a href="#val-warning_formatter" class="anchor"></a><code><span class="keyword">val</span> warning_formatter : <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a></code></dt><dd><p>the formatter that could be used to send warnings.</p></dd></dl><dl><dt class="spec value" id="val-error_formatter"><a href="#val-error_formatter" class="anchor"></a><code><span class="keyword">val</span> error_formatter : <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a></code></dt><dd><p>the formatter that could be used to send errors</p></dd></dl></div></body></html>