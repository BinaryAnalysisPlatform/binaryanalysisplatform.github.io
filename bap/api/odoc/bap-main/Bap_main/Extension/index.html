<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Extension (bap-main.Bap_main.Extension)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">bap-main</a> &#x00BB; <a href="../index.html">Bap_main</a> &#x00BB; Extension</nav><header class="odoc-preamble"><h1>Module <code><span>Bap_main.Extension</span></code></h1><p>Writing and declaring BAP extensions.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-typ"><a href="#type-typ" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a typ</span></span></code></div><div class="spec-doc"><p>defines a data type for a parameter.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-declare"><a href="#val-declare" class="anchor"></a><code><span><span class="keyword">val</span> declare : 
  <span>?features:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?provides:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?doc:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../index.html#type-ctxt">ctxt</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <a href="../index.html#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>declare extension</code> declares the <code>extension</code> function.</p><p>The function is run when one of the features <code>provided</code> by the <code>extension</code> is required by the call to <code>Bap_main.init</code> and all <code>features</code> needed by the extension are present.</p><p>If <code>extension</code> evaluates to <code>Error condition</code>, then no other extensions will be evaluated and the initialization procedure will stop immediately with the <code>Error condition</code> as the final result.</p><p>If <code>extension</code> raises an exception <code>e</code>, then it will be caught, and the initialization procedure will terminated immediately with the <code>Error (Error.Bug (e,backtrace)</code>.</p><p>@parameter features is a set of application features that the declared extension expects. If there is a feature that is required but not provided by an application, then the extension will not be evaluated. See the corresponding <code>features</code> parameter of the <code>init</code> function, as well as the <a href="../index.html#features">Features</a> section.</p><p>@parameter provides is a set of features that the extension provides. During the initialization, only those extensions that provide features that are requested by the application are loaded. All configuration parameters of the extension will be attributed with tags from the <code>provides</code> set, so that they will only affect those components that explicitly depend on of the specified features. Note that, the set of provided features is shared by all extensions of a plugin, in other words it is an attribute of a plugin rather than of a particular extension function.</p><p>@parameter doc is the documentation provided with the extension. It can take a form of a one line description or a full manual written in the markdown syntax. See the corresponding <code>man</code> parameter of the <code>Bap_main.init</code> function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-documentation"><a href="#val-documentation" class="anchor"></a><code><span><span class="keyword">val</span> documentation : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>documentation s</code> specifies plugin documentation.</p><p>A non-declarative way of specifying documentation. Each occurrence of the <code>documentation s</code> appends <code>s</code> to the plugin documentation, as well as each occurrence of the <code>doc</code> parameter of the <code>Extension.declare</code> function.</p><p>See the <code>doc</code> parameter of the <a href="#val-declare"><code>Extension.declare</code></a> and !<code>Bap_main.init</code> functions for more information on the accepted formats.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Command"><a href="#module-Command" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Command/index.html">Command</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Interface for specifying commands.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Configuration"><a href="#module-Configuration" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Configuration/index.html">Configuration</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Configuration Parameters.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Syntax"><a href="#module-Syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Syntax/index.html">Syntax</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A lightweight syntax for accessing configuration parameters.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Type"><a href="#module-Type" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Type/index.html">Type</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Data types for parameters.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Error/index.html">Error</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An extensible set of possible errors</p></div></div></div></body></html>