<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Extension (bap-main.Bap_main.Extension)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">bap-main</a> &#x00BB; <a href="../index.html">Bap_main</a> &#x00BB; Extension</nav><h1>Module <code>Bap_main.Extension</code></h1><p>Writing and declaring BAP extensions.</p></header><dl><dt class="spec type" id="type-typ"><a href="#type-typ" class="anchor"></a><code><span class="keyword">type</span> <span>'a typ</span></code></dt><dd><p>defines a data type for a parameter.</p></dd></dl><dl><dt class="spec value" id="val-declare"><a href="#val-declare" class="anchor"></a><code><span class="keyword">val</span> declare : <span>?&#8288;features:<span>string list</span></span> <span>&#45;&gt;</span> <span>?&#8288;provides:<span>string list</span></span> <span>&#45;&gt;</span> <span>?&#8288;doc:string</span> <span>&#45;&gt;</span> <span>(<a href="../index.html#type-ctxt">ctxt</a> <span>&#45;&gt;</span> <span><span>(unit, <a href="../index.html#type-error">error</a>)</span> Stdlib.result</span>)</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>declare extension</code> declares the <code>extension</code> function.</p><p>The function is run when one of the features <code>provided</code> by the <code>extension</code> is required by the call to <code>Bap_main.init</code> and all <code>features</code> needed by the extension are present.</p><p>If <code>extension</code> evaluates to <code>Error condition</code>, then no other extensions will be evaluated and the initialization procedure will stop immediately with the <code>Error condition</code> as the final result.</p><p>If <code>extension</code> raises an exception <code>e</code>, then it will be caught, and the initialization procedure will terminated immediately with the <code>Error (Error.Bug (e,backtrace)</code>.</p><p>@parameter features is a set of application features that the declared extension expects. If there is a feature that is required but not provided by an application, then the extension will not be evaluated. See the corresponding <code>features</code> parameter of the <code>init</code> function, as well as the <a href="../index.html#features"><span>Features</span></a> section.</p><p>@parameter provides is a set of features that the extension provides. During the initialization, only those extensions that provide features that are requested by the application are loaded. All configuration parameters of the extension will be attributed with tags from the <code>provides</code> set, so that they will only affect those components that explicitly depend on of the specified features. Note that, the set of provided features is shared by all extensions of a plugin, in other words it is an attribute of a plugin rather than of a particular extension function.</p><p>@parameter doc is the documentation provided with the extension. It can take a form of a one line description or a full manual written in the markdown syntax. See the corresponding <code>man</code> parameter of the <code>Bap_main.init</code> function.</p></dd></dl><dl><dt class="spec value" id="val-documentation"><a href="#val-documentation" class="anchor"></a><code><span class="keyword">val</span> documentation : string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>documentation s</code> specifies plugin documentation.</p><p>A non-declarative way of specifying documentation. Each occurrence of the <code>documentation s</code> appends <code>s</code> to the plugin documentation, as well as each occurrence of the <code>doc</code> parameter of the <code>Extension.declare</code> function.</p><p>See the <code>doc</code> parameter of the <a href="index.html#val-declare"><code>Extension.declare</code></a> and !<code>Bap_main.init</code> functions for more information on the accepted formats.</p></dd></dl><dl><dt class="spec module" id="module-Command"><a href="#module-Command" class="anchor"></a><code><span class="keyword">module</span> <a href="Command/index.html">Command</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Interface for specifying commands.</p></dd></dl><dl><dt class="spec module" id="module-Configuration"><a href="#module-Configuration" class="anchor"></a><code><span class="keyword">module</span> <a href="Configuration/index.html">Configuration</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Configuration Parameters.</p></dd></dl><dl><dt class="spec module" id="module-Syntax"><a href="#module-Syntax" class="anchor"></a><code><span class="keyword">module</span> <a href="Syntax/index.html">Syntax</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A lightweight syntax for accessing configuration parameters.</p></dd></dl><dl><dt class="spec module" id="module-Type"><a href="#module-Type" class="anchor"></a><code><span class="keyword">module</span> <a href="Type/index.html">Type</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Data types for parameters.</p></dd></dl><dl><dt class="spec module" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span class="keyword">module</span> <a href="Error/index.html">Error</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>An extensible set of possible errors</p></dd></dl></div></body></html>