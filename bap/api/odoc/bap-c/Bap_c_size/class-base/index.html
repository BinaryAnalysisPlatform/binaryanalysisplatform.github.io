<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>base (bap-c.Bap_c_size.base)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">bap-c</a> &#x00BB; <a href="../index.html">Bap_c_size</a> &#x00BB; base</nav><header class="odoc-preamble"><h1>Class <code><span>Bap_c_size.base</span></code></h1><p>The base class for computing sizes and aligments of C data types.</p><p>The algorithm is implemented as a class to allow a particular implementation to fine tune the calculation.</p><p>The <code>model</code> argument defines the default sizes for integral data types. If no suitable model is available for your architecture then use the closest model and override the specific methods to fine-tune the data model of your target.</p><p>The entry methods are <code>bits</code> and <code>aligment</code>.</p></header><nav class="odoc-toc"><ul><li><a href="#example">Example</a></li></ul></nav><div class="odoc-content"><h4 id="example"><a href="#example" class="anchor"></a>Example</h4><p>For example, let's compute the size of the</p><pre>      struct foo {
         char v1;
         int  v2;
         char v3;
      };</pre><p>Using the LP64 data model, in which integers are 32 bit long and char is 8 bit. The size of the structure is 12 bytes, due to the 3 bytes of padding before <code>v2</code> and six bytes of trailing padding.</p><pre><code># let size = new C.Size.base `LP64;;
# size#bits C.Type.(structure &quot;foo&quot; [
    &quot;v1&quot;, basic `char;
    &quot;v2&quot;, basic `uint;
    &quot;v3&quot;, basic `char
  ]);;
- : C.Size.bits option = Some 96</code></pre><div class="odoc-spec"><div class="spec method" id="method-bits" class="anchored"><a href="#method-bits" class="anchor"></a><code><span><span class="keyword">method</span> bits : <span><a href="../../Bap_c_type/index.html#type-t">Bap_c_type.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-bits">bits</a> option</span></span></code></div><div class="spec-doc"><p>returns a size of the data type representation in bits.</p><p>For incomplete types returns <code>None</code>. The size is always a multitude of the data type alignment and includes the paddings necessary for preserving the alignment restrictions.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.5.0 the size is a multitude of the alignment.</li></ul></div></div><div class="odoc-spec"><div class="spec method" id="method-alignment" class="anchored"><a href="#method-alignment" class="anchor"></a><code><span><span class="keyword">method</span> alignment : <span><a href="../../Bap_c_type/index.html#type-t">Bap_c_type.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a></span></code></div><div class="spec-doc"><p><code>alignment t</code> the alignment of data type <code>t</code>.</p><p>The alignment of</p><ul><li>void or an incomplete type is 8;</li><li>a scalar is <code>sizeof(t)</code>;</li><li>an array is the alignment its element;</li><li>a function pointer is <code>sizeof</code> the pointer;</li><li>a structure or a union is the largest of the element's alignments.</li></ul></div></div><div class="odoc-spec"><div class="spec method" id="method-padding" class="anchored"><a href="#method-padding" class="anchor"></a><code><span><span class="keyword">method</span> padding : <span><a href="../../Bap_c_type/index.html#type-t">Bap_c_type.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-bits">bits</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a> option</span></span></code></div><div class="spec-doc"><p>DEPRECATED. Use the <code>padding</code> function if you need to compute padding.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-array" class="anchored"><a href="#method-array" class="anchor"></a><code><span><span class="keyword">method</span> array : <span><span><span>( <span><a href="../../Bap_c_type/index.html#type-cvr">Bap_c_type.cvr</a> <a href="../../Bap_c_type/index.html#type-qualifier">Bap_c_type.qualifier</a></span>, <a href="../../Bap_c_type/index.html#type-array">Bap_c_type.array</a> )</span>
                 <a href="../../Bap_c_type/index.html#type-spec">Bap_c_type.spec</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-bits">bits</a> option</span></span></code></div><div class="spec-doc"><p><code>array spec</code> if array <code>spec</code> is complete, i.e., the number of elements is known, then returns a product of the array size and the array's element type in bits, otherwise returns <code>None</code></p></div></div><div class="odoc-spec"><div class="spec method" id="method-union" class="anchored"><a href="#method-union" class="anchor"></a><code><span><span class="keyword">method</span> union : <span><span><span>( <a href="../../Bap_c_type/index.html#type-no_qualifier">Bap_c_type.no_qualifier</a>, <a href="../../Bap_c_type/index.html#type-compound">Bap_c_type.compound</a> )</span> <a href="../../Bap_c_type/index.html#type-spec">Bap_c_type.spec</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-bits">bits</a> option</span></span></code></div><div class="spec-doc"><p>if spec is complete then returns a size in bits of the biggest element, including the padding between fields, but excludeing the trailing padding.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-structure" class="anchored"><a href="#method-structure" class="anchor"></a><code><span><span class="keyword">method</span> structure : <span><span><span>( <a href="../../Bap_c_type/index.html#type-no_qualifier">Bap_c_type.no_qualifier</a>, <a href="../../Bap_c_type/index.html#type-compound">Bap_c_type.compound</a> )</span>
                     <a href="../../Bap_c_type/index.html#type-spec">Bap_c_type.spec</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-bits">bits</a> option</span></span></code></div><div class="spec-doc"><p>if spec is complete then returns a total size of the structure, including the padding between fields, but excluding the trailing padding.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-integer" class="anchored"><a href="#method-integer" class="anchor"></a><code><span><span class="keyword">method</span> integer : <span><a href="../../Bap_c_type/index.html#type-integer">Bap_c_type.integer</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a></span></code></div><div class="spec-doc"><p>the size of intergral types.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-pointer" class="anchored"><a href="#method-pointer" class="anchor"></a><code><span><span class="keyword">method</span> pointer : <a href="../../../bap/Bap/Std/index.html#type-addr_size">Bap.Std.addr_size</a></span></code></div><div class="spec-doc"><p>the size of a pointer.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-enum" class="anchored"><a href="#method-enum" class="anchor"></a><code><span><span class="keyword">method</span> enum : <span><span><span>(string * <span>int64 option</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a></span></code></div><div class="spec-doc"><p>the size of the enumeration.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-real" class="anchored"><a href="#method-real" class="anchor"></a><code><span><span class="keyword">method</span> real : <span><a href="../../Bap_c_type/index.html#type-real">Bap_c_type.real</a> <span class="arrow">&#45;&gt;</span></span> <span>[ `r32 <span>| `r64</span> <span>| `r128</span> ]</span></span></code></div><div class="spec-doc"><p>the size of a real floating-point data type.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-complex" class="anchored"><a href="#method-complex" class="anchor"></a><code><span><span class="keyword">method</span> complex : <span><a href="../../Bap_c_type/index.html#type-complex">Bap_c_type.complex</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a></span></code></div><div class="spec-doc"><p>the size of a complex floating-point data type.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-floating" class="anchored"><a href="#method-floating" class="anchor"></a><code><span><span class="keyword">method</span> floating : <span><a href="../../Bap_c_type/index.html#type-floating">Bap_c_type.floating</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a></span></code></div><div class="spec-doc"><p>the size of a floating-point data type.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-basic" class="anchored"><a href="#method-basic" class="anchor"></a><code><span><span class="keyword">method</span> basic : <span><a href="../../Bap_c_type/index.html#type-basic">Bap_c_type.basic</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a></span></code></div><div class="spec-doc"><p>the size of a basic data type.</p></div></div><div class="odoc-spec"><div class="spec method" id="method-scalar" class="anchored"><a href="#method-scalar" class="anchor"></a><code><span><span class="keyword">method</span> scalar : <span><a href="../../Bap_c_type/index.html#type-scalar">Bap_c_type.scalar</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../bap/Bap/Std/index.html#type-size">Bap.Std.size</a></span></code></div><div class="spec-doc"><p>the size of a scalar data type.</p></div></div></div></body></html>