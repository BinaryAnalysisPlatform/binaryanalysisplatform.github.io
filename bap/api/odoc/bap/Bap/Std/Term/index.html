<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Term (bap.Bap.Std.Term)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">bap</a> &#x00BB; <a href="../../index.html">Bap</a> &#x00BB; <a href="../index.html">Std</a> &#x00BB; Term</nav><header class="odoc-preamble"><h1>Module <code><span>Std.Term</span></code></h1><p>IR language term.</p><p>Term is a building block of the <a href="../index.html#sema">Intermediate Representation</a> of the binary program.</p><p>This module provides functions that are overloaded for different term classes. Term class is denoted with an explicit instance of type <code>('a,'b)cls</code>, where <code>'a</code> stands for the parent term and <code>'b</code> for the child term.</p></header><nav class="odoc-toc"><ul><li><a href="#example">Example</a></li><li><a href="#attributes">Attributes</a></li><li><a href="#higher-order-mapping">Higher order mapping</a></li></ul></nav><div class="odoc-content"><h3 id="example"><a href="#example" class="anchor"></a>Example</h3><p>Give a block</p><pre><code># let b = Blk.create ();;</code></pre><pre>val b : Blk.t =
          00000003:</pre><p>We can append a definition to it with an overloaded <code>Term.append</code></p><pre><code># let b = Term.append def_t b d_1;;</code></pre><pre>val b : blk term =
          00000003:
          00000001: x := y + z</pre><p>Update a value of a definition in the block:</p><pre><code># let b = Term.update def_t b d_2;;</code></pre><pre>val b : blk term =
          00000003:
          00000001: x := true</pre><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = <span><span class="type-var">'a</span> <a href="../index.html#type-term">term</a></span></span></code></div><div class="spec-doc"><p>term type</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clone" class="anchored"><a href="#val-clone" class="anchor"></a><code><span><span class="keyword">val</span> clone : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>clone term</code> creates an object with a fresh new identifier that has the same contents as <code>term</code>, i.e., that is syntactically the same. The clone operation is shallow, all subterms of <code>term</code> are unchanged.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-same" class="anchored"><a href="#val-same" class="anchor"></a><code><span><span class="keyword">val</span> same : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>same x y</code> returns true if <code>x</code> and <code>y</code> represents the same entity, i.e., <code>Tid.(tid x = tid y)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-name" class="anchored"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>name t</code> returns a string representation of a term <code>t</code> identity</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tid" class="anchored"><a href="#val-tid" class="anchor"></a><code><span><span class="keyword">val</span> tid : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-tid">tid</a></span></code></div><div class="spec-doc"><p><code>tid entity</code> returns a unique identifier of the <code>entity</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-length" class="anchored"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>length t p</code> returns an amount of terms of <code>t</code> class in a parent term <code>p</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-find" class="anchored"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>find t p id</code> is <code>Some c</code> if term <code>p</code> has a subterm of type <code>t</code> such that <code>tid c = id</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-find_exn" class="anchored"><a href="#val-find_exn" class="anchor"></a><code><span><span class="keyword">val</span> find_exn : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>find_exn t p id</code> like <a href="#val-find"><code>find</code></a> but raises <code>Not_found</code> if nothing is found.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update" class="anchored"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>update t p c</code> if term <code>p</code> contains a term with id equal to <code>tid c</code> then return <code>p</code> with this term substituted with <code>p</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-remove" class="anchored"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">_</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>remove t p id</code> returns a term that doesn't contain element with the a given <code>id</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-change" class="anchored"><a href="#val-change" class="anchor"></a><code><span><span class="keyword">val</span> change : 
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>change t p id f</code> if <code>p</code> contains subterm with of a given kind <code>t</code> and identifier <code>id</code>, then apply <code>f</code> to this subterm. Otherwise, apply <code>f</code> to <code>None</code>. If <code>f</code> return <code>None</code>, then remove this subterm (a given it did exist), otherwise, update parent with a new subterm.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-enum" class="anchored"><a href="#val-enum" class="anchor"></a><code><span><span class="keyword">val</span> enum : <span>?rev:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <a href="../index.html#type-seq">seq</a></span></span></code></div><div class="spec-doc"><p><code>enum ?rev t p</code> enumerate all subterms of type <code>t</code> of the a given term <code>p</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_sequence" class="anchored"><a href="#val-to_sequence" class="anchor"></a><code><span><span class="keyword">val</span> to_sequence : <span>?rev:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <a href="../index.html#type-seq">seq</a></span></span></code></div><div class="spec-doc"><p><code>to_sequence ?rev t p</code> is a synonym for <code>enum</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-map" class="anchored"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>map t p ~f</code> returns term <code>p</code> with all subterms of type <code>t</code> mapped with function <code>f</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-filter_map" class="anchored"><a href="#val-filter_map" class="anchor"></a><code><span><span class="keyword">val</span> filter_map : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>filter_map t p ~f</code> returns term <code>p</code> with all subterms of type <code>t</code> filter_mapped with function <code>f</code>, i.e., all terms for which function <code>f</code> returned <code>Some thing</code> are substituted by the <code>thing</code>, otherwise they're removed from the parent term</p></div></div><div class="odoc-spec"><div class="spec value" id="val-concat_map" class="anchored"><a href="#val-concat_map" class="anchor"></a><code><span><span class="keyword">val</span> concat_map : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> list</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>concat_map t p ~f</code> substitute subterm <code>c</code> of type <code>t</code> in parent term <code>p</code> with <code>f c</code>. If <code>f c</code> is an empty list, then <code>c</code> doesn't occur in a new parent term, if <code>f c</code> is a singleton list, then <code>c</code> is substituted with the <code>f c</code>, like in <code>map</code>. If <code>f c</code> is a list of <code>n</code> elements, then in the place of <code>c</code> this <code>n</code> elements are inserted.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-filter" class="anchored"><a href="#val-filter" class="anchor"></a><code><span><span class="keyword">val</span> filter : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>filter t p ~f</code> returns a term <code>p</code> with subterms <code>c</code> for which <code>f c = false</code> removed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-first" class="anchored"><a href="#val-first" class="anchor"></a><code><span><span class="keyword">val</span> first : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>first t p</code> returns the first subterm of type <code>t</code> of a given parent <code>p</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-last" class="anchored"><a href="#val-last" class="anchor"></a><code><span><span class="keyword">val</span> last : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>last t p</code> returns a last subterm of type <code>t</code> of a given parent <code>p</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-next" class="anchored"><a href="#val-next" class="anchor"></a><code><span><span class="keyword">val</span> next : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>next t p id</code> returns a term that is after a term with a given <code>id</code>, if such exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-prev" class="anchored"><a href="#val-prev" class="anchor"></a><code><span><span class="keyword">val</span> prev : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>prev t p id</code> returns a term that precedes a term with a given <code>id</code>, if such exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-after" class="anchored"><a href="#val-after" class="anchor"></a><code><span><span class="keyword">val</span> after : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?rev:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <a href="../index.html#type-seq">seq</a></span></span></code></div><div class="spec-doc"><p><code>after t ?rev p tid</code> returns all subterms in term <code>p</code> that occur after a term with a given <code>tid</code>. if <code>rev</code> is <code>true</code> or omitted then terms are returned in the evaluation order. Otherwise they're reversed. If there is no term with a given <code>tid</code>, then an empty sequence is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-before" class="anchored"><a href="#val-before" class="anchor"></a><code><span><span class="keyword">val</span> before : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?rev:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <a href="../index.html#type-seq">seq</a></span></span></code></div><div class="spec-doc"><p><code>before t ?rev p tid</code> returns all term that occurs before definition with a given <code>tid</code> in blk. If there is no such definition, then the sequence will be empty. </p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">rev</span> <p>has the same meaning as in <code>after</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-append" class="anchored"><a href="#val-append" class="anchor"></a><code><span><span class="keyword">val</span> append : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?after:<a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>append t ~after:this p c</code> returns the <code>p</code> term with <code>c</code> appended after <code>this</code> term. If <code>after</code> is not specified, then append <code>def</code> to the end of the parent term (if it makes sense, otherwise it is just added). If <code>this</code> doesn't occur in the <code>p</code> term then do nothing. The term tid is preserved.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-prepend" class="anchored"><a href="#val-prepend" class="anchor"></a><code><span><span class="keyword">val</span> prepend : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?before:<a href="../index.html#type-tid">tid</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>prepend t ~before:this p c</code> returns the <code>p</code> with <code>c</code> inserted before <code>this</code> term. If <code>before</code> is left unspecified, then insert the <code>c</code> at the beginning of the <code>p</code> if it is a sequence, otherwise just insert. If <code>this</code> is specified but doesn't occur in the <code>p</code> then <code>p</code> is returned as is. In all cases, the returned term has the same <code>tid</code> as <code>p</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-nth" class="anchored"><a href="#val-nth" class="anchor"></a><code><span><span class="keyword">val</span> nth : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p><code>nth t p n</code> returns <code>n</code>'th <code>t</code>-term of parent <code>p</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-nth_exn" class="anchored"><a href="#val-nth_exn" class="anchor"></a><code><span><span class="keyword">val</span> nth_exn : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>nth_exn t p n</code> same as <code>nth</code>, but raises exception if <code>n</code> is not a valid position number.</p></div></div><h3 id="attributes"><a href="#attributes" class="anchor"></a>Attributes</h3><p>Terms attribute set can be extended, using <a href="../Value/index.html">universal values</a>. A value of type <code>'a tag</code> is used to denote an attribute of type <code>'a</code> with the name <code>Value.Tag.name tag</code>.</p><p>With the provided interface Term can be treated as an extensible record.</p><div class="odoc-spec"><div class="spec value" id="val-set_attr" class="anchored"><a href="#val-set_attr" class="anchor"></a><code><span><span class="keyword">val</span> set_attr : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../index.html#type-tag">tag</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>set_attr term attr value</code> attaches an <code>value</code> to attribute <code>attr</code> in <code>term</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-attrs" class="anchored"><a href="#val-attrs" class="anchor"></a><code><span><span class="keyword">val</span> attrs : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../Dict/index.html#type-t">Dict.t</a></span></code></div><div class="spec-doc"><p><code>attrs term attrs</code> returns the set of <code>attributes</code> associated with a <code>term</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-with_attrs" class="anchored"><a href="#val-with_attrs" class="anchor"></a><code><span><span class="keyword">val</span> with_attrs : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Dict/index.html#type-t">Dict.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>with_attrs term attributes</code> returns a term with a new set of <code>attributes</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_attr" class="anchored"><a href="#val-get_attr" class="anchor"></a><code><span><span class="keyword">val</span> get_attr : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../index.html#type-tag">tag</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span></span></code></div><div class="spec-doc"><p><code>get_attr term attr</code> returns a value of the a given <code>attr</code> in <code>term</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-has_attr" class="anchored"><a href="#val-has_attr" class="anchor"></a><code><span><span class="keyword">val</span> has_attr : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../index.html#type-tag">tag</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_attr term attr</code> is <code>true</code> if <code>term</code> has attribute <code>attr</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-del_attr" class="anchored"><a href="#val-del_attr" class="anchor"></a><code><span><span class="keyword">val</span> del_attr : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../index.html#type-tag">tag</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>del_attr term attr</code> deletes attribute <code>attr</code> from <code>term</code></p></div></div><p><code>Predefined attributes</code></p><div class="odoc-spec"><div class="spec value" id="val-origin" class="anchored"><a href="#val-origin" class="anchor"></a><code><span><span class="keyword">val</span> origin : <span><a href="../index.html#type-tid">tid</a> <a href="../index.html#type-tag">tag</a></span></span></code></div><div class="spec-doc"><p>a term was artificially produced from a term with a given tid.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-synthetic" class="anchored"><a href="#val-synthetic" class="anchor"></a><code><span><span class="keyword">val</span> synthetic : <span>unit <a href="../index.html#type-tag">tag</a></span></span></code></div><div class="spec-doc"><p>a term was introduced artificially by an analysis.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-live" class="anchored"><a href="#val-live" class="anchor"></a><code><span><span class="keyword">val</span> live : <span>unit <a href="../index.html#type-tag">tag</a></span></span></code></div><div class="spec-doc"><p>a term is identified as always non dead</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dead" class="anchored"><a href="#val-dead" class="anchor"></a><code><span><span class="keyword">val</span> dead : <span>unit <a href="../index.html#type-tag">tag</a></span></span></code></div><div class="spec-doc"><p>a term is identified as dead</p></div></div><div class="odoc-spec"><div class="spec value" id="val-visited" class="anchored"><a href="#val-visited" class="anchor"></a><code><span><span class="keyword">val</span> visited : <span>unit <a href="../index.html#type-tag">tag</a></span></span></code></div><div class="spec-doc"><p>to mark a term as visited by some algorithm</p></div></div><div class="odoc-spec"><div class="spec value" id="val-precondition" class="anchored"><a href="#val-precondition" class="anchor"></a><code><span><span class="keyword">val</span> precondition : <span><a href="../index.html#type-exp">exp</a> <a href="../index.html#type-tag">tag</a></span></span></code></div><div class="spec-doc"><p>precondition must on the entrance to the subroutine</p></div></div><div class="odoc-spec"><div class="spec value" id="val-invariant" class="anchored"><a href="#val-invariant" class="anchor"></a><code><span><span class="keyword">val</span> invariant : <span><a href="../index.html#type-exp">exp</a> <a href="../index.html#type-tag">tag</a></span></span></code></div><div class="spec-doc"><p>invariant must be always true while the term is evaluated</p></div></div><div class="odoc-spec"><div class="spec value" id="val-postcondition" class="anchored"><a href="#val-postcondition" class="anchor"></a><code><span><span class="keyword">val</span> postcondition : <span><a href="../index.html#type-exp">exp</a> <a href="../index.html#type-tag">tag</a></span></span></code></div><div class="spec-doc"><p>must hold just after the term is left</p></div></div><h3 id="higher-order-mapping"><a href="#higher-order-mapping" class="anchor"></a>Higher order mapping</h3><div class="odoc-spec"><div class="spec class" id="class-mapper" class="anchored"><a href="#class-mapper" class="anchor"></a><code><span><span class="keyword">class</span>  </span><span><a href="class-mapper/index.html">mapper</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Mapper performs deep identity term mapping. If you override any method make sure that you didn't forget to invoke parent's method, as OCaml will not call it for you.</p></div></div><div class="odoc-spec"><div class="spec class" id="class-visitor" class="anchored"><a href="#class-visitor" class="anchor"></a><code><span><span class="keyword">class</span> 'a </span><span><a href="class-visitor/index.html">visitor</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Visitor performs deep visiting. As always, don't forget to overrid parent methods. The visitor comes with useful <code>enter_T</code> <code>leave_T</code> that are no-ops in this visitor, so if you inherit directly from it, then you may not call to the parent method.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-switch" class="anchored"><a href="#val-switch" class="anchor"></a><code><span><span class="keyword">val</span> switch : 
  <span><span><span>( <span class="type-var">'p</span>, <span class="type-var">'t</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>program:<span>( <span><span><a href="../index.html#type-program">program</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>sub:<span>( <span><span><a href="../index.html#type-sub">sub</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>arg:<span>( <span><span><a href="../index.html#type-arg">arg</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>blk:<span>( <span><span><a href="../index.html#type-blk">blk</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>phi:<span>( <span><span><a href="../index.html#type-phi">phi</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>def:<span>( <span><span><a href="../index.html#type-def">def</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>jmp:<span>( <span><span><a href="../index.html#type-jmp">jmp</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'t</span> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>switch cls t ~program ~sub .. ~jmp</code> performs a pattern matching over a term <code>t</code> based on its type class <code>cls</code>. It is guaranteed that only one function will be called for a term.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-proj" class="anchored"><a href="#val-proj" class="anchor"></a><code><span><span class="keyword">val</span> proj : 
  <span><span><span>( <span class="type-var">'p</span>, <span class="type-var">'t</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?program:<span>( <span><span><a href="../index.html#type-program">program</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?sub:<span>( <span><span><a href="../index.html#type-sub">sub</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?arg:<span>( <span><span><a href="../index.html#type-arg">arg</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?blk:<span>( <span><span><a href="../index.html#type-blk">blk</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?phi:<span>( <span><span><a href="../index.html#type-phi">phi</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?def:<span>( <span><span><a href="../index.html#type-def">def</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?jmp:<span>( <span><span><a href="../index.html#type-jmp">jmp</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'t</span> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p><code>proj cls t ?case</code> a special case of pattern matching, where all cases by default returns <code>None</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-cata" class="anchored"><a href="#val-cata" class="anchor"></a><code><span><span class="keyword">val</span> cata : 
  <span><span><span>( <span class="type-var">'p</span>, <span class="type-var">'t</span> )</span> <a href="../index.html#type-cls">cls</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>init:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?program:<span>( <span><span><a href="../index.html#type-program">program</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?sub:<span>( <span><span><a href="../index.html#type-sub">sub</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?arg:<span>( <span><span><a href="../index.html#type-arg">arg</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?blk:<span>( <span><span><a href="../index.html#type-blk">blk</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?phi:<span>( <span><span><a href="../index.html#type-phi">phi</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?def:<span>( <span><span><a href="../index.html#type-def">def</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?jmp:<span>( <span><span><a href="../index.html#type-jmp">jmp</a> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'t</span> <a href="../index.html#type-term">term</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>cata cls ~init t ?case</code> performs a pattern matching. All methods by default returns <code>init</code>. Note: <code>cata</code> stands for <code>catamorphism</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-slot" class="anchored"><a href="#val-slot" class="anchor"></a><code><span><span class="keyword">val</span> slot : 
  <span><span>( <a href="../../../../bap-core-theory/Bap_core_theory/Theory/Semantics/index.html#type-cls">Bap_core_theory.Theory.Program.Semantics.cls</a>, <span><span><a href="../index.html#type-blk">blk</a> <a href="../index.html#type-term">term</a></span> list</span> )</span>
    <a href="../../../../bap-knowledge/Bap_knowledge/Knowledge/index.html#type-slot">Bap_knowledge.Knowledge.slot</a></span></span></code></div><div class="spec-doc"><p>the graphical representation of the program</p></div></div></div></body></html>