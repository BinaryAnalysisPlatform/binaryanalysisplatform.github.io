<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Backend (bap.Bap.Std.Disasm_expert.Backend)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">bap</a> &#x00BB; <a href="../../../index.html">Bap</a> &#x00BB; <a href="../../index.html">Std</a> &#x00BB; <a href="../index.html">Disasm_expert</a> &#x00BB; Backend</nav><h1>Module <code>Disasm_expert.Backend</code></h1><p>The interface for custom backends.</p><p>This is an OCaml interface for defining custom disassembling backends in pure OCaml. An alternative interface in C++ can be found at disasm.hpp and disasm.h.</p><p>The interface is pretty low-level and mimics one-to-one the existing C interface between OCaml and the C/C++ disassemblers backends, which, in turn, are optimized for performance.</p><p>The <code>Basic.custom</code> function wraps the backend interface and enables seamless integration with the existing <code>Basic.t</code> interface. To make the custom <code>backend</code> available for your <code>encoding</code>, use <code>Basic.register encoding</code> function to register a constructor that uses <code>Basic.custom</code>, e.g.,</p><pre><code class="ml">let () = Basic.register encoding @@ fun target -&gt;
  let dis = create_custom target in
  Ok (Basic.custom ?target encoding backend)</code></pre><p>where <code>create_custom</code> is a user function that creates the custom backend and <code>target</code> contains the detailed information about the target system.</p><p>The <code>Basic.lookup</code> function could be used then to lazily create the disassembler for the given <code>encoding</code>, <code>target</code> pair. The constructor will be called only once for each pair.</p><dl><dt>since</dt><dd>2.2.0</dd></dl></header><dl><dt class="spec type" id="type-predicate"><a href="#type-predicate" class="anchor"></a><code><span class="keyword">type</span> predicate</code><code> = </code><table class="variant"><tr id="type-predicate.Is_true" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_true" class="anchor"></a><code>| </code><code><span class="constructor">Is_true</span></code></td></tr><tr id="type-predicate.Is_invalid" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_invalid" class="anchor"></a><code>| </code><code><span class="constructor">Is_invalid</span></code></td></tr><tr id="type-predicate.Is_return" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_return" class="anchor"></a><code>| </code><code><span class="constructor">Is_return</span></code></td></tr><tr id="type-predicate.Is_call" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_call" class="anchor"></a><code>| </code><code><span class="constructor">Is_call</span></code></td></tr><tr id="type-predicate.Is_barrier" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_barrier" class="anchor"></a><code>| </code><code><span class="constructor">Is_barrier</span></code></td></tr><tr id="type-predicate.Is_terminator" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_terminator" class="anchor"></a><code>| </code><code><span class="constructor">Is_terminator</span></code></td></tr><tr id="type-predicate.Is_branch" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_branch" class="anchor"></a><code>| </code><code><span class="constructor">Is_branch</span></code></td></tr><tr id="type-predicate.Is_indirect_branch" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_indirect_branch" class="anchor"></a><code>| </code><code><span class="constructor">Is_indirect_branch</span></code></td></tr><tr id="type-predicate.Is_conditional_branch" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_conditional_branch" class="anchor"></a><code>| </code><code><span class="constructor">Is_conditional_branch</span></code></td></tr><tr id="type-predicate.Is_unconditional_branch" class="anchored"><td class="def constructor"><a href="#type-predicate.Is_unconditional_branch" class="anchor"></a><code>| </code><code><span class="constructor">Is_unconditional_branch</span></code></td></tr><tr id="type-predicate.May_affect_control_flow" class="anchored"><td class="def constructor"><a href="#type-predicate.May_affect_control_flow" class="anchor"></a><code>| </code><code><span class="constructor">May_affect_control_flow</span></code></td></tr><tr id="type-predicate.May_store" class="anchored"><td class="def constructor"><a href="#type-predicate.May_store" class="anchor"></a><code>| </code><code><span class="constructor">May_store</span></code></td></tr><tr id="type-predicate.May_load" class="anchored"><td class="def constructor"><a href="#type-predicate.May_load" class="anchor"></a><code>| </code><code><span class="constructor">May_load</span></code></td></tr></table></dt><dd><p>possible semantic predicates for instructions</p></dd></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-compare_predicate"><a href="#val-compare_predicate" class="anchor"></a><code><span class="keyword">val</span> compare_predicate : <a href="index.html#type-predicate">predicate</a> <span>&#45;&gt;</span> <a href="index.html#type-predicate">predicate</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-sexp_of_predicate"><a href="#val-sexp_of_predicate" class="anchor"></a><code><span class="keyword">val</span> sexp_of_predicate : <a href="index.html#type-predicate">predicate</a> <span>&#45;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt><dt class="spec value" id="val-predicate_of_sexp"><a href="#val-predicate_of_sexp" class="anchor"></a><code><span class="keyword">val</span> predicate_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#45;&gt;</span> <a href="index.html#type-predicate">predicate</a></code></dt></dl></div></div></div><dl><dt class="spec type" id="type-op"><a href="#type-op" class="anchor"></a><code><span class="keyword">type</span> op</code><code> = </code><table class="variant"><tr id="type-op.Reg" class="anchored"><td class="def constructor"><a href="#type-op.Reg" class="anchor"></a><code>| </code><code><span class="constructor">Reg</span></code></td><td class="doc"><p>a register</p></td></tr><tr id="type-op.Imm" class="anchored"><td class="def constructor"><a href="#type-op.Imm" class="anchor"></a><code>| </code><code><span class="constructor">Imm</span></code></td><td class="doc"><p>an integer immediate</p></td></tr><tr id="type-op.Fmm" class="anchored"><td class="def constructor"><a href="#type-op.Fmm" class="anchor"></a><code>| </code><code><span class="constructor">Fmm</span></code></td><td class="doc"><p>a floating-point immediate</p></td></tr><tr id="type-op.Insn" class="anchored"><td class="def constructor"><a href="#type-op.Insn" class="anchor"></a><code>| </code><code><span class="constructor">Insn</span></code></td><td class="doc"><p>a sub-instruction</p></td></tr></table></dt><dd><p>operand types</p></dd></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-compare_op"><a href="#val-compare_op" class="anchor"></a><code><span class="keyword">val</span> compare_op : <a href="index.html#type-op">op</a> <span>&#45;&gt;</span> <a href="index.html#type-op">op</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-sexp_of_op"><a href="#val-sexp_of_op" class="anchor"></a><code><span class="keyword">val</span> sexp_of_op : <a href="index.html#type-op">op</a> <span>&#45;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt><dt class="spec value" id="val-op_of_sexp"><a href="#val-op_of_sexp" class="anchor"></a><code><span class="keyword">val</span> op_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#45;&gt;</span> <a href="index.html#type-op">op</a></code></dt></dl></div></div></div><dl><dt class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The backend interface.</p></dd></dl></div></body></html>