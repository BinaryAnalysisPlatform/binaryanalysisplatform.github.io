<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Backend (bap.Bap.Std.Disasm_expert.Backend)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">bap</a> &#x00BB; <a href="../../../index.html">Bap</a> &#x00BB; <a href="../../index.html">Std</a> &#x00BB; <a href="../index.html">Disasm_expert</a> &#x00BB; Backend</nav><header class="odoc-preamble"><h1>Module <code><span>Disasm_expert.Backend</span></code></h1><p>The interface for custom backends.</p><p>This is an OCaml interface for defining custom disassembling backends in pure OCaml. An alternative interface in C++ can be found at disasm.hpp and disasm.h.</p><p>The interface is pretty low-level and mimics one-to-one the existing C interface between OCaml and the C/C++ disassemblers backends, which, in turn, are optimized for performance.</p><p>The <code>Basic.custom</code> function wraps the backend interface and enables seamless integration with the existing <code>Basic.t</code> interface. To make the custom <code>backend</code> available for your <code>encoding</code>, use <code>Basic.register encoding</code> function to register a constructor that uses <code>Basic.custom</code>, e.g.,</p><pre class="language-ocaml"><code>let () = Basic.register encoding @@ fun target -&gt;
  let dis = create_custom target in
  Ok (Basic.custom ?target encoding backend)</code></pre><p>where <code>create_custom</code> is a user function that creates the custom backend and <code>target</code> contains the detailed information about the target system.</p><p>The <code>Basic.lookup</code> function could be used then to lazily create the disassembler for the given <code>encoding</code>, <code>target</code> pair. The constructor will be called only once for each pair.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.2.0</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-predicate"><a href="#type-predicate" class="anchor"></a><code><span><span class="keyword">type</span> predicate</span><span> = </span></code><ol><li id="type-predicate.Is_true" class="def variant constructor anchored"><a href="#type-predicate.Is_true" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_true</span></span></code></li><li id="type-predicate.Is_invalid" class="def variant constructor anchored"><a href="#type-predicate.Is_invalid" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_invalid</span></span></code></li><li id="type-predicate.Is_return" class="def variant constructor anchored"><a href="#type-predicate.Is_return" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_return</span></span></code></li><li id="type-predicate.Is_call" class="def variant constructor anchored"><a href="#type-predicate.Is_call" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_call</span></span></code></li><li id="type-predicate.Is_barrier" class="def variant constructor anchored"><a href="#type-predicate.Is_barrier" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_barrier</span></span></code></li><li id="type-predicate.Is_terminator" class="def variant constructor anchored"><a href="#type-predicate.Is_terminator" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_terminator</span></span></code></li><li id="type-predicate.Is_branch" class="def variant constructor anchored"><a href="#type-predicate.Is_branch" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_branch</span></span></code></li><li id="type-predicate.Is_indirect_branch" class="def variant constructor anchored"><a href="#type-predicate.Is_indirect_branch" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_indirect_branch</span></span></code></li><li id="type-predicate.Is_conditional_branch" class="def variant constructor anchored"><a href="#type-predicate.Is_conditional_branch" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_conditional_branch</span></span></code></li><li id="type-predicate.Is_unconditional_branch" class="def variant constructor anchored"><a href="#type-predicate.Is_unconditional_branch" class="anchor"></a><code><span>| </span><span><span class="constructor">Is_unconditional_branch</span></span></code></li><li id="type-predicate.May_affect_control_flow" class="def variant constructor anchored"><a href="#type-predicate.May_affect_control_flow" class="anchor"></a><code><span>| </span><span><span class="constructor">May_affect_control_flow</span></span></code></li><li id="type-predicate.May_store" class="def variant constructor anchored"><a href="#type-predicate.May_store" class="anchor"></a><code><span>| </span><span><span class="constructor">May_store</span></span></code></li><li id="type-predicate.May_load" class="def variant constructor anchored"><a href="#type-predicate.May_load" class="anchor"></a><code><span>| </span><span><span class="constructor">May_load</span></span></code></li></ol></div><div class="spec-doc"><p>possible semantic predicates for instructions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare_predicate"><a href="#val-compare_predicate" class="anchor"></a><code><span><span class="keyword">val</span> compare_predicate : <span><a href="#type-predicate">predicate</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-predicate">predicate</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_predicate"><a href="#val-sexp_of_predicate" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_predicate : <span><a href="#type-predicate">predicate</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppx_sexp_conv_lib</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-predicate_of_sexp"><a href="#val-predicate_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> predicate_of_sexp : <span><span class="xref-unresolved">Ppx_sexp_conv_lib</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-predicate">predicate</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-op"><a href="#type-op" class="anchor"></a><code><span><span class="keyword">type</span> op</span><span> = </span></code><ol><li id="type-op.Reg" class="def variant constructor anchored"><a href="#type-op.Reg" class="anchor"></a><code><span>| </span><span><span class="constructor">Reg</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>a register</p><span class="comment-delim">*)</span></div></li><li id="type-op.Imm" class="def variant constructor anchored"><a href="#type-op.Imm" class="anchor"></a><code><span>| </span><span><span class="constructor">Imm</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>an integer immediate</p><span class="comment-delim">*)</span></div></li><li id="type-op.Fmm" class="def variant constructor anchored"><a href="#type-op.Fmm" class="anchor"></a><code><span>| </span><span><span class="constructor">Fmm</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>a floating-point immediate</p><span class="comment-delim">*)</span></div></li><li id="type-op.Insn" class="def variant constructor anchored"><a href="#type-op.Insn" class="anchor"></a><code><span>| </span><span><span class="constructor">Insn</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>a sub-instruction</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>operand types</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare_op"><a href="#val-compare_op" class="anchor"></a><code><span><span class="keyword">val</span> compare_op : <span><a href="#type-op">op</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-op">op</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_op"><a href="#val-sexp_of_op" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_op : <span><a href="#type-op">op</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppx_sexp_conv_lib</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-op_of_sexp"><a href="#val-op_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> op_of_sexp : <span><span class="xref-unresolved">Ppx_sexp_conv_lib</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-op">op</a></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The backend interface.</p></div></div></div></body></html>