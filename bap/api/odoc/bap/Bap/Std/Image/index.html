<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Image (bap.Bap.Std.Image)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">bap</a> &#x00BB; <a href="../../index.html">Bap</a> &#x00BB; <a href="../index.html">Std</a> &#x00BB; Image</nav><h1>Module <code>Std.Image</code></h1><p>Binary Image.</p><nav class="toc"><ul><li><a href="#type-definitions">Type definitions</a></li><li><a href="#constructing">Constructing</a></li><li><a href="#attributes">Attributes</a></li><li><a href="#tables">Tables</a></li><li><a href="#tags">Tags</a></li><li><a href="#mappings">Mappings</a></li><li><a href="#backend-interface">Backend Interface</a></li><li><a href="#internals">Internals</a></li></ul></nav></header><section><header><h3 id="type-definitions"><a href="#type-definitions" class="anchor"></a>Type definitions</h3></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = <a href="../index.html#type-image">image</a></code></dt><dd><p>image</p></dd></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span class="keyword">val</span> sexp_of_t : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt></dl></div></div></div><dl><dt class="spec type" id="type-segment"><a href="#type-segment" class="anchor"></a><code><span class="keyword">type</span> segment</code></dt><dd><p>segment</p><p>symbol</p></dd></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-bin_segment"><a href="#val-bin_segment" class="anchor"></a><code><span class="keyword">val</span> bin_segment : <span><a href="index.html#type-segment">segment</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></span></code></dt><dt class="spec value" id="val-bin_read_segment"><a href="#val-bin_read_segment" class="anchor"></a><code><span class="keyword">val</span> bin_read_segment : <span><a href="index.html#type-segment">segment</a> <a href="../../../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></span></code></dt><dt class="spec value" id="val-__bin_read_segment__"><a href="#val-__bin_read_segment__" class="anchor"></a><code><span class="keyword">val</span> __bin_read_segment__ : <span><span>(int <span>&#45;&gt;</span> <a href="index.html#type-segment">segment</a>)</span> <a href="../../../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></span></code></dt><dt class="spec value" id="val-bin_reader_segment"><a href="#val-bin_reader_segment" class="anchor"></a><code><span class="keyword">val</span> bin_reader_segment : <span><a href="index.html#type-segment">segment</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-reader">Bin_prot.Type_class.reader</a></span></code></dt><dt class="spec value" id="val-bin_size_segment"><a href="#val-bin_size_segment" class="anchor"></a><code><span class="keyword">val</span> bin_size_segment : <span><a href="index.html#type-segment">segment</a> <a href="../../../../bin_prot/Bin_prot/Size/index.html#type-sizer">Bin_prot.Size.sizer</a></span></code></dt><dt class="spec value" id="val-bin_write_segment"><a href="#val-bin_write_segment" class="anchor"></a><code><span class="keyword">val</span> bin_write_segment : <span><a href="index.html#type-segment">segment</a> <a href="../../../../bin_prot/Bin_prot/Write/index.html#type-writer">Bin_prot.Write.writer</a></span></code></dt><dt class="spec value" id="val-bin_writer_segment"><a href="#val-bin_writer_segment" class="anchor"></a><code><span class="keyword">val</span> bin_writer_segment : <span><a href="index.html#type-segment">segment</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-writer">Bin_prot.Type_class.writer</a></span></code></dt><dt class="spec value" id="val-bin_shape_segment"><a href="#val-bin_shape_segment" class="anchor"></a><code><span class="keyword">val</span> bin_shape_segment : <a href="../../../../bin_prot/Bin_prot/Shape/index.html#type-t">Bin_prot.Shape.t</a></code></dt><dt class="spec value" id="val-compare_segment"><a href="#val-compare_segment" class="anchor"></a><code><span class="keyword">val</span> compare_segment : <a href="index.html#type-segment">segment</a> <span>&#45;&gt;</span> <a href="index.html#type-segment">segment</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-segment_of_sexp"><a href="#val-segment_of_sexp" class="anchor"></a><code><span class="keyword">val</span> segment_of_sexp : <a href="../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-segment">segment</a></code></dt><dt class="spec value" id="val-sexp_of_segment"><a href="#val-sexp_of_segment" class="anchor"></a><code><span class="keyword">val</span> sexp_of_segment : <a href="index.html#type-segment">segment</a> <span>&#45;&gt;</span> <a href="../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt></dl></div></div></div><dl><dt class="spec type" id="type-symbol"><a href="#type-symbol" class="anchor"></a><code><span class="keyword">type</span> symbol</code></dt><dd><p>symbol</p></dd></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-bin_symbol"><a href="#val-bin_symbol" class="anchor"></a><code><span class="keyword">val</span> bin_symbol : <span><a href="index.html#type-symbol">symbol</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></span></code></dt><dt class="spec value" id="val-bin_read_symbol"><a href="#val-bin_read_symbol" class="anchor"></a><code><span class="keyword">val</span> bin_read_symbol : <span><a href="index.html#type-symbol">symbol</a> <a href="../../../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></span></code></dt><dt class="spec value" id="val-__bin_read_symbol__"><a href="#val-__bin_read_symbol__" class="anchor"></a><code><span class="keyword">val</span> __bin_read_symbol__ : <span><span>(int <span>&#45;&gt;</span> <a href="index.html#type-symbol">symbol</a>)</span> <a href="../../../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></span></code></dt><dt class="spec value" id="val-bin_reader_symbol"><a href="#val-bin_reader_symbol" class="anchor"></a><code><span class="keyword">val</span> bin_reader_symbol : <span><a href="index.html#type-symbol">symbol</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-reader">Bin_prot.Type_class.reader</a></span></code></dt><dt class="spec value" id="val-bin_size_symbol"><a href="#val-bin_size_symbol" class="anchor"></a><code><span class="keyword">val</span> bin_size_symbol : <span><a href="index.html#type-symbol">symbol</a> <a href="../../../../bin_prot/Bin_prot/Size/index.html#type-sizer">Bin_prot.Size.sizer</a></span></code></dt><dt class="spec value" id="val-bin_write_symbol"><a href="#val-bin_write_symbol" class="anchor"></a><code><span class="keyword">val</span> bin_write_symbol : <span><a href="index.html#type-symbol">symbol</a> <a href="../../../../bin_prot/Bin_prot/Write/index.html#type-writer">Bin_prot.Write.writer</a></span></code></dt><dt class="spec value" id="val-bin_writer_symbol"><a href="#val-bin_writer_symbol" class="anchor"></a><code><span class="keyword">val</span> bin_writer_symbol : <span><a href="index.html#type-symbol">symbol</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-writer">Bin_prot.Type_class.writer</a></span></code></dt><dt class="spec value" id="val-bin_shape_symbol"><a href="#val-bin_shape_symbol" class="anchor"></a><code><span class="keyword">val</span> bin_shape_symbol : <a href="../../../../bin_prot/Bin_prot/Shape/index.html#type-t">Bin_prot.Shape.t</a></code></dt><dt class="spec value" id="val-compare_symbol"><a href="#val-compare_symbol" class="anchor"></a><code><span class="keyword">val</span> compare_symbol : <a href="index.html#type-symbol">symbol</a> <span>&#45;&gt;</span> <a href="index.html#type-symbol">symbol</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-symbol_of_sexp"><a href="#val-symbol_of_sexp" class="anchor"></a><code><span class="keyword">val</span> symbol_of_sexp : <a href="../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-symbol">symbol</a></code></dt><dt class="spec value" id="val-sexp_of_symbol"><a href="#val-sexp_of_symbol" class="anchor"></a><code><span class="keyword">val</span> sexp_of_symbol : <a href="index.html#type-symbol">symbol</a> <span>&#45;&gt;</span> <a href="../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt></dl></div></div></div><dl><dt class="spec type" id="type-path"><a href="#type-path" class="anchor"></a><code><span class="keyword">type</span> path</code><code> = string</code></dt></dl></section><section><header><h3 id="constructing"><a href="#constructing" class="anchor"></a>Constructing</h3></header><dl><dt class="spec type" id="type-result"><a href="#type-result" class="anchor"></a><code><span class="keyword">type</span> result</code><code> = <span><span>(<a href="index.html#type-t">t</a> * <span><a href="../../../../core_kernel/Core_kernel/Error/index.html#type-t">Core_kernel.Error.t</a> list</span>)</span> <a href="../../../../core_kernel/Core_kernel/Or_error/index.html#type-t">Core_kernel.Or_error.t</a></span></code></dt><dd><p>constructing an image can result in actual image and a set (hopefully empty) of errors occurred in a process of decoding an image, that do not prevent us from actually creating an image. So, this information messages can be considered as warnings.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <span>?&#8288;backend:string</span> <span>&#45;&gt;</span> <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <a href="index.html#type-result">result</a></code></dt><dd><p><code>create ?backend filename</code> creates an image of the file specified specified by the <code>filename</code>. If <code>backend</code> is equal to &quot;auto&quot;, then all backends are tried in order. If only one backend can read this file (i.e., there is no ambiguity), then image is returned. If <code>backend</code> is not specified, then the LLVM backend is used.</p></dd></dl><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val</span> of_string : <span>?&#8288;backend:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-result">result</a></code></dt><dd><p><code>of_string ?backend ~data</code> creates an image from the specified <code>data</code>. See <a href="index.html#val-create"><code>create</code></a> for <code>backend</code> parameter.</p></dd></dl><dl><dt class="spec value" id="val-of_bigstring"><a href="#val-of_bigstring" class="anchor"></a><code><span class="keyword">val</span> of_bigstring : <span>?&#8288;backend:string</span> <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Bigstring/index.html#type-t">Core_kernel.Bigstring.t</a> <span>&#45;&gt;</span> <a href="index.html#type-result">result</a></code></dt><dd><p><code>of_bigstring ?backend ~data</code> creates an image from the specified <code>data</code>. See <a href="index.html#val-create"><code>create</code></a> for <code>backend</code> parameter.</p></dd></dl></section><section><header><h3 id="attributes"><a href="#attributes" class="anchor"></a>Attributes</h3></header><dl><dt class="spec value" id="val-entry_point"><a href="#val-entry_point" class="anchor"></a><code><span class="keyword">val</span> entry_point : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-addr">addr</a></code></dt><dd><p><code>entry_point addr</code> is an address from which a kernel should start</p><p><code>filename image</code> a name of file from which an image was loaded (if any)</p></dd></dl><dl><dt class="spec value" id="val-filename"><a href="#val-filename" class="anchor"></a><code><span class="keyword">val</span> filename : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p><code>filename image</code> a name of file from which an image was loaded (if any)</p></dd></dl><dl><dt class="spec value" id="val-arch"><a href="#val-arch" class="anchor"></a><code><span class="keyword">val</span> arch : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-arch">arch</a></code></dt><dd><p><code>arch image</code> code architecture</p></dd></dl><dl><dt class="spec value" id="val-addr_size"><a href="#val-addr_size" class="anchor"></a><code><span class="keyword">val</span> addr_size : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-addr_size">addr_size</a></code></dt><dd><p><code>addr_size image</code> same as <code>Arch.addr_size (Image.arch image)</code></p></dd></dl><dl><dt class="spec value" id="val-endian"><a href="#val-endian" class="anchor"></a><code><span class="keyword">val</span> endian : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-endian">endian</a></code></dt><dd><p><code>endian image</code> same as <code>Arch.endian (Image.arch image)</code></p></dd></dl></section><section><header><h3 id="tables"><a href="#tables" class="anchor"></a>Tables</h3></header><dl><dt class="spec value" id="val-words"><a href="#val-words" class="anchor"></a><code><span class="keyword">val</span> words : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-size">size</a> <span>&#45;&gt;</span> <span><a href="../index.html#type-word">word</a> <a href="../index.html#type-table">table</a></span></code></dt><dd><p><code>words image size</code> returns a mapping from addresses to words of the specified <code>size</code>. For example, <code>Image.words img `r8</code> returns all bytes.</p></dd></dl><dl><dt class="spec value" id="val-segments"><a href="#val-segments" class="anchor"></a><code><span class="keyword">val</span> segments : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-segment">segment</a> <a href="../index.html#type-table">table</a></span></code></dt><dd><p><code>segments image</code> returns a mapping from addresses to segments</p></dd></dl><dl><dt class="spec value" id="val-symbols"><a href="#val-symbols" class="anchor"></a><code><span class="keyword">val</span> symbols : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-symbol">symbol</a> <a href="../index.html#type-table">table</a></span></code></dt><dd><p><code>symbols image</code> returns a mapping from addresses to symbols</p></dd></dl></section><section><header><h3 id="tags"><a href="#tags" class="anchor"></a>Tags</h3></header><dl><dt class="spec value" id="val-segment"><a href="#val-segment" class="anchor"></a><code><span class="keyword">val</span> segment : <span><a href="index.html#type-segment">segment</a> <a href="../index.html#type-tag">tag</a></span></code></dt><dd><p>tags a segment</p></dd></dl><dl><dt class="spec value" id="val-symbol"><a href="#val-symbol" class="anchor"></a><code><span class="keyword">val</span> symbol : <span>string <a href="../index.html#type-tag">tag</a></span></code></dt><dd><p>tags a symbol</p></dd></dl><dl><dt class="spec value" id="val-section"><a href="#val-section" class="anchor"></a><code><span class="keyword">val</span> section : <span>string <a href="../index.html#type-tag">tag</a></span></code></dt><dd><p>tags a section</p></dd></dl><dl><dt class="spec value" id="val-code_region"><a href="#val-code_region" class="anchor"></a><code><span class="keyword">val</span> code_region : <span>unit <a href="../index.html#type-tag">tag</a></span></code></dt><dd><p>tags a code region</p></dd></dl><dl><dt class="spec value" id="val-specification"><a href="#val-specification" class="anchor"></a><code><span class="keyword">val</span> specification : <span><a href="../../../../ogre/Ogre/index.html#type-doc">Ogre.doc</a> <a href="../index.html#type-tag">tag</a></span></code></dt><dd><p>an image specification in OGRE</p></dd></dl><dl><dt class="spec value" id="val-memory"><a href="#val-memory" class="anchor"></a><code><span class="keyword">val</span> memory : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../index.html#type-value">value</a> <a href="../index.html#type-memmap">memmap</a></span></code></dt><dd><p>returns memory, annotated with tags</p></dd></dl></section><section><header><h3 id="mappings"><a href="#mappings" class="anchor"></a>Mappings</h3></header><dl><dt class="spec value" id="val-memory_of_segment"><a href="#val-memory_of_segment" class="anchor"></a><code><span class="keyword">val</span> memory_of_segment : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-segment">segment</a> <span>&#45;&gt;</span> <a href="../index.html#type-mem">mem</a></code></dt><dd><p><code>memory_of_segment img seg</code> returns a memory region occupied by the segment <code>seg</code>.</p></dd></dl><dl><dt class="spec value" id="val-memory_of_symbol"><a href="#val-memory_of_symbol" class="anchor"></a><code><span class="keyword">val</span> memory_of_symbol : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-symbol">symbol</a> <span>&#45;&gt;</span> <a href="../index.html#type-mem">mem</a> * <span><a href="../index.html#type-mem">mem</a> <a href="../index.html#type-seq">seq</a></span></code></dt><dd><p><code>memory_of_symbol sym</code> returns a sequence of memory regions that belong to the <code>sym</code> symbol. The sequence is represented as a pair, where the first element is the starting memory region, and the second elemnt is (a possible empty) sequence of the rest memory regions (in case if a symbol occupies a non-contigious region of memory).</p></dd></dl><dl><dt class="spec value" id="val-symbols_of_segment"><a href="#val-symbols_of_segment" class="anchor"></a><code><span class="keyword">val</span> symbols_of_segment : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-segment">segment</a> <span>&#45;&gt;</span> <span><a href="index.html#type-symbol">symbol</a> <a href="../index.html#type-seq">seq</a></span></code></dt><dd><p><code>symbols_of_segment img seg</code> all symbols that belong to the <code>seg</code> segment.</p></dd></dl><dl><dt class="spec value" id="val-segment_of_symbol"><a href="#val-segment_of_symbol" class="anchor"></a><code><span class="keyword">val</span> segment_of_symbol : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-symbol">symbol</a> <span>&#45;&gt;</span> <a href="index.html#type-segment">segment</a></code></dt><dd><p><code>segment_of_symbol image sym</code> a segment to which <code>sym</code> belongs.</p></dd></dl><dl><dt class="spec module" id="module-Segment"><a href="#module-Segment" class="anchor"></a><code><span class="keyword">module</span> <a href="Segment/index.html">Segment</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Image Segments. Segment is a contiguous region of memory that has permissions. The same as segment in ELF.</p></dd></dl><dl><dt class="spec module" id="module-Symbol"><a href="#module-Symbol" class="anchor"></a><code><span class="keyword">module</span> <a href="Symbol/index.html">Symbol</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Symbol.</p></dd></dl></section><section><header><h3 id="backend-interface"><a href="#backend-interface" class="anchor"></a>Backend Interface</h3></header><dl><dt class="spec module-type" id="module-type-Loader"><a href="#module-type-Loader" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Loader/index.html">Loader</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>An interface that a backend shall implement.</p></dd></dl><dl><dt class="spec value" id="val-register_loader"><a href="#val-register_loader" class="anchor"></a><code><span class="keyword">val</span> register_loader : <span>name:string</span> <span>&#45;&gt;</span> <span>(<span class="keyword">module</span> <a href="module-type-Loader/index.html">Loader</a>)</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>register_loader ~name backend</code> registers new loader.</p></dd></dl><dl><dt class="spec value" id="val-available_backends"><a href="#val-available_backends" class="anchor"></a><code><span class="keyword">val</span> available_backends : unit <span>&#45;&gt;</span> <span>string list</span></code></dt><dd><p>lists all registered backends</p></dd></dl><dl><dt class="spec value" id="val-register_backend"><a href="#val-register_backend" class="anchor"></a><code><span class="keyword">val</span> register_backend : <span>name:string</span> <span>&#45;&gt;</span> <a href="../Backend/index.html#type-t">Backend.t</a> <span>&#45;&gt;</span> <span>[ `Ok <span>| `Duplicate</span> ]</span></code></dt><dd><p><code>register_backend ~name backend</code> tries to register <code>backend</code> under the specified <code>name</code>.</p><dl><dt>deprecated</dt><dd><p>use register_loader instead</p></dd></dl></dd></dl></section><section><header><h3 id="internals"><a href="#internals" class="anchor"></a>Internals</h3><p>Access to the low-level internals.</p></header><dl><dt class="spec value" id="val-data"><a href="#val-data" class="anchor"></a><code><span class="keyword">val</span> data : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Bigstring/index.html#type-t">Core_kernel.Bigstring.t</a></code></dt><dd><p><code>data image</code> returns image data. Usually it is a memory mapped input file, or it is whatever was passed to <code>of_[big]string</code>.</p></dd></dl><dl><dt class="spec value" id="val-spec"><a href="#val-spec" class="anchor"></a><code><span class="keyword">val</span> spec : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../../ogre/Ogre/index.html#type-doc">Ogre.doc</a></code></dt><dd><p><code>spec image</code> returns the image specification.</p><dl><dt>since</dt><dd>1.3</dd></dl></dd></dl><dl><dt class="spec module" id="module-Scheme"><a href="#module-Scheme" class="anchor"></a><code><span class="keyword">module</span> <a href="Scheme/index.html">Scheme</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A scheme of image specification.</p></dd></dl></section></div></body></html>