<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Log (bap.Bap.Std.Log)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">bap</a> &#x00BB; <a href="../../index.html">Bap</a> &#x00BB; <a href="../index.html">Std</a> &#x00BB; Log</nav><h1>Module <code>Std.Log</code></h1><p>Default Logger.</p><p>The logger will capture <a href="../Event/Log/index.html"><code>Event.Log</code></a> events and print them into the log file, that is located at <code>$BAP_LOG_DIR/log</code> or, if <code>$BAP_LOG_DIR</code> is undefined, then it is in the <code>$XDG_STATE_HOME/bap/log</code> folder, and if this variable is also undefined, then the log will be at <code>$HOME/.local/stat/bap</code> or if even $HOME is undefined, then it will be in the system temporary folder under name <code>bap.log</code>.</p><p>Every time a logger is started the logs in the folder will be rotated. Previous logs will be accessed as <code>NAME~AGE</code>, where <code>NAME</code> is the name of the log file, and <code>AGE</code> is the age of the log (in calls to <code>start</code> function). For example, if the name is <code>log</code>, then the previous log will be in the file <code>log~1</code>.</p><p>The maximum age of the log can be set via environment variable <code>BAP_BACKLOG</code> and it defaults to <code>99</code>, i.e., the oldest log file will have name <code>log~99</code>.</p></header><dl><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : ?&#8288;logdir:string <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Starts event logging.</p><p>A file named <code>log</code> is created in the <code>logdir</code> folder. If such file already exists in this folder, then the log rotation is initated - the existing <code>log</code> file is renamed to <code>log~1</code>, <code>log~1</code> to <code>log~2</code> and so on until there are no more files to rename, or the <code>log~99</code> is reached which is discarded (unlinked).</p><p>Events of type <code>Event.Log.event</code> are printed to the log file. Events of the <code>Event.Log.Error</code> level are also duplicated to the <code>stderr</code> output.</p><p>If it wasn't possible to create the destination log file, then all events will be logged into the <code>stderr</code> output.</p><p>If <code>logdir</code> is not specified then the <code>XDG_STATE_HOME</code> variable is looked up in the environment. If it is present, then the logging will be performed in the <code>$XDG_STATE_HOME/bap</code>. Otherwise, the logging will be performed in the <code>$HOME/.local/state/bap</code> folder, if the <code>HOME</code> variable is present in the environment. If <code>HOME</code> is not present, then a <code>bap.log</code> folder will be created in the system temporary folder and used for logging.</p></dd></dl></div></body></html>