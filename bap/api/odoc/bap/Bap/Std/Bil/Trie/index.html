<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Trie (bap.Bap.Std.Bil.Trie)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../../index.html">bap</a> &#x00BB; <a href="../../../index.html">Bap</a> &#x00BB; <a href="../../index.html">Std</a> &#x00BB; <a href="../index.html">Bil</a> &#x00BB; Trie</nav><h1>Module <code>Bil.Trie</code></h1><p>Tries on BIL.</p><p>Bil provides two prefix tries trees.</p><p>The default one is not normalized and will compare bil statements literally. This means that comparison is sensitive to variable names and immediate values. Depending on your context it may be find or not. For example, two <code>SP</code> variables may compare as different if one of them was obtained from different compilation (and met the other one through some persistent storage, e.g., file on hard disk). Moreover, BIL obtained from different lifters will have different names for the same registers. All this issues are addressed in normalized <code>Trie</code>.</p></header><dl><dt class="spec type" id="type-normalized_bil"><a href="#type-normalized_bil" class="anchor"></a><code><span class="keyword">type</span> normalized_bil</code></dt></dl><dl><dt class="spec value" id="val-normalize"><a href="#val-normalize" class="anchor"></a><code><span class="keyword">val</span> normalize : <span>?&#8288;subst:<span><span>(<a href="../index.html#type-exp">exp</a> * <a href="../index.html#type-exp">exp</a>)</span> list</span></span> <span>&#45;&gt;</span> <span><a href="../index.html#type-stmt">stmt</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-normalized_bil">normalized_bil</a></code></dt><dd><p><code>normalize ?subst bil</code> normalize BIL. If <code>subst</code> is provided, then substitute each occurrence of the fst expression to the snd expression before the normalization. The effect of normalization is the following:</p><p>1. All immediate values are compared equal 2. All variables are compared nominally 3. BIL is simplified to reduce the syntactic differences (but the comparison is still syntactic, and (x + 2) will be compared differently to (2 + x).</p></dd></dl><div class="spec module" id="module-Normalized"><a href="#module-Normalized" class="anchor"></a><code><span class="keyword">module</span> <a href="Normalized/index.html">Normalized</a> : <a href="../../Trie/index.html#module-type-S">Trie.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../Trie/module-type-S/index.html#type-key">key</a> = <a href="index.html#type-normalized_bil">normalized_bil</a></code></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../Trie/index.html#module-type-S">Trie.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../Trie/module-type-S/index.html#type-key">key</a> = <span><a href="../index.html#type-stmt">stmt</a> list</span></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>trie can store arbitrary data</p></dd></dl><div><div class="spec include"><div class="doc"><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../../../../bin_prot/Bin_prot/Binable/index.html#module-type-S1">Bin_prot.Binable.S1</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="../../../../../bin_prot/Bin_prot/Binable/module-type-S1/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt></dl><dl><dt class="spec value" id="val-bin_shape_t"><a href="#val-bin_shape_t" class="anchor"></a><code><span class="keyword">val</span> bin_shape_t : <a href="../../../../../bin_prot/Bin_prot/Shape/index.html#type-t">Bin_prot.Shape.t</a> <span>&#45;&gt;</span> <a href="../../../../../bin_prot/Bin_prot/Shape/index.html#type-t">Bin_prot.Shape.t</a></code></dt><dt class="spec value" id="val-bin_size_t"><a href="#val-bin_size_t" class="anchor"></a><code><span class="keyword">val</span> bin_size_t : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <a href="../../../../../bin_prot/Bin_prot/Size/index.html#type-sizer1">Bin_prot.Size.sizer1</a></span></code></dt><dt class="spec value" id="val-bin_write_t"><a href="#val-bin_write_t" class="anchor"></a><code><span class="keyword">val</span> bin_write_t : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <a href="../../../../../bin_prot/Bin_prot/Write/index.html#type-writer1">Bin_prot.Write.writer1</a></span></code></dt><dt class="spec value" id="val-bin_read_t"><a href="#val-bin_read_t" class="anchor"></a><code><span class="keyword">val</span> bin_read_t : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <a href="../../../../../bin_prot/Bin_prot/Read/index.html#type-reader1">Bin_prot.Read.reader1</a></span></code></dt><dt class="spec value" id="val-__bin_read_t__"><a href="#val-__bin_read_t__" class="anchor"></a><code><span class="keyword">val</span> __bin_read_t__ : <span><span>(<span class="type-var">'a</span>, int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <a href="../../../../../bin_prot/Bin_prot/Read/index.html#type-reader1">Bin_prot.Read.reader1</a></span></code></dt><dt class="spec value" id="val-bin_writer_t"><a href="#val-bin_writer_t" class="anchor"></a><code><span class="keyword">val</span> bin_writer_t : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <a href="../../../../../bin_prot/Bin_prot/Type_class/S1/index.html#type-writer">Bin_prot.Type_class.S1.writer</a></span></code></dt><dt class="spec value" id="val-bin_reader_t"><a href="#val-bin_reader_t" class="anchor"></a><code><span class="keyword">val</span> bin_reader_t : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <a href="../../../../../bin_prot/Bin_prot/Type_class/S1/index.html#type-reader">Bin_prot.Type_class.S1.reader</a></span></code></dt><dt class="spec value" id="val-bin_t"><a href="#val-bin_t" class="anchor"></a><code><span class="keyword">val</span> bin_t : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <a href="../../../../../bin_prot/Bin_prot/Type_class/S1/index.html#type-t">Bin_prot.Type_class.S1.t</a></span></code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../../../../sexplib0/Sexplib0/Sexpable/index.html#module-type-S1">Ppx_sexp_conv_lib.Sexpable.S1</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="../../../../../sexplib0/Sexplib0/Sexpable/module-type-S1/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt></dl><dl><dt class="spec value" id="val-t_of_sexp"><a href="#val-t_of_sexp" class="anchor"></a><code><span class="keyword">val</span> t_of_sexp : <span>(<a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Sexplib0.Sexp.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Sexplib0.Sexp.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span class="keyword">val</span> sexp_of_t : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Sexplib0.Sexp.t</a>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Sexplib0.Sexp.t</a></code></dt></dl></details></div></div></div></div></div></div><dl><dt class="spec type" id="type-key"><a href="#type-key" class="anchor"></a><code><span class="keyword">type</span> key</code><code> = <span><a href="../index.html#type-stmt">stmt</a> list</span></code></dt><dd><p>a key type that is used to lookup data</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>create ()</code> creates new empty trie</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>key:<a href="index.html#type-key">key</a></span> <span>&#45;&gt;</span> <span>data:<span class="type-var">'a</span></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>add trie ~key ~data</code> associates <code>data</code> with <code>key</code>. If <code>trie</code> already has some value associated with <code>key</code>, then the value will be overwritten (rebound)</p></dd></dl><dl><dt class="spec value" id="val-change"><a href="#val-change" class="anchor"></a><code><span class="keyword">val</span> change : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span>(<span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>change trie key f</code> if trie has <code>data</code> associated with <code>key</code> then <code>f</code> will be called with <code>Some data</code>, otherwise it will be called with <code>None</code>. If <code>f</code> returns <code>None</code> then there will be no data associated with <code>key</code>, if <code>f</code> returns <code>Some thing</code>, then <code>thing</code> will be associated with <code>key</code></p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></dt><dd><p><code>find trie key</code> finds data associated with <code>key</code></p></dd></dl><dl><dt class="spec value" id="val-walk"><a href="#val-walk" class="anchor"></a><code><span class="keyword">val</span> walk : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span>init:<span class="type-var">'b</span></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span></span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>walk trie key ~init ~f</code> walks down the tree starting from the root and ending with the last token of the key. Function <code>f</code> is fold over values associated with all substrings of the key, starting from a zero substring.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>remove trie key</code> removes value bound with <code>key</code> if any.</p></dd></dl><dl><dt class="spec value" id="val-longest_match"><a href="#val-longest_match" class="anchor"></a><code><span class="keyword">val</span> longest_match : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span><span>(int * <span class="type-var">'a</span>)</span> option</span></code></dt><dd><p><code>longest_match trie key</code> find a value associated with a longest substring of <code>key</code>. Returns a pair - a length of matched key and the value, associated with that key.</p></dd></dl><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p><code>length trie</code> returns the number of values in <code>trie</code></p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span>(<a href="../../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <a href="../../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp pp_val</code> creates a printer for a given value printer <code>pp_val</code>. Example:</p><p><code>let int_trie = String.Trie.pp pp_int</code></p><p>will create a printer for a <code>String.Trie</code> that is populated by integers.</p></dd></dl></details></div></div></div></div></body></html>