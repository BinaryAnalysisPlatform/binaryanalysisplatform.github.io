<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Reconstructor (bap.Bap.Std.Reconstructor)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">bap</a> &#x00BB; <a href="../../index.html">Bap</a> &#x00BB; <a href="../index.html">Std</a> &#x00BB; Reconstructor</nav><header class="odoc-preamble"><h1>Module <code><span>Std.Reconstructor</span></code></h1><p>Reconstructor is responsible for reconstructing symbol table from a CFG. It should partition a CFG into a set of possibly intersecting functions. See <a href="../Symtab/index.html"><code>Symtab</code></a> module for more information about symbol table and functions.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../index.html#type-reconstructor">reconstructor</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span>(<span><a href="../index.html#type-cfg">cfg</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-symtab">symtab</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>create f</code> creates a reconstructor from a given function <code>f</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <span><span>(<span><a href="../index.html#type-word">word</a> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../index.html#type-word">word</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>default name roots</code> builds a reconstructor from a given function, that maps addresses to function names (see <a href="../Symbolizer/index.html"><code>Symbolizer</code></a>) and a list of known function starts. The reconstructor will extend the list of function starts with destinations of call instructions found in the CFG. Also, the reconstructor treats every node without input edges as a function start. For each function start builds a function using the following definition of a function:</p><p>Function is built from the entry block and every block that is reachable from it without using calls.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_blocks"><a href="#val-of_blocks" class="anchor"></a><code><span><span class="keyword">val</span> of_blocks : <span><span><span>(string * <a href="../index.html#type-addr">addr</a> * <a href="../index.html#type-addr">addr</a>)</span> <a href="../index.html#type-seq">seq</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_blocks</code> produces a reconstructor from a serialized sequence of blocks. Each element of the sequence is deconstructed as <code>(name,ba,ea)</code>, where <code>name</code> is a subroutine name, <code>ba</code> is a virtual address of a block start, and <code>ea</code> is an address of the block end.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-cfg">cfg</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-symtab">symtab</a></span></code></div><div class="spec-doc"><p><code>run reconstructor cfg</code> reconstructs a symbol table from a given cfg</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Factory"><a href="#module-Factory" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Factory/index.html">Factory</a></span><span> : <a href="../Source/Factory/module-type-S/index.html">Source.Factory.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Source/Factory/module-type-S/index.html#type-t">t</a> = <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>a factory of reconstructors</p></div></div></div></body></html>