<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Collator (bap.Bap.Std.Project.Collator)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">bap</a> &#x00BB; <a href="../../../index.html">Bap</a> &#x00BB; <a href="../../index.html">Std</a> &#x00BB; <a href="../index.html">Project</a> &#x00BB; Collator</nav><header class="odoc-preamble"><h1>Module <code><span>Project.Collator</span></code></h1><p>A pass that collates projects.</p><p>A collator is a pass that is folded over projects and computes differences between the base version and the number of alternative versions.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.2.0</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-info"><a href="#type-info" class="anchor"></a><code><span><span class="keyword">type</span> info</span></code></div><div class="spec-doc"><p>Information about a collator.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register"><a href="#val-register" class="anchor"></a><code><span><span class="keyword">val</span> register : 
  <span>?desc:string <span class="arrow">&#45;&gt;</span></span>
  <span>?package:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>prepare:<span>(<span><a href="../../index.html#type-project">project</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'s</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>collate:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../index.html#type-project">project</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'s</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>summary:<span>(<span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>register ~prepare ~collate ~summary name</code> registers a collator.</p><p>The <code>prepare</code> function is called on the base version and it returns the collator's state that can be an arbitrary type <code>'s</code>. Then the <code>collate</code> function is consequitevely applied on alternative versions of the base version, with the version number passed as the first argument (starting from 0). Finally, when all versions are compared with the base, the summary function is called.</p><p>The collator fullname (package:name) must be unique, otherwise a function terminates.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span><span class="keyword">val</span> apply : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../index.html#type-project">project</a> <a href="../../index.html#type-seq">seq</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>apply collator projects</code> applies the <code>collator</code> to the sequence of projects.</p><p>Projects are evaluated lazily, one project at time.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span>?package:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div><div class="spec-doc"><p><code>find ?package name</code> looks up a collator in the registry.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-name"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><a href="#type-info">info</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../../../bap-knowledge/Bap_knowledge/Knowledge/Name/index.html#type-t">Bap_knowledge.Knowledge.Name.t</a></span></code></div><div class="spec-doc"><p>the collators name</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-desc"><a href="#val-desc" class="anchor"></a><code><span><span class="keyword">val</span> desc : <span><a href="#type-info">info</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>the collators description.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-registered"><a href="#val-registered" class="anchor"></a><code><span><span class="keyword">val</span> registered : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-info">info</a> list</span></span></code></div><div class="spec-doc"><p>information about currently registered collators</p></div></div></div></body></html>