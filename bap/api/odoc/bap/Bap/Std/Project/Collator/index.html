<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Collator (bap.Bap.Std.Project.Collator)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">bap</a> &#x00BB; <a href="../../../index.html">Bap</a> &#x00BB; <a href="../../index.html">Std</a> &#x00BB; <a href="../index.html">Project</a> &#x00BB; Collator</nav><h1>Module <code>Project.Collator</code></h1><p>A pass that collates projects.</p><p>A collator is a pass that is folded over projects and computes differences between the base version and the number of alternative versions.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dt class="spec type" id="type-info"><a href="#type-info" class="anchor"></a><code><span class="keyword">type</span> info</code></dt><dd><p>Information about a collator.</p></dd></dl><dl><dt class="spec value" id="val-register"><a href="#val-register" class="anchor"></a><code><span class="keyword">val</span> register : <span>?&#8288;desc:string</span> <span>&#45;&gt;</span> <span>?&#8288;package:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>prepare:<span>(<a href="../../index.html#type-project">project</a> <span>&#45;&gt;</span> <span class="type-var">'s</span>)</span></span> <span>&#45;&gt;</span> <span>collate:<span>(int <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> <a href="../../index.html#type-project">project</a> <span>&#45;&gt;</span> <span class="type-var">'s</span>)</span></span> <span>&#45;&gt;</span> <span>summary:<span>(<span class="type-var">'s</span> <span>&#45;&gt;</span> unit)</span></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>register ~prepare ~collate ~summary name</code> registers a collator.</p><p>The <code>prepare</code> function is called on the base version and it returns the collator's state that can be an arbitrary type <code>'s</code>. Then the <code>collate</code> function is consequitevely applied on alternative versions of the base version, with the version number passed as the first argument (starting from 0). Finally, when all versions are compared with the base, the summary function is called.</p><p>The collator fullname (package:name) must be unique, otherwise a function terminates.</p></dd></dl><dl><dt class="spec value" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span class="keyword">val</span> apply : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../index.html#type-project">project</a> <a href="../../index.html#type-seq">seq</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>apply collator projects</code> applies the <code>collator</code> to the sequence of projects.</p><p>Projects are evaluated lazily, one project at time.</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <span>?&#8288;package:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></dt><dd><p><code>find ?package name</code> looks up a collator in the registry.</p></dd></dl><dl><dt class="spec value" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val</span> name : <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> <a href="../../../../../bap-knowledge/Bap_knowledge/Knowledge/Name/index.html#type-t">Bap_knowledge.Knowledge.Name.t</a></code></dt><dd><p>the collators name</p></dd></dl><dl><dt class="spec value" id="val-desc"><a href="#val-desc" class="anchor"></a><code><span class="keyword">val</span> desc : <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> string</code></dt><dd><p>the collators description.</p></dd></dl><dl><dt class="spec value" id="val-registered"><a href="#val-registered" class="anchor"></a><code><span class="keyword">val</span> registered : unit <span>&#45;&gt;</span> <span><a href="index.html#type-info">info</a> list</span></code></dt><dd><p>information about registered collators</p></dd></dl></div></body></html>