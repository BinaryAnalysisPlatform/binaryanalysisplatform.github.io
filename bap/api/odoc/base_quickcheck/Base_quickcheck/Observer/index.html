<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Observer (base_quickcheck.Base_quickcheck.Observer)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">base_quickcheck</a> &#x00BB; <a href="../index.html">Base_quickcheck</a> &#x00BB; Observer</nav><h1>Module <code>Base_quickcheck.Observer</code></h1><p>Observers create random functions. <a href="../Generator/index.html#val-fn"><code>Generator.fn</code></a> creates a random function using an observer for the input type and a generator for the output type.</p><nav class="toc"><ul><li><a href="#basic-observers">Basic Observers</a></li><li><a href="#observers-based-on-hash-functions">Observers Based on Hash Functions</a></li><li><a href="#modifying-observers">Modifying Observers</a></li><li><a href="#observers-for-recursive-types">Observers for Recursive Types</a></li><li><a href="#low-level-functions">Low-Level functions</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>-'a t</span></code><code> = <span><span class="type-var">'a</span> <a href="../../Base_quickcheck__/Observer0/index.html#type-t">Base_quickcheck__.Observer0.t</a></span></code></dt></dl><section><header><h3 id="basic-observers"><a href="#basic-observers" class="anchor"></a>Basic Observers</h3></header><dl><dt class="spec value" id="val-opaque"><a href="#val-opaque" class="anchor"></a><code><span class="keyword">val</span> opaque : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Produces an observer that treats all values as equivalent. Random functions generated using this observer will be constant with respect to the value(s) it observes.</p></dd></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt></dl><dl><dt class="spec value" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span class="keyword">val</span> unit : <span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span class="keyword">val</span> bool : <span><a href="../../../base/Base/index.html#type-bool">Base.bool</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-char"><a href="#val-char" class="anchor"></a><code><span class="keyword">val</span> char : <span><a href="../../../base/Base/index.html#type-char">Base.char</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : <span><a href="../../../base/Base/index.html#type-string">Base.string</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-int"><a href="#val-int" class="anchor"></a><code><span class="keyword">val</span> int : <span><a href="../../../base/Base/index.html#type-int">Base.int</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span class="keyword">val</span> int32 : <span><a href="../../../base/Base/index.html#type-int32">Base.int32</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-int63"><a href="#val-int63" class="anchor"></a><code><span class="keyword">val</span> int63 : <span><a href="../../../base/Base/Int63/index.html#type-t">Base.Int63.t</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span class="keyword">val</span> int64 : <span><a href="../../../base/Base/index.html#type-int64">Base.int64</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-nativeint"><a href="#val-nativeint" class="anchor"></a><code><span class="keyword">val</span> nativeint : <span><a href="../../../base/Base/index.html#type-nativeint">Base.nativeint</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-float"><a href="#val-float" class="anchor"></a><code><span class="keyword">val</span> float : <span><a href="../../../base/Base/index.html#type-float">Base.float</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-sexp"><a href="#val-sexp" class="anchor"></a><code><span class="keyword">val</span> sexp : <span><a href="../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-option"><a href="#val-option" class="anchor"></a><code><span class="keyword">val</span> option : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../../../base/Base/index.html#type-option">Base.option</a></span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../../../base/Base/index.html#type-list">Base.list</a></span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-both"><a href="#val-both" class="anchor"></a><code><span class="keyword">val</span> both : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-either"><a href="#val-either" class="anchor"></a><code><span class="keyword">val</span> either : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../../base/Base/Either/index.html#type-t">Base.Either.t</a></span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-result"><a href="#val-result" class="anchor"></a><code><span class="keyword">val</span> result : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../../base/Base/Result/index.html#type-t">Base.Result.t</a></span> <a href="index.html#type-t">t</a></span></code></dt></dl></div></div></div><dl><dt class="spec value" id="val-fn"><a href="#val-fn" class="anchor"></a><code><span class="keyword">val</span> fn : <span><span class="type-var">'a</span> <a href="../Generator/index.html#type-t">Generator.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Produces an observer that generates random inputs for a given function, calls the function on them, then observes the corresponding outputs.</p></dd></dl><dl><dt class="spec value" id="val-map_t"><a href="#val-map_t" class="anchor"></a><code><span class="keyword">val</span> map_t : <span><span class="type-var">'key</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'data</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'key</span>, <span class="type-var">'data</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base/Map/index.html#type-t">Base.Map.t</a></span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-set_t"><a href="#val-set_t" class="anchor"></a><code><span class="keyword">val</span> set_t : <span><span class="type-var">'elt</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'elt</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base/Set/index.html#type-t">Base.Set.t</a></span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-map_tree"><a href="#val-map_tree" class="anchor"></a><code><span class="keyword">val</span> map_tree : <span><span class="type-var">'key</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'data</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'key</span>, <span class="type-var">'data</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base__Map/Using_comparator/Tree/index.html#type-t">Base.Map.Using_comparator.Tree.t</a></span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-set_tree"><a href="#val-set_tree" class="anchor"></a><code><span class="keyword">val</span> set_tree : <span><span class="type-var">'elt</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'elt</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base__Set/Using_comparator/Tree/index.html#type-t">Base.Set.Using_comparator.Tree.t</a></span> <a href="index.html#type-t">t</a></span></code></dt></dl></section><section><header><h3 id="observers-based-on-hash-functions"><a href="#observers-based-on-hash-functions" class="anchor"></a>Observers Based on Hash Functions</h3></header><dl><dt class="spec value" id="val-of_hash_fold"><a href="#val-of_hash_fold" class="anchor"></a><code><span class="keyword">val</span> of_hash_fold : <span>(<a href="../../../base/Base/Hash/index.html#type-state">Base.Hash.state</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../base/Base/Hash/index.html#type-state">Base.Hash.state</a>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates an observer that just calls a hash function. This is a good default for most hashable types not covered by the basic observers above.</p></dd></dl></section><section><header><h3 id="modifying-observers"><a href="#modifying-observers" class="anchor"></a>Modifying Observers</h3></header><dl><dt class="spec value" id="val-unmap"><a href="#val-unmap" class="anchor"></a><code><span class="keyword">val</span> unmap : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>f:<span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt></dl></section><section><header><h3 id="observers-for-recursive-types"><a href="#observers-for-recursive-types" class="anchor"></a>Observers for Recursive Types</h3></header><dl><dt class="spec value" id="val-fixed_point"><a href="#val-fixed_point" class="anchor"></a><code><span class="keyword">val</span> fixed_point : <span>(<span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Ties the recursive knot to observe recursive types.</p><p>For example, here is an observer for binary trees:</p><pre><code class="ml">let tree_observer leaf_observer =
  fixed_point (fun self -&gt;
    either leaf_observer (both self self)
    |&gt; unmap ~f:(function
      | `Leaf leaf -&gt; First leaf
      | `Node (l, r) -&gt; Second (l, r)))</code></pre></dd></dl></section><section><header><h3 id="low-level-functions"><a href="#low-level-functions" class="anchor"></a>Low-Level functions</h3><p>Most users do not need to call these functions.</p></header><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>size:<a href="../../../base/Base/index.html#type-int">Base.int</a></span> <span>&#45;&gt;</span> <span>hash:<a href="../../../base/Base/Hash/index.html#type-state">Base.Hash.state</a></span> <span>&#45;&gt;</span> <a href="../../../base/Base/Hash/index.html#type-state">Base.Hash.state</a>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-observe"><a href="#val-observe" class="anchor"></a><code><span class="keyword">val</span> observe : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>size:<a href="../../../base/Base/index.html#type-int">Base.int</a></span> <span>&#45;&gt;</span> <span>hash:<a href="../../../base/Base/Hash/index.html#type-state">Base.Hash.state</a></span> <span>&#45;&gt;</span> <a href="../../../base/Base/Hash/index.html#type-state">Base.Hash.state</a></code></dt></dl></section></div></body></html>