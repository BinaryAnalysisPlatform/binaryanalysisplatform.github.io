<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fbasic (bap-core-theory.Bap_core_theory.Theory.Fbasic)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">bap-core-theory</a> &#x00BB; <a href="../../index.html">Bap_core_theory</a> &#x00BB; <a href="../index.html">Theory</a> &#x00BB; Fbasic</nav><h1>Module type <code>Theory.Fbasic</code></h1><p>The Basic Theory of Floating Points.</p><p>Floating point numbers represent a finite subset of the set of real numbers. Some formats also extend this set with special values to represent infinities or error conditions. This, in general, exceeds the scope of the floating point theory, however the theory includes predicates with domains that potentially may include this special numbers, e.g., <code>is_nan</code>. For floating point formats that do not support special values, such predicates will become constant functions.</p><p>All operations in the Floating Point theory are defined in terms of operations on real numbers. Since floating point numbers represent only a subset of the real set, denotations select a number from the set of numbers of the floating point sort using concrete rules expressed in terms of rounding modes. The rounding mode is a parameter of many operations, denoted with a term of sort <code>rmode</code>.</p><nav class="toc"><ul><li><a href="#rounding-modes">Rounding modes</a></li></ul></nav></header><dl><dt class="spec value" id="val-float"><a href="#val-float" class="anchor"></a><code><span class="keyword">val</span> float : <span><span><span><span>(<span class="type-var">'r</span>, <span class="type-var">'s</span>)</span> <a href="../index.html#type-format">format</a></span> <a href="../Float/index.html#type-t">Float.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'s</span> <a href="../index.html#type-bitv">bitv</a></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'r</span>, <span class="type-var">'s</span>)</span> <a href="../index.html#type-format">format</a></span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>float s x</code> interprets <code>x</code> as a floating point number.</p></dd></dl><dl><dt class="spec value" id="val-fbits"><a href="#val-fbits" class="anchor"></a><code><span class="keyword">val</span> fbits : <span><span><span>(<span class="type-var">'r</span>, <span class="type-var">'s</span>)</span> <a href="../index.html#type-format">format</a></span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'s</span> <a href="../index.html#type-bitv">bitv</a></span></code></dt><dd><p><code>fbits x</code> is a bitvector representation of the floating point number <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-is_finite"><a href="#val-is_finite" class="anchor"></a><code><span class="keyword">val</span> is_finite : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-bool">bool</a></code></dt><dd><p><code>is_finite x</code> holds if <code>x</code> represents a finite number.</p><p>A floating point number is finite if it represents a number from the set of real numbers <code>R</code>.</p><p>The predicate always holds for formats in which only finite floating point numbers are representable.</p></dd></dl><dl><dt class="spec value" id="val-is_nan"><a href="#val-is_nan" class="anchor"></a><code><span class="keyword">val</span> is_nan : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-bool">bool</a></code></dt><dd><p><code>is_nan x</code> holds if <code>x</code> represents a not-a-number.</p><p>A floating point value is not-a-number if it is neither finite nor infinite number.</p><p>The predicated never holds for formats that represent only numbers.</p></dd></dl><dl><dt class="spec value" id="val-is_inf"><a href="#val-is_inf" class="anchor"></a><code><span class="keyword">val</span> is_inf : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-bool">bool</a></code></dt><dd><p><code>is_inf x</code> holds if <code>x</code> represents an infinite number.</p><p>Never holds for formats in which infinite numbers are not representable.</p></dd></dl><dl><dt class="spec value" id="val-is_fzero"><a href="#val-is_fzero" class="anchor"></a><code><span class="keyword">val</span> is_fzero : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-bool">bool</a></code></dt><dd><p><code>is_fzero x</code> holds if <code>x</code> represents a zero.</p></dd></dl><dl><dt class="spec value" id="val-is_fpos"><a href="#val-is_fpos" class="anchor"></a><code><span class="keyword">val</span> is_fpos : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-bool">bool</a></code></dt><dd><p><code>is_fpos x</code> holds if <code>x</code> represents a positive number.</p><p>The denotation is not defined if <code>x</code> represents zero.</p></dd></dl><dl><dt class="spec value" id="val-is_fneg"><a href="#val-is_fneg" class="anchor"></a><code><span class="keyword">val</span> is_fneg : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-bool">bool</a></code></dt><dd><p><code>is_fneg x</code> hold if <code>x</code> represents a negative number.</p><p>The denotation is not defined if <code>x</code> represents zero.</p></dd></dl><section><header><h4 id="rounding-modes"><a href="#rounding-modes" class="anchor"></a>Rounding modes</h4><p>Many operations in the Theory of Floating Point numbers are defined using the rounding mode parameter.</p><p>The rounding mode gives a precise meaning to the phrase &quot;the closest floating point number to <code>x</code>&quot;, where <code>x</code> is a real number. When <code>x</code> is not representable by the given format, some other number <code>x'</code> is selected based on rules of the rounding mode.</p></header><dl><dt class="spec value" id="val-rne"><a href="#val-rne" class="anchor"></a><code><span class="keyword">val</span> rne : <a href="../index.html#type-rmode">rmode</a></code></dt><dd><p>rounding to nearest, ties to even.</p><p>The denotation is the floating point number nearest to the denoted real number. If the two nearest numbers are equally close, then the one with an even least significant digit shall be selected. The denotation is not defined, if both numbers have an even least significant digit.</p></dd></dl><dl><dt class="spec value" id="val-rna"><a href="#val-rna" class="anchor"></a><code><span class="keyword">val</span> rna : <a href="../index.html#type-rmode">rmode</a></code></dt><dd><p>rounding to nearest, ties away.</p><p>The denotation is the floating point number nearest to the denoted real number. If the two nearest numbers are equally close, then the one with larger magnitude shall be selected.</p></dd></dl><dl><dt class="spec value" id="val-rtp"><a href="#val-rtp" class="anchor"></a><code><span class="keyword">val</span> rtp : <a href="../index.html#type-rmode">rmode</a></code></dt><dd><p>rounding towards positive.</p><p>The denotation is the floating point number that is nearest but no less than the denoted real number.</p></dd></dl><dl><dt class="spec value" id="val-rtn"><a href="#val-rtn" class="anchor"></a><code><span class="keyword">val</span> rtn : <a href="../index.html#type-rmode">rmode</a></code></dt><dd><p>rounding towards negative.</p><p>The denotation is the floating point number that is nearest but not greater than the denoted real number.</p></dd></dl><dl><dt class="spec value" id="val-rtz"><a href="#val-rtz" class="anchor"></a><code><span class="keyword">val</span> rtz : <a href="../index.html#type-rmode">rmode</a></code></dt><dd><p>rounding towards zero.</p><p>The denotation is the floating point number that is nearest but not greater in magnitude than the denoted real number.</p></dd></dl><dl><dt class="spec value" id="val-requal"><a href="#val-requal" class="anchor"></a><code><span class="keyword">val</span> requal : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <a href="../index.html#type-bool">bool</a></code></dt><dd><p><code>requal x y</code> holds if rounding modes are equal.</p></dd></dl><dl><dt class="spec value" id="val-cast_float"><a href="#val-cast_float" class="anchor"></a><code><span class="keyword">val</span> cast_float : <span><span><span class="type-var">'f</span> <a href="../Float/index.html#type-t">Float.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-bitv">bitv</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>cast_float s m x</code> is the closest to <code>x</code> floating number of sort <code>s</code>.</p><p>The bitvector <code>x</code> is interpreted as an unsigned integer in the two-complement form.</p></dd></dl><dl><dt class="spec value" id="val-cast_sfloat"><a href="#val-cast_sfloat" class="anchor"></a><code><span class="keyword">val</span> cast_sfloat : <span><span><span class="type-var">'f</span> <a href="../Float/index.html#type-t">Float.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-bitv">bitv</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>cast_sfloat s rm x</code> is the closest to <code>x</code> floating point number of sort <code>x</code>.</p><p>The bitvector <code>x</code> is interpreted as a signed integer in the two-complement form.</p></dd></dl><dl><dt class="spec value" id="val-cast_int"><a href="#val-cast_int" class="anchor"></a><code><span class="keyword">val</span> cast_int : <span><span><span class="type-var">'a</span> <a href="../Bitv/index.html#type-t">Bitv.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-bitv">bitv</a></span></code></dt><dd><p><code>cast_int s rm x</code> returns an integer closest to <code>x</code>.</p><p>The resulting bitvector should be interpreted as an unsigned two-complement integer.</p></dd></dl><dl><dt class="spec value" id="val-cast_sint"><a href="#val-cast_sint" class="anchor"></a><code><span class="keyword">val</span> cast_sint : <span><span><span class="type-var">'a</span> <a href="../Bitv/index.html#type-t">Bitv.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-bitv">bitv</a></span></code></dt><dd><p><code>cast_sint s rm x</code> returns an integer closest to <code>x</code>.</p><p>The resulting bitvector should be interpreted as a signed two-complement integer.</p></dd></dl><dl><dt class="spec value" id="val-fneg"><a href="#val-fneg" class="anchor"></a><code><span class="keyword">val</span> fneg : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fneg x</code> is <code>-x</code></p></dd></dl><dl><dt class="spec value" id="val-fabs"><a href="#val-fabs" class="anchor"></a><code><span class="keyword">val</span> fabs : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fabs x</code> the absolute value of <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-fadd"><a href="#val-fadd" class="anchor"></a><code><span class="keyword">val</span> fadd : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fadd m x y</code> is the floating point number closest to <code>x+y</code>.</p></dd></dl><dl><dt class="spec value" id="val-fsub"><a href="#val-fsub" class="anchor"></a><code><span class="keyword">val</span> fsub : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fsub m x y</code> is the floating point number closest to <code>x-y</code>.</p></dd></dl><dl><dt class="spec value" id="val-fmul"><a href="#val-fmul" class="anchor"></a><code><span class="keyword">val</span> fmul : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fmul m x y</code> is the floating point number closest to <code>x*y</code>.</p></dd></dl><dl><dt class="spec value" id="val-fdiv"><a href="#val-fdiv" class="anchor"></a><code><span class="keyword">val</span> fdiv : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fdiv m x y</code> is the floating point number closest to <code>x/y</code>.</p></dd></dl><dl><dt class="spec value" id="val-fsqrt"><a href="#val-fsqrt" class="anchor"></a><code><span class="keyword">val</span> fsqrt : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fsqrt m x</code> is the floating point number closest to <code>sqrt x</code>.</p><p>The denotation is not defined if</p></dd></dl><dl><dt class="spec value" id="val-fmodulo"><a href="#val-fmodulo" class="anchor"></a><code><span class="keyword">val</span> fmodulo : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fdiv m x y</code> is the floating point number closest to the remainder of <code>x/y</code>.</p></dd></dl><dl><dt class="spec value" id="val-fmad"><a href="#val-fmad" class="anchor"></a><code><span class="keyword">val</span> fmad : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fmad m x y z</code> is the floating point number closest to <code>x * y + z</code>.</p></dd></dl><dl><dt class="spec value" id="val-fround"><a href="#val-fround" class="anchor"></a><code><span class="keyword">val</span> fround : <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fround m x</code> is the floating point number closest to <code>x</code> rounded to an integral, using the rounding mode <code>m</code>.</p></dd></dl><dl><dt class="spec value" id="val-fconvert"><a href="#val-fconvert" class="anchor"></a><code><span class="keyword">val</span> fconvert : <span><span><span class="type-var">'f</span> <a href="../Float/index.html#type-t">Float.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-rmode">rmode</a> <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fconvert f r x</code> is the closest to <code>x</code> floating number in format <code>f</code>.</p></dd></dl><dl><dt class="spec value" id="val-fsucc"><a href="#val-fsucc" class="anchor"></a><code><span class="keyword">val</span> fsucc : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fsucc m x</code> is the least floating point number representable in (sort x) that is greater than <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-fpred"><a href="#val-fpred" class="anchor"></a><code><span class="keyword">val</span> fpred : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></code></dt><dd><p><code>fsucc m x</code> is the greatest floating point number representable in (sort x) that is less than <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-forder"><a href="#val-forder" class="anchor"></a><code><span class="keyword">val</span> forder : <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-bool">bool</a></code></dt><dd><p><code>forder x y</code> holds if floating point number <code>x</code> is less than <code>y</code>.</p><p>The denotation is not defined if either of arguments do not represent a floating point number.</p></dd></dl></section></div></body></html>