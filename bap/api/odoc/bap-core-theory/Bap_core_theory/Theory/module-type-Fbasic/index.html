<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fbasic (bap-core-theory.Bap_core_theory.Theory.Fbasic)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">bap-core-theory</a> &#x00BB; <a href="../../index.html">Bap_core_theory</a> &#x00BB; <a href="../index.html">Theory</a> &#x00BB; Fbasic</nav><header class="odoc-preamble"><h1>Module type <code><span>Theory.Fbasic</span></code></h1><p>The Basic Theory of Floating-Points.</p><p>floating-point numbers represent a finite subset of the set of real numbers. Some formats also extend this set with special values to represent infinities or error conditions. This, in general, exceeds the scope of the floating-point theory, however the theory includes predicates with domains that potentially may include this special numbers, e.g., <code>is_nan</code>. For floating-point formats that do not support special values, such predicates will become constant functions.</p><p>All operations in the Floating-Point theory are defined in terms of operations on real numbers. Since floating-point numbers represent only a subset of the real set, denotations select a number from the set of numbers of the floating-point sort using concrete rules expressed in terms of rounding modes. The rounding mode is a parameter of many operations, denoted with a term of sort <code>rmode</code>.</p></header><nav class="odoc-toc"><ul><li><a href="#rounding-modes">Rounding modes</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-float" class="anchored"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : 
  <span><span><span><span><span>( <span class="type-var">'r</span>, <span class="type-var">'s</span> )</span> <a href="../index.html#type-format">format</a></span> <a href="../Float/index.html#type-t">Float.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'s</span> <a href="../index.html#type-bitv">bitv</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'r</span>, <span class="type-var">'s</span> )</span> <a href="../index.html#type-format">format</a></span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>float s x</code> interprets <code>x</code> as a floating-point number.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fbits" class="anchored"><a href="#val-fbits" class="anchor"></a><code><span><span class="keyword">val</span> fbits : <span><span><span><span>( <span class="type-var">'r</span>, <span class="type-var">'s</span> )</span> <a href="../index.html#type-format">format</a></span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'s</span> <a href="../index.html#type-bitv">bitv</a></span></span></code></div><div class="spec-doc"><p><code>fbits x</code> is a bitvector representation of the floating-point number <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_finite" class="anchored"><a href="#val-is_finite" class="anchor"></a><code><span><span class="keyword">val</span> is_finite : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-bool">bool</a></span></code></div><div class="spec-doc"><p><code>is_finite x</code> holds if <code>x</code> represents a finite number.</p><p>A floating-point number is finite if it represents a number from the set of real numbers <code>R</code>.</p><p>The predicate always holds for formats in which only finite floating-point numbers are representable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_nan" class="anchored"><a href="#val-is_nan" class="anchor"></a><code><span><span class="keyword">val</span> is_nan : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-bool">bool</a></span></code></div><div class="spec-doc"><p><code>is_nan x</code> holds if <code>x</code> represents a not-a-number.</p><p>A floating-point value is not-a-number if it is neither finite nor infinite number.</p><p>The predicated never holds for formats that represent only numbers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_inf" class="anchored"><a href="#val-is_inf" class="anchor"></a><code><span><span class="keyword">val</span> is_inf : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-bool">bool</a></span></code></div><div class="spec-doc"><p><code>is_inf x</code> holds if <code>x</code> represents an infinite number.</p><p>Never holds for formats in which infinite numbers are not representable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_fzero" class="anchored"><a href="#val-is_fzero" class="anchor"></a><code><span><span class="keyword">val</span> is_fzero : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-bool">bool</a></span></code></div><div class="spec-doc"><p><code>is_fzero x</code> holds if <code>x</code> represents a zero.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_fpos" class="anchored"><a href="#val-is_fpos" class="anchor"></a><code><span><span class="keyword">val</span> is_fpos : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-bool">bool</a></span></code></div><div class="spec-doc"><p><code>is_fpos x</code> holds if <code>x</code> represents a positive number.</p><p>The denotation is not defined if <code>x</code> represents zero.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_fneg" class="anchored"><a href="#val-is_fneg" class="anchor"></a><code><span><span class="keyword">val</span> is_fneg : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-bool">bool</a></span></code></div><div class="spec-doc"><p><code>is_fneg x</code> hold if <code>x</code> represents a negative number.</p><p>The denotation is not defined if <code>x</code> represents zero.</p></div></div><h4 id="rounding-modes"><a href="#rounding-modes" class="anchor"></a>Rounding modes</h4><p>Many operations in the Theory of Floating-Point numbers are defined using the rounding mode parameter.</p><p>The rounding mode gives a precise meaning to the phrase &quot;the closest floating-point number to <code>x</code>&quot;, where <code>x</code> is a real number. When <code>x</code> is not representable by the given format, some other number <code>x'</code> is selected based on rules of the rounding mode.</p><div class="odoc-spec"><div class="spec value" id="val-rne" class="anchored"><a href="#val-rne" class="anchor"></a><code><span><span class="keyword">val</span> rne : <a href="../index.html#type-rmode">rmode</a></span></code></div><div class="spec-doc"><p>rounding to nearest, ties to even.</p><p>The denotation is the floating-point number nearest to the denoted real number. If the two nearest numbers are equally close, then the one with an even least significant digit shall be selected. The denotation is not defined, if both numbers have an even least significant digit.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rna" class="anchored"><a href="#val-rna" class="anchor"></a><code><span><span class="keyword">val</span> rna : <a href="../index.html#type-rmode">rmode</a></span></code></div><div class="spec-doc"><p>rounding to nearest, ties away.</p><p>The denotation is the floating-point number nearest to the denoted real number. If the two nearest numbers are equally close, then the one with larger magnitude shall be selected.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rtp" class="anchored"><a href="#val-rtp" class="anchor"></a><code><span><span class="keyword">val</span> rtp : <a href="../index.html#type-rmode">rmode</a></span></code></div><div class="spec-doc"><p>rounding towards positive.</p><p>The denotation is the floating-point number that is nearest but no less than the denoted real number.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rtn" class="anchored"><a href="#val-rtn" class="anchor"></a><code><span><span class="keyword">val</span> rtn : <a href="../index.html#type-rmode">rmode</a></span></code></div><div class="spec-doc"><p>rounding towards negative.</p><p>The denotation is the floating-point number that is nearest but not greater than the denoted real number.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rtz" class="anchored"><a href="#val-rtz" class="anchor"></a><code><span><span class="keyword">val</span> rtz : <a href="../index.html#type-rmode">rmode</a></span></code></div><div class="spec-doc"><p>rounding towards zero.</p><p>The denotation is the floating-point number that is nearest but not greater in magnitude than the denoted real number.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-requal" class="anchored"><a href="#val-requal" class="anchor"></a><code><span><span class="keyword">val</span> requal : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-bool">bool</a></span></code></div><div class="spec-doc"><p><code>requal x y</code> holds if rounding modes are equal.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cast_float" class="anchored"><a href="#val-cast_float" class="anchor"></a><code><span><span class="keyword">val</span> cast_float : <span><span><span><span class="type-var">'f</span> <a href="../Float/index.html#type-t">Float.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-bitv">bitv</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>cast_float s m x</code> is the closest to <code>x</code> floating number of sort <code>s</code>.</p><p>The bitvector <code>x</code> is interpreted as an unsigned integer in the two-complement form.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cast_sfloat" class="anchored"><a href="#val-cast_sfloat" class="anchor"></a><code><span><span class="keyword">val</span> cast_sfloat : <span><span><span><span class="type-var">'f</span> <a href="../Float/index.html#type-t">Float.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-bitv">bitv</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>cast_sfloat s rm x</code> is the closest to <code>x</code> floating-point number of sort <code>x</code>.</p><p>The bitvector <code>x</code> is interpreted as a signed integer in the two-complement form.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cast_int" class="anchored"><a href="#val-cast_int" class="anchor"></a><code><span><span class="keyword">val</span> cast_int : <span><span><span><span class="type-var">'a</span> <a href="../Bitv/index.html#type-t">Bitv.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-bitv">bitv</a></span></span></code></div><div class="spec-doc"><p><code>cast_int s rm x</code> returns an integer closest to <code>x</code>.</p><p>The resulting bitvector should be interpreted as an unsigned two-complement integer.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cast_sint" class="anchored"><a href="#val-cast_sint" class="anchor"></a><code><span><span class="keyword">val</span> cast_sint : <span><span><span><span class="type-var">'a</span> <a href="../Bitv/index.html#type-t">Bitv.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-bitv">bitv</a></span></span></code></div><div class="spec-doc"><p><code>cast_sint s rm x</code> returns an integer closest to <code>x</code>.</p><p>The resulting bitvector should be interpreted as a signed two-complement integer.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fneg" class="anchored"><a href="#val-fneg" class="anchor"></a><code><span><span class="keyword">val</span> fneg : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fneg x</code> is <code>-x</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-fabs" class="anchored"><a href="#val-fabs" class="anchor"></a><code><span><span class="keyword">val</span> fabs : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fabs x</code> the absolute value of <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fadd" class="anchored"><a href="#val-fadd" class="anchor"></a><code><span><span class="keyword">val</span> fadd : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fadd m x y</code> is the floating-point number closest to <code>x+y</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fsub" class="anchored"><a href="#val-fsub" class="anchor"></a><code><span><span class="keyword">val</span> fsub : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fsub m x y</code> is the floating-point number closest to <code>x-y</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fmul" class="anchored"><a href="#val-fmul" class="anchor"></a><code><span><span class="keyword">val</span> fmul : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fmul m x y</code> is the floating-point number closest to <code>x*y</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fdiv" class="anchored"><a href="#val-fdiv" class="anchor"></a><code><span><span class="keyword">val</span> fdiv : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fdiv m x y</code> is the floating-point number closest to <code>x/y</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fsqrt" class="anchored"><a href="#val-fsqrt" class="anchor"></a><code><span><span class="keyword">val</span> fsqrt : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fsqrt m x</code> returns the closest floating-point number to <code>r</code>, where <code>r</code> is such number that <code>r*r</code> is equal to <code>x</code>.</p><p>If <code>x</code> is a negative finite non-zero number, or is <code>nan</code>, or is the negative infinity, then <code>sqrt x</code> is <code>nan</code>. If <code>x</code> is the positive infinity then <code>fsqrt x</code> is the positive infinity.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fmodulo" class="anchored"><a href="#val-fmodulo" class="anchor"></a><code><span><span class="keyword">val</span> fmodulo : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fdiv m x y</code> is the floating-point number closest to the remainder of <code>x/y</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fmad" class="anchored"><a href="#val-fmad" class="anchor"></a><code><span><span class="keyword">val</span> fmad : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fmad m x y z</code> is the floating-point number closest to <code>x * y + z</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fround" class="anchored"><a href="#val-fround" class="anchor"></a><code><span><span class="keyword">val</span> fround : <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fround m x</code> is the floating-point number closest to <code>x</code> rounded to an integral, using the rounding mode <code>m</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fconvert" class="anchored"><a href="#val-fconvert" class="anchor"></a><code><span><span class="keyword">val</span> fconvert : <span><span><span><span class="type-var">'f</span> <a href="../Float/index.html#type-t">Float.t</a></span> <a href="../Value/index.html#type-sort">Value.sort</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-rmode">rmode</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">_</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fconvert f r x</code> is the closest to <code>x</code> floating number in format <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fsucc" class="anchored"><a href="#val-fsucc" class="anchor"></a><code><span><span class="keyword">val</span> fsucc : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fsucc m x</code> is the least floating-point number representable in (sort x) that is greater than <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fpred" class="anchored"><a href="#val-fpred" class="anchor"></a><code><span><span class="keyword">val</span> fpred : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span></span></code></div><div class="spec-doc"><p><code>fsucc m x</code> is the greatest floating-point number representable in (sort x) that is less than <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-forder" class="anchored"><a href="#val-forder" class="anchor"></a><code><span><span class="keyword">val</span> forder : <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="../index.html#type-float">float</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-bool">bool</a></span></code></div><div class="spec-doc"><p><code>forder x y</code> holds if floating-point number <code>x</code> is less than <code>y</code>.</p><p>The denotation is not defined if either of arguments do not represent a floating-point number.</p></div></div></div></body></html>